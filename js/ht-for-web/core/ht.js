!function(m,b,Y){"use strict";var T="ht";if(!m[T]){!function(){for(var A=0,P=["ms","moz","webkit","o"],k=0;k<P.length&&!m.requestAnimationFrame;++k)m.requestAnimationFrame=m[P[k]+"RequestAnimationFrame"],m.cancelAnimationFrame=m[P[k]+"CancelAnimationFrame"]||m[P[k]+"CancelRequestAnimationFrame"];m.requestAnimationFrame||(m.requestAnimationFrame=function(y){var z=(new Date).getTime(),p=Math.max(0,16-(z-A)),Q=m.setTimeout(function(){y(z+p)},p);return A=z+p,Q}),m.cancelAnimationFrame||(m.cancelAnimationFrame=function(A){W(A)})}();var O,$,j,G,i=m.document,L=null,U=m[T]={},g=m[T+"config"],h=U.Default=g&&g.Default||{},u=U.Style=g&&g.Style||{},_=U.Color=g&&g.Color||{},r=U.IsGetter=g&&g.IsGetter||{},p=Math,c=p.round,F=p.floor,k=p.ceil,N=p.sqrt,K=p.max,C=p.min,M=p.abs,e=p.cos,w=p.acos,x=p.sin,q=p.pow,y=p.asin,E=p.PI,B=2*E,d=E/2,o=p.tan,l=p.atan2,Q=p.random,n=m.parseInt||global.parseInt,H="2015-12-01",s=function(Y){return Y*Y},P=m.setTimeout,W=m.clearTimeout,A=m.navigator?m.navigator.userAgent.toLowerCase():"",v=function(S){return S.test(A)},I=v(/msie/)||v(/trident/),J=v(/msie 10/),f=v(/firefox/),t=v(/mac/),S=h.isTouchable===Y?i?"ontouchend"in i:!1:h.isTouchable,z="default",R="single",D="multiple",Z="front",V="back",X="left",a="right",Oq="top",vm="bottom",vl="center",xo="eye",uh="middle",$q="east",jg="west",De="north",Zp="none",Wk="px",lj="absolute",Sq="border",yg="triangle",Fo="rect",Kl="circle",vj="cylinder",sq="shape",Wg="items",gn="normal",lp="remove",Ne="clear",hj="width",Pp="height",ch="ingroup",Vb="check",em="uncheck",nd="radio",to="radioOn",bb="radioOff",Yk="points",Kn="values",Yd="series",Qh="body",jk="label",ab="label2",nj="note",ag="note2",Fh="icons",Uh="labelFont",fb="labelColor",Yi="labelSelectColor",Dl="note.expanded",Yn="note2.expanded",Wh="edge.expanded",ij="edge.points",Xh="edge.type",ah="rotation",zs="getRotation",eg="setRotation",Tl="hidden",Gp="visible",km="tuv",xn="no",dq="select",ie="currentSubGraph",Aq="selectBackground",Re="autoMakeVisible",Vg="autoHideScrollBar",dh="scrollBarColor",li="scrollBarSize",Zn="indent",op="rowHeight",fs="columnLineColor",Dm="rowLineColor",yo="columnLineVisible",zq="rowLineVisible",Ab="visibleFunc",Mm="expandIcon",Bn="collapseIcon",Te="checkMode",dk="sortFunc",Qr="editable",gq="batchEditable",Mk="tristate",np="asc",Fi="desc",ue="position",rl="elevation",Ao="children",yf="translateX",qc="translateY",Ki="dataModel",Ed="shape3d",pf="shape3d.resolution",Er="shape3d.visible",_j="shape3d.from.visible",ho="shape3d.to.visible",Mf="shape3d.top.visible",uq="shape3d.bottom.visible",Vq="repeat.uv.length",Yh="serializeValue",gg="deserializeValue",am="centerUniform",On="rgba(255,255,255,0)",Zh="style",id="attr",ao="field",cj="string",Pe="boolean",Lj="color",Zc="int",Ti="number",xc="ew-resize",Ec="ns-resize",Nj="pointer",xb="auto",Lm="mousedown",dl="mousemove",Zd="mouseup",Rm="mouseout",Oc="touchstart",oh="touchmove",We="touchend",tf="keydown",Zl="keyup",ro=f?"DOMMouseScroll":"mousewheel",Kk=S?[Oc,oh,We]:[tf,Zl,Lm,dl,Zd,Rm,ro,"contextmenu"],Ld=L,_d=L,Om=L,ek=Zd.length,pr=function(){Om&&(W(Om.timeout),Om=L)},Ej=function(){Om&&Xm(Om.e,Om.info)};m.addEventListener&&(S||(m.addEventListener(Rm,function(){pr()},!1),m.addEventListener(ro,function(){Nf()},!1)),m.addEventListener(Zl,function(d){91===d.keyCode?wj={}:delete wj[d.keyCode]},!0),m.addEventListener(tf,function(G){wj[G.keyCode]=!0},!0));var Zj,Fn,aq,Sb=!1,qr=L,Wf=L,Cg={},Af={},hr={},Hl={},od={},wj={},tc={},Cc={},vb={},Ad=[],ko={},jn=L,Vn=L,gh=function(){},yk=function(){throw"Oops!"},Tm=[0,0,0],rn=[0,0,0,0],Hp={x:0,y:0,width:0,height:0},Kb=L,Dc=L,No=L,yr=function(x){Dc&&!x._72O&&(No||(No={}),No[x._72O=qs()]=x),Zj!=L?sm()<.05&&G&&!Fn&&(fd=pr):fd=io},Mj=function($,n,e,y){Dc||(Dc={});var l=Dc[$];if(l){if(l.url===n)return;l.image.onload=gh,l.image.onerror=gh}var t=new Image;Dc[$]={image:t,url:n},t.onload=function(){e&&(t.width=e),y&&(t.height=y),h.handleImageLoaded($,t),vk($,t)},t.onerror=function(){vk($,h.handleUnfoundImage($,n)||L)},t.src=n},vk=function(n,f){if(Af[n]=f,delete Dc[n],Cr(Dc)&&(Dc=L,No)){for(var h in No){var Q=No[h];Q.invalidateAll&&Q.invalidateAll(),Q.redraw&&Q.redraw(),Q.iv(),delete Q._72O}No=L}if(f&&No)for(var h in No){var Q=No[h];Q.invalidateAll&&Q.invalidateAll(),Q.redraw&&Q.redraw(),Q.iv()}},um=function(){return m.performance&&m.performance.now?m.performance.now():Date.now()},sp=function(V,F){F?W(V):m.cancelAnimationFrame(V)},Ze=function(c,N,$){return{width:c,height:N,comps:zc($)?$:[$]}},Hn=function(L,F){return{type:Kl,rect:[L,F,1.6,1.6],borderWidth:1,borderColor:wo,gradient:Nh,gradientColor:Yf,background:wo}},Yo=function(_,u){return Ze(16,16,{type:yg,rect:[4,4,10,8],background:_,rotation:u?1.57:3.14})},Il=function(Q,T){return Ze(16,16,{type:yg,rect:[4,4,8,7],background:Q,rotation:T?3.14:0})},Dd=function(F){var n=F._orientation;return"horizontal"===n||"h"===n},Cn=function(J){U.z=$=J},Do=function(v){var t=2,F=0;for(var c in v)c.length===t&&n(c,32)===Eq&&(jn=Vn=v[c]),F++;return F},zi=function(K,M,R){return R?{x:K-R,y:M-R,width:2*R+1,height:2*R+1}:S?{x:K-5,y:M-5,width:11,height:11}:{x:K-1,y:M-1,width:3,height:3}},Km=function(A){return(/ble$/.test(A)||/ed$/.test(A)||r[A]?"is":"get")+A.charAt(0).toUpperCase()+A.slice(1)},Kg=function(b){return"set"+b.charAt(0).toUpperCase()+b.slice(1)},dn=function(u){return typeof u===cj||u instanceof String},_h=function(P){return typeof P===Ti},io=function(t){return typeof t===Pe},mi=function(u){return u&&"object"==typeof u},$c=function(U){return"function"==typeof U},zc=function(m){return m instanceof Array},th=function(l){return l instanceof Ml},bk=function(s){return zc(s)?new Ml(s):s},zk=function(y){return y instanceof mg},Mo=function(I){return I instanceof Di},Wn=function(V){return V instanceof rc},Qn=function(t){return t&&"IFRAME"===t.tagName},Xk=function(i){return i==L?i:parseFloat(i.toFixed(2))},Bk=function(w,Z,F){var J,Q=Z.length;if(F)for(var u=0;F>u;u++)if(3===Q)w.push(Z[0]),w.push(Z[1]),w.push(Z[2]);else for(J=0;Q>J;J++)w.push(Z[J]);else if(3===Q)w.push(Z[0]),w.push(Z[1]),w.push(Z[2]);else for(J=0;Q>J;J++)w.push(Z[J])},Qb=function(e){return e?mi(e)?e:{}:!1},tl=function(t,F,M){var R,y=mi(t)?t:t.prototype;for(R in F)M&&y[R]!==Y||(y[R]=F[R]);return t},po=function(i){return String.fromCharCode(i)},Eg=function(s){for(var n,I=0,m="";I<s.length;I++)n=s[s.length-1-I],"%"===n?n="'":"a"===n?n='"':"]"===n&&(n="\\"),m+=po(n.charCodeAt(0)-1);return m},Xc=function(n,P,V){n.superClass.constructor.apply(P,V)},Cr=function(z){for(var i in z)return!1;return!0},wi=function(o){return o?0===o.length:!0},ic=function(w,R){return w.x===R.x&&w.y===R.y&&w.width===R.width&&w.height===R.height},Og=function(O,l,d){return l>O?l:O>d?d:O},sm=function(){var q=1e4*x(ek++);return q-F(q)},cq=function(B,F,o){return Tr(B.x,B.y,F.x,F.y,o.x,o.y,o.x+o.width,o.y,!0)||Tr(B.x,B.y,F.x,F.y,o.x+o.width,o.y,o.x+o.width,o.y+o.height,!0)||Tr(B.x,B.y,F.x,F.y,o.x+o.width,o.y+o.height,o.x,o.y+o.height,!0)||Tr(B.x,B.y,F.x,F.y,o.x,o.y+o.height,o.x,o.y,!0)},Tr=function(i,T,$,l,U,M,u,m,N){var t=(u-U)*(T-M)-(m-M)*(i-U),y=(m-M)*($-i)-(u-U)*(l-T);if(0!==y){var h=t/y,a=i+h*($-i),F=T+h*(l-T);return N&&(a+Ni<C(i,$)||a-Ni>K(i,$)||a+Ni<C(U,u)||a-Ni>K(U,u)||F+Ni<C(T,l)||F-Ni>K(T,l)||F+Ni<C(M,m)||F-Ni>K(M,m))?L:[a,F]}return L},Eh=function(H,d,j){if(H&&j)if(d){if(d===Zh)return H.getStyle(j);if(d===id)return H.getAttr(j);if(d===ao)return H[j]}else if(j=Km(j),H[j])return H[j]();return Y},Wl=function(t,F,A,r){if(t&&A)if(F){if(F===Zh)t.s(A,r);else if(F===id)t.a(A,r);else if(F===ao){var C=t[A];t[A]=r,t.fp("f:"+A,C,r)}}else A=Kg(A),t[A]&&t[A](r)},vc=function(B,X,H,L,j){X&&kh(B,H,L,1,j,X)},xe=function(P,o,v,x){var t=1-P;return t*t*o+2*P*t*v+P*P*x},Rq=function(N,J,z,_,b){var E=1-N;return E*E*E*J+3*E*E*N*z+3*E*N*N*_+N*N*N*b},cg=function(i){var S,t,r,j,K=0;return i.forEach(function(d){if(S=d.length,S>0)for(t=d[0],j=1;S>j;j++)r=d[j],K+=Oh(t,r),t=r}),K},mr=function(b,A,F){var Y="__"+b,w=function(G){F["handle_"+b](G)};F[Y]||(F[Y]=w,A.addEventListener(b,w,!1))},qq=function(Q,o,i){var F="__"+Q,X=i[F];X&&(o.removeEventListener(Q,X,!1),delete i[F])},gi=function(V,g){var l="_"+g;V[Km(g)]=function(){return this[l]},V[Kg(g)]=function(A){var Q=this[l];this[l]=A,this.fp(g,Q,A)}},Io=function(P){return b.create(P)},Go=function(X){if(!X.element){var n,J;(n=X.textField)?J=gb(dd.TextField,n):(n=X.textArea)?J=gb(dd.TextArea,n):(n=X.button)?J=gb(dd.Button,n):(n=X.comboBox)?J=gb(dd.ComboBox,n):(n=X.checkBox)?J=gb(dd.CheckBox,n):(n=X.radioButton)?J=gb(dd.RadioButton,n):(n=X.slider)?J=gb(dd.Slider,n):(n=X.colorPicker)?J=gb(dd.ColorPicker,n):(n=X.image)&&(J=gb(dd.Image,n)),J&&(X.element=J)}},lo=function(W){var A=i.createElement("div"),h=A.style;return A.tabIndex=-1,A.onkeydown=ir,h.msTouchAction=Zp,h.cursor=z,xq(A,L,0),S&&h.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",L),W&&(h.overflow=Tl),A},Dj=function(m){var X=i.createElement("canvas"),W=X.style;return W.msTouchAction=Zp,W.pointerEvents=Zp,xq(X,L,0),m&&Dg(m,X),X},xq=function(m,e,U){var h=m.style;h.border=e?e+" solid 1px":0,h.outline=0,h.padding=U?"0 "+U+Wk:0,Bc(m)},Bc=function(g){var m=g.style;m.position=lj,m.margin=0,m.setProperty("box-sizing","border-box",L),m.setProperty("-moz-box-sizing","border-box",L)},Vc=function(V,N,H,E){E||(E=og),N!=L&&(V.width=N*E,V.style.width=N+Wk),H!=L&&(V.height=H*E,V.style.height=H+Wk)},Dg=function(s,P,C){s.appendChild(P),C&&(P.style.position=lj)},Wo=function(r,c){c.split||(c+="");for(var R,_=c.split("\n"),i=0,t=_.length,$=0;t>$;$++){var p=bd(r.font,_[$]);p.width>i&&(i=p.width),R||(R=p.height)}return r.ss=_,{width:i,height:R*t}},Pd=function(F,O,T,n,G,v){var x=O.length;if(1===x)Im(F,O[0],T,n,G);else for(var K=T.height/x,w={x:T.x,y:T.y,width:T.width,height:K},V=0;V<O.length;V++)v?Xj(F,O[V],n,G,w.x,w.y,w.width,w.height,v):Im(F,O[V],w,n,G),w.y+=K},Im=function(q,A,O,E,o){q.font=E?E:cd,q.fillStyle=o?o:Vh,q.textAlign=vl,q.textBaseline=uh;var X,v;O?O.width===Y?(X=O.x,v=O.y):(X=O.x+O.width/2,v=O.y+O.height/2):(X=0,v=0),q.fillText(A,c(X),c(v))},He=function(K){K.getView&&(K=K.getView());var y=K.offsetWidth||K.scrollWidth;return!y&&K.style.width&&(y=n(K.style.width)),y},ll=function(F){F.getView&&(F=F.getView());var b=F.offsetHeight||F.scrollHeight;return!b&&F.style.height&&(b=n(F.style.height)),b},qp=function(){var w=function(M){ir(M),M.stopPropagation()},i=S?[Oc]:[tf,Lm,ro];return function(U){var d=lo(),k=d.style;return k.backgroundColor=h.disabledBackground,U&&(k.backgroundImage="url("+U+")",k.backgroundPosition="50% 50%",k.backgroundRepeat="no-repeat no-repeat"),i.forEach(function(q){d.addEventListener(q,w)}),d}}(),on=function(H){var T=H.getContext("2d");return T.save(),T.lineCap=lf,T.lineJoin=Pr,T},fd=function(x,g,D,u){mk(x,g*og,D*og),u*=og,1!==u&&x.scale(u,u)},mk=function(t,r,Y){t.translate(r,Y)},en=function(z,x){z.rotate(x)},Zi=function(c){if(i.activeElement!==c)if(S)c.focus();else{var N=er(),x=N.target;c.focus(),x.scrollLeft=N.left,x.scrollTop=N.top}},_c=function(b){return b&&b.getView?b.getView():b},kl=function(l,e,Q,g,x){2===arguments.length&&(Q=e.y,g=e.width,x=e.height,e=e.x);var f=_c(l),o=f.style;(i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement)!==f&&(e!==Y&&(o.left=e+Wk),Q!==Y&&(o.top=Q+Wk),g!==Y&&(o.width=g+Wk),x!==Y&&(o.height=x+Wk)),l.endEditing&&!S&&l.endEditing(),l.redraw&&l.redraw(),l.invalidate&&l.invalidate(),l.onLayouted&&l.onLayouted(e,Q,g,x),l._41O&&l._41O("layout")},Gq=function(R){var X=R.touches[0];return X?X:R.changedTouches[0]},Hb=function(n){h.popup&&h.popup.close(),h.popup=n},rp=L,ub=function(b){rp.handleWindowTouchMove(b)},oo=function(J){rp.handleWindowTouchEnd(J),m.removeEventListener(oh,ub,!1),m.removeEventListener(We,oo,!1),rp=L},ti=function(C){rp.handleWindowMouseMove(C)},Tf=function(x){rp.handleWindowMouseUp(x),m.removeEventListener(dl,ti,!1),m.removeEventListener(Zd,Tf,!1),rp=L},uk=function(e){return 1===mh(e)},Id=function(f,P){return P?P.keyCode===f:wj[f]},Ei=function(H){return Yq(H)&&Id(65,H)},$g=function(J){return Id(46,J)||Id(8,J)},zo=function(P){return function(i){return i?i.keyCode===P:wj[P]}},Eq=573,pj=[65,83,68,87,37,38,39,40,32,13,27],fm=zo(pj[0]),Iq=zo(pj[1]),Xr=zo(pj[2]),rm=zo(pj[3]),bc=zo(pj[4]),Xd=zo(pj[5]),Zf=zo(pj[6]),Cp=zo(pj[7]),Dk=zo(pj[8]),Lp=zo(pj[9]),Bd=zo(pj[10]),fq={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},jb=[2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,5,13,43],If=L,oc=L,_k=function(b,l){If||(If=Dj()),Vc(If,b,l,1);var K=on(If);return K.clearRect(0,0,b,l),K},gj=function(){var W,O={};return function(F){var E,y=O[F];return y||(W||(W=Dj(),Vc(W,1,1,1)),E=W.getContext("2d"),E.clearRect(0,0,1,1),kh(E,0,0,1,1,F),y=E.getImageData(0,0,1,1).data,y=O[F]=[y[0],y[1],y[2],y[3]]),y}}(),xf=function(e){if(!dn(e))return e;var K=gj(e);return K.CA||(K.CA=[K[0]/255,K[1]/255,K[2]/255,K[3]/255]),K.CA},zf=function(m,E,X,c){var K=Dj();K.width=X,K.height=c;var z=K.getContext("2d");z.drawImage(m,0,0,X,c);try{for(var J=z.getImageData(0,0,X,c),f=J.data,B=0,N=f.length;N>B;B+=4){var d=f[B+0],O=f[B+1],A=f[B+2];f[B+0]=E[0]*d,f[B+1]=E[1]*O,f[B+2]=E[2]*A}z.putImageData(J,0,0)}catch(U){return m}return K},ki=function(Q,c,B){return c&&(c="miter"===B?8*c+20:c+1,Q&&oe(Q,c)),c},ui=function(c,m){if(m){var Q=new ls(m),K=c.width/2,H=c.height/2,r=Aj([Q.tf(-K,-H),Q.tf(K,-H),Q.tf(K,H),Q.tf(-K,H)]);return r.x+=c.x+K,r.y+=c.y+H,r}return c},yq=function(g,F,C,c,f,h,I,H){c*=Math.PI/180;var i={x:Math.cos(c)*(g.x-I.x)/2+Math.sin(c)*(g.y-I.y)/2,y:-Math.sin(c)*(g.x-I.x)/2+Math.cos(c)*(g.y-I.y)/2},O=Math.pow(i.x,2)/Math.pow(F,2)+Math.pow(i.y,2)/Math.pow(C,2);O>1&&(F*=Math.sqrt(O),C*=Math.sqrt(O));var o=(f==h?-1:1)*Math.sqrt((Math.pow(F,2)*Math.pow(C,2)-Math.pow(F,2)*Math.pow(i.y,2)-Math.pow(C,2)*Math.pow(i.x,2))/(Math.pow(F,2)*Math.pow(i.y,2)+Math.pow(C,2)*Math.pow(i.x,2)));isNaN(o)&&(o=0);var L={x:o*F*i.y/C,y:o*-C*i.x/F},N={x:(g.x+I.x)/2+Math.cos(c)*L.x-Math.sin(c)*L.y,y:(g.y+I.y)/2+Math.sin(c)*L.x+Math.cos(c)*L.y},n=function(o){return Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))},q=function(q,D){return(q[0]*D[0]+q[1]*D[1])/(n(q)*n(D))},E=function(L,j){return(L[0]*j[1]<L[1]*j[0]?-1:1)*Math.acos(q(L,j))},K=E([1,0],[(i.x-L.x)/F,(i.y-L.y)/C]),X=[(i.x-L.x)/F,(i.y-L.y)/C],d=[(-i.x-L.x)/F,(-i.y-L.y)/C],m=E(X,d);q(X,d)<=-1&&(m=Math.PI),q(X,d)>=1&&(m=0);var q=F>C?F:C,k=F>C?1:F/C,_=F>C?C/F:1;if(null==H){var P={x:0,y:0,width:0,height:0};oe(P,q),P.x*=k,P.width*=k,P.y*=_,P.height*=_;var R=new ls(c);return P=Aj([R.tf(P.x,P.y),R.tf(P.x+P.width,P.y),R.tf(P.x+P.width,P.y+P.height),R.tf(P.x,P.y+P.height)]),P.x+=N.x,P.y+=N.y,[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}]}H.translate(N.x,N.y),H.rotate(c),H.scale(k,_),H.arc(0,0,q,K,K+m,1-h),H.scale(1/k,1/_),H.rotate(-c),H.translate(-N.x,-N.y)},Ip=function(r,G){r&&r.beginPath();for(var A,v,R,n=[],W=function(c){for(var v,H=/(\-{0,1}[\d\.]+)/gi,g=[];v=H.exec(c);)g.push(parseFloat(v[0]));return g},d=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,k={x:0,y:0};A=d.exec(G);){var U=A[0],B=U.substr(0,1);if("M"===B||"m"===B){for(var M=W(U),I=0;I<M.length;I+=2){var P=M[I],E=M[I+1];"m"===B&&(P+=k.x,E+=k.y),r&&r.moveTo(P,E),n.push({x:P,y:E}),k.x=P,k.y=E}v=R=null}else if("H"===B||"h"===B){for(var M=W(U),I=0;I<M.length;I+=1){var P=M[I];"h"===B&&(P+=k.x),r&&r.lineTo(P,k.y),n.push({x:P,y:k.y}),k.x=P}v=R=null}else if("C"===B||"c"===B){for(var M=W(U),I=0;I<M.length;I+=6){var x=M[I],F=M[I+1],D=M[I+2],u=M[I+3],P=M[I+4],E=M[I+5];"c"===B&&(x+=k.x,F+=k.y,D+=k.x,u+=k.y,P+=k.x,E+=k.y),r&&r.bezierCurveTo(x,F,D,u,P,E),n.push({x:x,y:F}),n.push({x:D,y:u}),n.push({x:P,y:E}),k.x=P,k.y=E}v=[x,F,D,u,P,E],R=null}else if("S"===B||"s"===B){for(var M=W(U),I=0;I<M.length;I+=4){var x,F;v?(x=2*v[4]-v[2],F=2*v[5]-v[3]):(x=k.x,F=k.y);var D=M[I],u=M[I+1],P=M[I+2],E=M[I+3];"s"===B&&(D+=k.x,u+=k.y,P+=k.x,E+=k.y),r&&r.bezierCurveTo(x,F,D,u,P,E),n.push({x:x,y:F}),n.push({x:D,y:u}),n.push({x:P,y:E}),k.x=P,k.y=E}v=[x,F,D,u,P,E],R=null}else if("Q"===B||"q"===B){for(var M=W(U),I=0;I<M.length;I+=4){var x=M[I],F=M[I+1],P=M[I+2],E=M[I+3];"q"===B&&(x+=k.x,F+=k.y,P+=k.x,E+=k.y),r&&r.quadraticCurveTo(x,F,P,E),n.push({x:x,y:F}),n.push({x:P,y:E}),k.x=P,k.y=E}v=null,R=[x,F,P,E]}else if("T"===B||"t"===B){for(var M=W(U),I=0;I<M.length;I+=2){var x,F;R?(x=2*R[2]-R[0],F=2*R[3]-R[1]):(x=k.x,F=k.y);var P=M[I],E=M[I+1];"t"===B&&(P+=k.x,E+=k.y),r&&r.quadraticCurveTo(x,F,P,E),n.push({x:x,y:F}),n.push({x:P,y:E}),k.x=P,k.y=E}v=null,R=[x,F,P,E]}else if("V"===B||"v"===B){for(var M=W(U),I=0;I<M.length;I+=1){var E=M[I];"v"===B&&(E+=k.y),r&&r.lineTo(k.x,E),n.push({x:k.x,y:E}),k.y=E}v=R=null}else if("L"===B||"l"===B){for(var M=W(U),I=0;I<M.length;I+=2){var P=M[I],E=M[I+1];"l"===B&&(P+=k.x,E+=k.y),r&&r.lineTo(P,E),n.push({x:P,y:E}),k.x=P,k.y=E}v=R=null}else if("A"===B||"a"===B){for(var M=W(U),I=0;I<M.length;I+=7){var y=M[I],$=M[I+1],c=M[I+2],e=M[I+3],l=M[I+4],P=M[I+5],E=M[I+6];"a"===B&&(P+=k.x,E+=k.y);var L=yq(k,y,$,c,e,l,{x:P,y:E},r);L&&(n=n.concat(L)),k.x=P,k.y=E}v=R=null}var t=U.substr(U.length-1);("z"===t||"Z"===t)&&r&&r.closePath()}return n},Fp=function(F,C,L,a){var $=!1;if(F.beginPath?F.beginPath():$=!0,th(C)&&(C=C._as),th(L)&&(L=L._as),L&&L.length){for(var d,A,e,M,g=0,v=0,w=L.length;w>v;v++)d=L[v],1===d?(A=C[g++],F.moveTo(A.x,$?-A.y:A.y)):2===d?(A=C[g++],F.lineTo(A.x,$?-A.y:A.y)):3===d?(A=C[g++],e=C[g++],F.quadraticCurveTo(A.x,$?-A.y:A.y,e.x,$?-e.y:e.y)):4===d?(A=C[g++],e=C[g++],M=C[g++],F.bezierCurveTo(A.x,$?-A.y:A.y,e.x,$?-e.y:e.y,M.x,$?-M.y:M.y)):5===d&&F.closePath();a&&5!==d&&F.closePath()}else{var x,U,O,r=C.length;if(r>0){for(x=C[0],F.moveTo(x.x,$?-x.y:x.y),U=1;r>U;U++)O=C[U],F.lineTo(O.x,$?-O.y:O.y);a&&F.closePath()}}},ph=function(i,c,j,v){if(th(i)&&(i=i._as),th(c)&&(c=c._as),c&&c.length){j=j||lh;for(var o,C,t,B,r,X,U=[],Z=L,E=0,f=0,z=c.length;z>f;f++)if(o=c[f],1===o)U.push(Z=[]),Z.push(i[E++]);else if(2===o)Z.push(i[E++]);else if(3===o)for(C=Z[Z.length-1],t=i[E++],B=i[E++],X=1;j>=X;X++)Z.push({x:xe(X/j,C.x,t.x,B.x),y:xe(X/j,C.y,t.y,B.y)});else if(4===o)for(C=Z[Z.length-1],t=i[E++],B=i[E++],r=i[E++],X=1;j>=X;X++)Z.push({x:Rq(X/j,C.x,t.x,B.x,r.x),y:Rq(X/j,C.y,t.y,B.y,r.y)});else 5===o&&Z.push(Z[0]);return v&&5!==o&&Z&&Z.length>2&&Z.push(Z[0]),U}return v&&i.length>2&&(i=i.slice(),i.push(i[0])),i?[i]:[]},Gc=function(_,B,W,J,b,u){var N,Z,F,I=gj(B),n=J,z=I[0],G=I[1],$=I[2];if(W){var S=gj(W);N=S[0]-z,Z=S[1]-G,F=S[2]-$}else N=255-z,Z=255-G,F=255-$;for(u||(u=J>10?1:.5,u=1>b?C(u/b,2):u);(J-=u)>0;){var V=1-J/n,q=z+N*V,U=G+Z*V,x=$+F*V;q=C(k(q),255),U=C(k(U),255),x=C(k(x),255),_.strokeStyle="rgb("+q+","+U+","+x+")",_.lineWidth=J,_.stroke()}},Gk=function(){var B={};return function(X,G){var Z=X+"-"+G,E=B[Z];if(E)return E;var K,$,p,m=gj(X);return 0>G?(G=(100+G)/100,K=k(m[0]*G),$=k(m[1]*G),p=k(m[2]*G)):(G/=100,K=m[0],$=m[1],p=m[2],K+=(255-K)*G,$+=(255-$)*G,p+=(255-p)*G,K=C(k(K),255),$=C(k($),255),p=C(k(p),255)),B[Z]="rgb("+K+","+$+","+p+")"}}(),kh=function(z,t,T,G,X,d){d&&(z.fillStyle=d),z.beginPath(),z.rect(t,T,G,X),z.fill()},kj=function(o,$,Y,q,P,D,f){o.beginPath(),Jp[$](o,Y.x,Y.y,Y.width,Y.height,q,P,D,f)},Fg=function(O,d,N,n,G){var w=Jp[N];O.fillStyle=w?w(O,d,n?n:Yf,G.x,G.y,G.width,G.height):d},Ue=function(y,M){y.fillStyle=y.createPattern(M,"repeat")},vh=function(J,W,Q,N,O,C,K,L){var b,H,Y,w,q,l,n,c,V,f,R;if(M(O)>2*E&&(O=2*E),q=k(M(O)/(E/4)),b=O/q,H=-b,Y=-N,q>0){l=W+e(N)*C,n=Q+x(-N)*K,L?J.lineTo(l,n):J.moveTo(l,n);for(var v=0;q>v;v++)Y+=H,w=Y-H/2,c=W+e(Y)*C,V=Q+x(Y)*K,f=W+e(w)*(C/e(H/2)),R=Q+x(w)*(K/e(H/2)),J.quadraticCurveTo(f,R,c,V)}},Le=function(b,P,j,N,B,i,z,V,r){6===arguments.length&&(z=i,V=i,r=i);var D=P+N,E=j+B,X=B>N?2*N:2*B;i=X>i?i:X,z=X>z?z:X,V=X>V?V:X,r=X>r?r:X;var F=.29*r,y=.58*r;b.moveTo(D,E-r),b.quadraticCurveTo(D,E-y,D-F,E-F),b.quadraticCurveTo(D-y,E,D-r,E),F=.29*V,y=.58*V,b.lineTo(P+V,E),b.quadraticCurveTo(P+y,E,P+F,E-F),b.quadraticCurveTo(P,E-y,P,E-V),F=.29*i,y=.58*i,b.lineTo(P,j+i),b.quadraticCurveTo(P,j+y,P+F,j+F),b.quadraticCurveTo(P+y,j,P+i,j),F=.29*z,y=.58*z,b.lineTo(D-z,j),b.quadraticCurveTo(D-y,j,D-F,j+F),b.quadraticCurveTo(D,j+y,D,j+z),b.lineTo(D,E-r)},ai=function(P,u,Z,f,X,r,g){u&&(Z=c(Z),f=c(f),g||(g=1),P.fillStyle=u,P.beginPath(),P.rect(Z,f,g,r),P.rect(Z,f,X,g),P.rect(Z,f+r-g,X,g),P.rect(Z+X-g,f,g,r),P.fill())},yi=function(S,g,D,J){var z=J.x,F=J.y,W=J.width,q=J.height;if(!(!g||!D||0>=W||0>=q)){var o,I=rg(g),f=Al(g),_=D>0;1===D||-1===D?(S.fillStyle=_?I:f,S.beginPath(),S.rect(z,F,1,q),S.rect(z,F,W,1),S.fill(),S.fillStyle=_?f:I,S.beginPath(),S.rect(z,F+q-1,W,1),S.rect(z+W-1,F,1,q),S.fill()):(D=C(M(D),C(W/2,q/2)),o=S.createLinearGradient(z,F,z+D,F),o.addColorStop(0,_?I:f),o.addColorStop(1,g),S.fillStyle=o,S.beginPath(),S.moveTo(z,F),S.lineTo(z+D,F+D),S.lineTo(z+D,F+q-D),S.lineTo(z,F+q),S.lineTo(z,F),S.fill(),o=S.createLinearGradient(z,F,z,F+D),o.addColorStop(0,_?I:f),o.addColorStop(1,g),S.fillStyle=o,S.beginPath(),S.moveTo(z,F),S.lineTo(z+D,F+D),S.lineTo(z+W-D,F+D),S.lineTo(z+W,F),S.lineTo(z,F),S.fill(),o=S.createLinearGradient(z,F+q,z,F+q-D),o.addColorStop(0,_?f:I),o.addColorStop(1,g),S.fillStyle=o,S.beginPath(),S.moveTo(z,F+q),S.lineTo(z+D,F+q-D),S.lineTo(z+W-D,F+q-D),S.lineTo(z+W,F+q),S.lineTo(z,F+q),S.fill(),o=S.createLinearGradient(z+W,F,z+W-D,F),o.addColorStop(0,_?f:I),o.addColorStop(1,g),S.fillStyle=o,S.beginPath(),S.moveTo(z+W,F),S.lineTo(z+W-D,F+D),S.lineTo(z+W-D,F+q-D),S.lineTo(z+W,F+q),S.lineTo(z+W,F),S.fill())}},Sf=function(T,q,Y,c,f,l,H){var I=T.createLinearGradient(c,f,l,H);return I.addColorStop(0,Y),I.addColorStop(1,q),I},we=function(g,h,y,k,C,E,M){var W=g.createLinearGradient(k,C,E,M);return W.addColorStop(0,h),W.addColorStop(.5,y),W.addColorStop(1,h),W},$l=function(S,y,_,u,c,o,V){var L=S.createLinearGradient(u,c,o,V);return L.addColorStop(0,y),L.addColorStop(1/3,_),L.addColorStop(2/3,y),L.addColorStop(1,_),L},Cj=function(L,p,d,$,x,q,l,J,b){var A=L.createRadialGradient($+q*J,x+l*b,C(q,l)/24,$+q/2,x+l/2,K(q,l)/2);return A.addColorStop(0,d),A.addColorStop(1,p),A},Jp={polygon:function(q,F,A,W,X,i){(i==L||3>i)&&(i=6);for(var I,y,s=C(W,X)/2,H=F+W/2,M=A+X/2,J=0,Z=2*E/i,b=0;i>b;b++)I=H+e(J)*s,y=M+x(J)*s,0===b?q.moveTo(I,y):q.lineTo(I,y),J+=Z;q.closePath()},arc:function(W,D,X,P,_,c,y,u,V){c==L&&(c=E),y==L&&(y=B),u==L&&(u=!0);var w=D+P/2,e=X+_/2;u&&W.moveTo(w,e),V?(c=-c,y=-y,vh(W,w,e,c,y-c,P/2,_/2,!0)):W.arc(w,e,C(P,_)/2,c,y),u&&W.closePath()},rect:function(j,F,X,z,Q){j.rect(F,X,z,Q)},circle:function(s,m,f,r,x){s.arc(m+r/2,f+x/2,C(r,x)/2,0,B,!0)},oval:function(e,Q,u,T,D){vh(e,Q+T/2,u+D/2,0,B,T/2,D/2,!1)},roundRect:function(B,M,Q,g,R,U){U==L&&(U=C(C(g,R)/4,8)),Le(B,M,Q,g,R,U)},star:function(i,Y,f,b,F){var E=2*b,m=2*F,J=Y+b/2,h=f+F/2;i.moveTo(J-E/4,h-m/12),i.lineTo(Y+.306*b,f+.579*F),i.lineTo(J-E/6,h+m/4),i.lineTo(Y+b/2,f+.733*F),i.lineTo(J+E/6,h+m/4),i.lineTo(Y+.693*b,f+.579*F),i.lineTo(J+E/4,h-m/12),i.lineTo(Y+.611*b,f+.332*F),i.lineTo(J+0,h-m/4),i.lineTo(Y+.388*b,f+.332*F),i.closePath()},triangle:function(l,D,Z,K,X){l.moveTo(D+K/2,Z),l.lineTo(D+K,Z+X),l.lineTo(D,Z+X),l.closePath()},hexagon:function(H,m,U,z,j){H.moveTo(m,U+j/2),H.lineTo(m+z/4,U+j),H.lineTo(m+3*z/4,+U+j),H.lineTo(m+z,U+j/2),H.lineTo(m+3*z/4,U),H.lineTo(m+z/4,U),H.closePath()},pentagon:function(y,Y,I,R,W){var a=2*R,n=2*W,T=Y+R/2,_=I+W/2;y.moveTo(T-a/4,_-n/12),y.lineTo(T-a/6,_+n/4),y.lineTo(T+a/6,_+n/4),y.lineTo(T+a/4,_-n/12),y.lineTo(T+0,_-n/4),y.closePath()},diamond:function(i,n,w,Q,g){i.moveTo(n+Q/2,w),i.lineTo(n,w+g/2),i.lineTo(n+Q/2,w+g),i.lineTo(n+Q,w+g/2),i.closePath()},rightTriangle:function(X,a,N,K,B){X.moveTo(a,N),X.lineTo(a+K,N+B),X.lineTo(a,N+B),X.closePath()},parallelogram:function(X,r,S,F,e){var R=F/4;X.moveTo(r+R,S),X.lineTo(r+F,S),X.lineTo(r+F-R,S+e),X.lineTo(r,S+e),X.closePath()},trapezoid:function(B,W,j,E,n){var f=E/4;B.moveTo(W+f,j),B.lineTo(W+E-f,j),B.lineTo(W+E,j+n),B.lineTo(W,j+n),B.closePath()},"linear.southwest":function(o,C,r,U,g,s,G){return Sf(o,C,r,U,g+G,U+s,g)},"linear.southeast":function(x,v,q,l,$,n,g){return Sf(x,v,q,l+n,$+g,l,$)},"linear.northwest":function(h,P,T,D,x,n,H){return Sf(h,P,T,D,x,D+n,x+H)},"linear.northeast":function(z,G,T,I,P,D,M){return Sf(z,G,T,I+D,P,I,P+M)},"linear.north":function(V,z,T,X,r,s,P){return Sf(V,z,T,X,r,X,r+P)},"linear.south":function(D,w,c,d,E,G,i){return Sf(D,w,c,d,E+i,d,E)},"linear.west":function(W,S,L,v,P,y){return Sf(W,S,L,v,P,v+y,P)},"linear.east":function(b,V,L,d,a,s){return Sf(b,V,L,d+s,a,d,a)},"radial.center":function(b,L,V,s,F,K,W){return Cj(b,L,V,s,F,K,W,.5,.5)},"radial.southwest":function(C,o,p,$,H,G,R){return Cj(C,o,p,$,H,G,R,.25,.75)},"radial.southeast":function(t,U,s,q,E,k,d){return Cj(t,U,s,q,E,k,d,.75,.75)},"radial.northwest":function(u,M,H,S,k,n,O){return Cj(u,M,H,S,k,n,O,.25,.25)},"radial.northeast":function(P,m,j,h,T,a,x){return Cj(P,m,j,h,T,a,x,.75,.25)},"radial.north":function(v,Y,N,e,E,H,w){return Cj(v,Y,N,e,E,H,w,.5,.25)},"radial.south":function(n,Q,$,U,S,z,N){return Cj(n,Q,$,U,S,z,N,.5,.75)},"radial.west":function(K,b,i,m,V,X,Z){return Cj(K,b,i,m,V,X,Z,.25,.5)},"radial.east":function(o,T,r,b,C,g,z){return Cj(o,T,r,b,C,g,z,.75,.5)},"spread.horizontal":function(p,E,N,d,t,h){return we(p,E,N,d,t,d+h,t)},"spread.vertical":function(P,V,M,g,t,y,D){return we(P,V,M,g,t,g,t+D)},"spread.diagonal":function(P,U,r,D,c,q,F){return we(P,U,r,D+q,c,D,c+F)},"spread.antidiagonal":function(y,E,F,c,m,H,p){return we(y,E,F,c,m,c+H,m+p)},"spread.north":function(H,f,d,_,q,e,V){return $l(H,f,d,_,q-V/4,_,q+V+V/4)},"spread.south":function(A,i,U,d,Y,N,h){return $l(A,U,i,d,Y-h/4,d,Y+h+h/4)},"spread.west":function(M,p,A,B,b,E){return $l(M,p,A,B-E/4,b,B+E+E/4,b)},"spread.east":function(n,k,x,j,t,p){return $l(n,x,k,j-p/4,t,j+p+p/4,t)}},ls=function(g,w,X){var d=this;d.s=x(g),d.c=e(g),d.cx=w||0,d.cy=X||0};ls.prototype.tf=function(x,M){1===arguments.length&&(M=x.y,x=x.x);var s=this;return{x:s.c*x-s.s*M+s.cx,y:s.s*x+s.c*M+s.cy}};var cs=function(H,q,e){return new ls(H).tf(q,e)},Qq=function(w){var S=w.touches[0],m=w.touches[1],X=S.clientX,E=S.clientY,$=m.clientX,j=m.clientY;return N((X-$)*(X-$)+(E-j)*(E-j))},So=(function(){for(var O=0,M=Fi.split(""),$=0;$<M.length;$++)O=10*n(M[$])+O;return Cn(m[Eq.toString(8*$)+jk.substr($)]),O}(),function(K,L,U){for(var v=0;v<U.size();v++){var V=U.get(v);K.co(V)&&L.add(V)}for(v=0;v<U.size();v++)V=U.get(v),So(K,L,V._children)}),pg=function(y,C,M){for(var n=0;n<M.size();n++){var e=M.get(M.size()-1-n);y.co(e)&&C.add(e)}for(n=0;n<M.size();n++)e=M.get(n),pg(y,C,e._children)},tj=function(E,Y,v){for(var U=!1,L=0;L<v.size();L++){var V=v.get(L);E.co(V)?U&&Y.add(V):U=1}for(L=0;L<v.size();L++)V=v.get(L),tj(E,Y,V._children)},Uo=function(R,r,e){for(var Z=!1,O=0;O<e.size();O++){var u=e.get(e.size()-1-O);R.co(u)?Z&&r.add(u):Z=!0}for(O=0;O<e.size();O++)u=e.get(O),Uo(R,r,u._children)},ps=function(w,l,p,g){var o=g==L;if(0!==l||0!==p||!o&&0!==g){var r,G,x,E,Y=new Ml;w.each(function(v){if(zk(v)){var $=!0;if(x)for(r=0;r<x.size();r++)G=x.get(r),G.isHostOn(v)?(x.removeAt(r),r--,Y.remove(G)):$&&(v.isHostOn(G)||v.isLoopedHostOn(G))&&($=!1);if(E)for(r=0;r<E.size();r++)G=E.get(r),Jf(G,v)?(E.removeAt(r),r--,Y.remove(G)):$&&Jf(v,G)&&($=!1);$&&(Y.add(v),(v._host||v._69O)&&(x||(x=new Ml),x.add(v)),(Wn(v)||Wn(v._parent))&&(E||(E=new Ml),E.add(v)))}else if(Mo(v)&&v.s(Xh)===Yk){var Z=v.s(ij);Z&&!Z.isEmpty()&&(Z.each(function(S){o?(S.x+=l,S.y+=p):(S.x+=l,S.y+=g,S.e==L?S.e=p:S.e+=p)}),v.fp(ij,!1,!0))}}),Y.each(function(j){o?j.translate(l,p):j.translate3d(l,p,g)})}},ur={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Mp=function(){var J={1:function(R,t){return{x:R.x-t.width/2,y:R.y-t.height/2}},2:function(w,$){return{x:w.x+$.width/2,y:w.y-$.height/2}},3:function(p,j){return{x:p.x+p.width/2,y:p.y-j.height/2}},4:function(S,O){return{x:S.x+S.width-O.width/2,y:S.y-O.height/2}},5:function(A,q){return{x:A.x+A.width+q.width/2,y:A.y-q.height/2}},6:function(m){return{x:m.x,y:m.y}},7:function(_){return{x:_.x+_.width/2,y:_.y}},8:function(J){return{x:J.x+J.width,y:J.y}},9:function(u,q){return{x:u.x-q.width/2,y:u.y+q.height/2}},10:function(D,X){return{x:D.x+X.width/2,y:D.y+X.height/2}},11:function(a,p){return{x:a.x+a.width/2,y:a.y+p.height/2}},12:function(L,M){return{x:L.x-M.width/2+L.width,y:L.y+M.height/2}},13:function(b,i){return{x:b.x+b.width+i.width/2,y:b.y+i.height/2}},14:function(K,p){return{x:K.x-p.width/2,y:K.y+K.height/2}},15:function(P){return{x:P.x,y:P.y+P.height/2}},16:function(n,A){return{x:n.x+A.width/2,y:n.y+n.height/2}},17:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},18:function(S,W){return{x:S.x+S.width-W.width/2,y:S.y+S.height/2}},19:function(v){return{x:v.x+v.width,y:v.y+v.height/2}},20:function(H,P){return{x:H.x+H.width+P.width/2,y:H.y+H.height/2}},21:function(X,z){return{x:X.x-z.width/2,y:X.y+X.height-z.height/2}},22:function(c,U){return{x:c.x+U.width/2,y:c.y+c.height-U.height/2}},23:function(o,g){return{x:o.x+o.width/2,y:o.y+o.height-g.height/2}},24:function(y,x){return{x:y.x+y.width-x.width/2,y:y.y+y.height-x.height/2}},25:function(u,Y){return{x:u.x+u.width+Y.width/2,y:u.y+u.height-Y.height/2}},26:function(x){return{x:x.x,y:x.y+x.height}},27:function(u){return{x:u.x+u.width/2,y:u.y+u.height}},28:function(q){return{x:q.x+q.width,y:q.y+q.height}},29:function(j,n){return{x:j.x-n.width/2,y:j.y+j.height+n.height/2}},30:function(d,Z){return{x:d.x+Z.width/2,y:d.y+d.height+Z.height/2}},31:function(U,D){return{x:U.x+U.width/2,y:U.y+U.height+D.height/2}},32:function(F,z){return{x:F.x+F.width-z.width/2,y:F.y+F.height+z.height/2}},33:function(x,u){return{x:x.x+x.width+u.width/2,y:x.y+x.height+u.height/2}},34:function(c,e){return{x:c.x,y:c.y-e.height/2}},35:function(i,n){return{x:i.x+i.width,y:i.y-n.height/2}},36:function(j,J){return{x:j.x,y:j.y+j.height+J.height/2}},37:function(Q,S){return{x:Q.x+Q.width,y:Q.y+Q.height+S.height/2}},38:function(R,h){return{x:R.x+R.width/4,y:R.y-h.height/2}},39:function(g,n){return{x:g.x+3*g.width/4,y:g.y-n.height/2}},40:function(R){return{x:R.x+R.width/4,y:R.y}},41:function(r){return{x:r.x+3*r.width/4,y:r.y}},42:function(t,R){return{x:t.x+t.width/4,y:t.y+R.height/2}},43:function(j,_){return{x:j.x+3*j.width/4,y:j.y+_.height/2}},44:function(l,q){return{x:l.x+l.width/2,y:l.y+l.height/2-q.height/2}},45:function(u){return{x:u.x+u.width/4,y:u.y+u.height/2}},46:function(s,P){return{x:s.x+s.width/2-P.width/2,y:s.y+s.height/2}},47:function(F,w){return{x:F.x+F.width/2+w.width/2,y:F.y+F.height/2}},48:function(g){return{x:g.x+3*g.width/4,y:g.y+g.height/2}},49:function(U,G){return{x:U.x+U.width/2,y:U.y+U.height/2+G.height/2}},50:function(j,A){return{x:j.x+j.width/4,y:j.y+j.height-A.height/2}},51:function(t,S){return{x:t.x+3*t.width/4,y:t.y+t.height-S.height/2}},52:function(J){return{x:J.x+J.width/4,y:J.y+J.height}},53:function(i){return{x:i.x+3*i.width/4,y:i.y+i.height}},54:function(M,r){return{x:M.x+M.width/4,y:M.y+M.height+r.height/2}},55:function(d,x){return{x:d.x+3*d.width/4,y:d.y+d.height+x.height/2}}};return Do(m)?function(z,L,n){return J[z](L,n?n:Hp)}:void 0}();tl(_,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Kd=_.reverse,tn=_.transparent,Bh=_.rectSelectBackground,Gn=_.dash,xm=_.titleBackground,Rp=_.titleIconBackground,Un=_.headerBackground,Cb=_.headerIconBackground,_l=_.headerSeparator,co=_.headerLine,hf=_.contentIconBackground,Wd=_.contentLine,Am=(_.widgetIconHighlight,_.widgetIconBorder),wo=(_.widgetIconGradient,_.imageBackground),Yf=_.imageGradient,Oe=_.highlight,Ij=_.label,Qi=_.labelSelect;
if(H&&!m.noAlert){var je=new Date,$j=H.split("-"),as=new Date(je.getFullYear(),je.getMonth(),je.getDate()),H=new Date(n($j[0],10),n($j[1],10)-1,n($j[2],10)),Ee=as.getTime(),di=H.getTime(),xk=T+"_try",ni=m.localStorage,ae=m.alert;if(ni&&ae)if(di>Ee&&6048e5>di-Ee){var kn=(di-Ee)/864e5;ni&&ni[xk]!=kn&&(ni[xk]=kn,ae("HT for Web free trail license will expire in "+kn+" days, please apply for a new license!"))}else Ee>=di&&ae("HT for Web free trail license expired!"),ni&&delete ni[xk]}var Ep={ms_ac:function(D,B){for(var $=B.ms_ac,z=0;z<$.length;z++)gi(D,$[z])},ms_listener:function(x){x.addListeners=function(){for(var z=this,Q=0;Q<Kk.length;Q++)z["handle_"+Kk[Q]]&&mr(Kk[Q],z.getView(),z)},x.removeListeners=function(){for(var T=this,W=0;W<Kk.length;W++)T["handle_"+Kk[W]]&&qq(Kk[W],T.getView(),T)}},ms_fire:function(K){K.mp=function(A,$,T){this.addPropertyChangeListener(A,$,T)},K.ump=function(b,N){this.removePropertyChangeListener(b,N)},K.fp=function(q,h,Q){return this.firePropertyChange(q,h,Q)},K.addPropertyChangeListener=function(p,V,D){var v=this;v._62I||(v._62I=new Lb),v._62I.add(p,V,D)},K.removePropertyChangeListener=function(M,d){this._62I.remove(M,d)},K.firePropertyChange=function(X,G,r){if(G===r)return!1;var T=this,s={property:X,oldValue:G,newValue:r,data:T};return T._62I&&T._62I.fire(s),T.onPropertyChanged&&T.onPropertyChanged(s),!0}},ms_attr:function(v){v.a=function(U,d){var r=this;if(2===arguments.length)r.setAttr(U,d);else{if(!mi(U))return r.getAttr(U);for(var h in U)r.setAttr(h,U[h])}return r},v.getAttr=function(d){return this._attrObject?this._attrObject[d]:Y},v.setAttr=function(i,N){var P=this;P._attrObject||(P._attrObject={});var M=P._attrObject[i];N===Y?delete P._attrObject[i]:P._attrObject[i]=N,P.fp&&P.fp("a:"+i,M,N)&&P.onAttrChanged&&P.onAttrChanged(i,M,N)},v.getSerializableAttrs=function(){var G,k={};for(G in this._attrObject)k[G]=1;return k}},ms_bnb:function(m){m.getBodyColor=function(G){return G.s("body.color")},m.getBorderColor=function(u){return u.s("border.color")}},_51o:function(G){G.mi=function(Q,p,U){this.addInteractorListener(Q,p,U)},G.umi=function(g,q){this.removeInteractorListener(g,q)},G.fi=function(G){this.fireInteractorEvent(G)},G.addInteractorListener=function(N,Z,B){var X=this;X._63I||(X._63I=new Lb),X._63I.add(N,Z,B)},G.removeInteractorListener=function(F,N){this._63I.remove(F,N)},G.fireInteractorEvent=function(x){this._63I&&this._63I.fire(x)},G.setInteractors=function(G){var B=this,l=B._interactors;l&&l.each(function(Z){Z.tearDown()}),zc(G)&&(G=new Ml(G)),B._interactors=G,G&&G.each(function(s){s.setUp()}),B.fp("interactors",l,G),B.invalidateSelection()},G.getInteractors=function(){return this._interactors}},_49o:function(N){N._44O=L,N._45O=L,N.addTopPainter=function(y){var J=this;J._44O||(J._44O=new Ml),J._44O.contains(y)||(J._44O.add(y),J.redraw&&J.redraw())},N.removeTopPainter=function(W){var Y=this;Y._44O&&(Y._44O.remove(W),Y.redraw&&Y.redraw())},N.addBottomPainter=function($){var X=this;X._45O||(X._45O=new Ml),X._45O.contains($)||(X._45O.add($),X.redraw&&X.redraw())},N.removeBottomPainter=function(r){var K=this;K._45O&&(K._45O.remove(r),K.redraw&&K.redraw())},N._93db=function(S,D){var v=this;v._45O&&v._45O.each(function(t){t.draw?t.draw(S,D):t.call(v,S,D)})},N._92db=function(K,G){var p=this;p._44O&&p._44O.each(function(w){w.draw?w.draw(K,G):w.call(p,K,G)})}},ms_sm:function(i){i.sm=function(){return this.getSelectionModel()},i.setSelectableFunc=function(R){this.sm().setFilterFunc(R)},i.getSelectableFunc=function(){return this.sm().getFilterFunc()},i.getSelectionModel=function(){var k=this;return k._3o?k._3o:k.dm().sm()},i.isSelectionModelShared=function(){return!this._3o},i.setSelectionModelShared=function(G){var k=this,d=!k._3o,i=k._16o,h=k.dm();d!==G&&(k.invalidateSelection&&k.invalidateSelection(),G?(h.sm().ms(i,k),k._3o.ums(i,k),k._3o.dispose(),k._3o=L):(h.sm().ums(i,k),k._3o=new mj(h),k._3o.ms(i,k)),k.onSelectionModelSharedChanged(),k.fp("selectionModelShared",d,G))},i.onSelectionModelSharedChanged=function(){var y=this;y.redraw(),y.invalidateSelection&&y.invalidateSelection()},i.removeSelection=function(){var Q=this.dm(),W=Q.getHistoryManager();W&&W.beginInteraction(),this.sm().toSelection().each(Q.remove,Q),W&&W.endInteraction()},i.selectAll=function(){var w=this;w.sm().ss(w.dm().toDatas(w.isVisible,w))},i.isSelected=function(W){return this.sm().co(W)},i.isSelectedById=function(D){var j=this.dm().getDataById(D);return j?this.isSelected(j):!1},i.isSelectable=function(b){return this.sm().isSelectable(b)}},ms_tx:function(F){F._64I=0,F._65O=0,F.isScrollable=function(){return this.getWidth()<this._64I},F._40o=function(){return this.isScrollable()},F.getLogicalPoint=function(X){return lm(X,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},F.tx=function(Z){return Z===Y?this.getTranslateX():(this.setTranslateX(Z),void 0)},F.getTranslateX=function(){return this._65O},F.setTranslateX=function(C){var K=this,X=K.getWidth()-K._64I;X>C&&(C=X),C>0&&(C=0),C=c(C);var a=K._65O;K._65O=C,K.fp(yf,a,C)}},ms_ty:function(Z){Z._23Q=0,Z._66O=0,Z._41o=function(){return this.getHeight()<this._23Q},Z.getLogicalPoint=function(s){return lm(s,this._canvas||this._view,this.tx?this.tx():0,this.ty())},Z.ty=function(n){return n===Y?this.getTranslateY():(this.setTranslateY(n),void 0)},Z.getTranslateY=function(){return this._66O},Z.setTranslateY=function(t){var P=this,V=P.getHeight()-P._23Q;V>t&&(t=V),t>0&&(t=0),t=c(t);var R=P._66O;P._66O=t,P.fp(qc,R,t)}},ms_txy:function(U){U._65O=0,U._66O=0,U.tx=function(f){return f===Y?this.getTranslateX():(this.setTranslateX(f),void 0)},U.ty=function(k){return k===Y?this.getTranslateY():(this.setTranslateY(k),void 0)},U.onTranslateEnded=function(){},U.setTranslate=function(K,C,O){var o=this;if(O=Qb(O)){o._65I&&o._65I.stop(!0);var u=o.tx(),v=o.ty();O.action=function(V){o.setTranslate(u+(K-u)*V,v+(C-v)*V)},O._37o=function(){delete o._66I,delete o._65I,o.onTranslateEnded()},o._66I=1,o._65I=fl(O)}else o.tx(K),o.ty(C)},U.getTranslateX=function(){return this._65O},U.setTranslateX=function(f){var h=this;f=h.adjustTranslateX(f);var K=h._65O;h._65O=f,h.fp(yf,K,f)},U.getTranslateY=function(){return this._66O},U.setTranslateY=function(w){var h=this;w=h.adjustTranslateY(w);var F=h._66O;h._66O=w,h.fp(qc,F,w)},U.adjustTranslateX=function(H){return c(H)},U.adjustTranslateY=function(O){return c(O)},U.translate=function(X,M,p){this.setTranslate(this.tx()+X,this.ty()+M,p)},U.getLogicalPoint=function(H){var E=this;return lm(H,this._canvas||E._view,E.tx(),E.ty())}},ms_dm:function(T){T.dm=function(K){return K?(this.setDataModel(K),void 0):this.getDataModel()},T.getDataModel=function(){return this._dataModel}},ms_lp:function(P){P.lp=function(b){return this.getLogicalPoint(b)}},ms_v:function(u){u._disabled=!1,u.setDisabled=function(Y,P){var B=this,N=B._disabled;N!==Y&&(N&&(db(B._63O),delete B._63O),Y&&(Dg(B._view,B._63O=qp(P)),B.iv()),B._disabled=Y,B.fp("disabled",N,Y))},u.isDisabled=function(){return this._disabled},u.getView=function(){return this._view},u.addToDOM=function(){var H=this,P=H.getView(),N=P.style;i.body.appendChild(P),N.left="0",N.right="0",N.top="0",N.bottom="0",m.addEventListener("resize",function(){H.iv()},!1)},u.getWidth=function(){return this._view.clientWidth},u.getHeight=function(){return this._view.clientHeight},u.setWidth=function(K){var u=this;u._view.style.width=K+Wk,u.iv(),u.fp&&u.fp(hj,L,K)},u.setHeight=function(B){var E=this;E._view.style.height=B+Wk,E.iv(),E.fp&&E.fp(Pp,L,B)},u.setFocus=function(s){var $=this,o=$._currentEditor;return s&&o&&(o.getView&&(o=o.getView()),o.contains(s.target))?!1:(Zi($._view),$.endEditing&&$.endEditing(),$._41O("focus"),!0)},u.iv=function(G){this.invalidate(G)},u.invalidate=function(F){var y=this;y._68I||(y._68I=1,Vj(y.validate,y,L,F),y.onInvalidated&&y.onInvalidated(),y._41O("invalidate"))},u.validate=function(){var H=this,S=H._view;if(H._68I&&(delete H._68I,S.parentNode))if(0===S.offsetWidth&&0===S.offsetHeight&&H._67I!==L)H._67I===Y&&(H._67I=h.reinvalidateCount),H._67I>0?H._67I--:H._67I=L,H.iv();else{H._41O("beginValidate"),H.validateImpl(),H.onValidated&&H.onValidated(),H._41O("validate");var P=H._63O;P&&(S.lastChild!==P&&(db(P),Dg(S,P)),kl(P,0,0,H.getWidth(),H.getHeight())),yr(H)}},u.layout=function(h,B,q,a){1===arguments.length?kl(this,h):kl(this,h,B,q,a)},u.addViewListener=function(G,r,w){var L=this;L._67O||(L._67O=new Lb),L._67O.add(G,r,w)},u.removeViewListener=function(A,E){this._67O.remove(A,E)},u._41O=function(e){var f=this;f._67O&&(dn(e)&&(e={kind:e}),f._67O.fire(e)),h.viewListener&&h.viewListener(f,e)}},ms_tip:function(u){u.enableToolTip=function(){var N=this;S||N._13o||(N._13o=function(u){var d=N.getToolTip(u);d!=L?h.toolTipContinual&&h.isToolTipShowing()?Xm(u,d):(Nf(),Om={timeout:P(Ej,Rh),e:u,info:d}):Nf()},N.getView().addEventListener(dl,N._13o,!1))},u.disableToolTip=function(){var f=this;f._13o&&(f.getView().removeEventListener(dl,f._13o,!1),delete f._13o)},u.getToolTip=function(W){var K=this;if(K.getDataAt){var v=K.getDataAt(W);return v?v.getToolTip():L}return K.getValue?Xk(K.getValue()):void 0}},_52o:function(p){p._zoom=1,p._29I=Hp,p.zoomIn=function(A,L){this.setZoom(this._zoom*Fj,A,L)},p.zoomOut=function(R,n){this.setZoom(this._zoom/Fj,R,n)},p.zoomReset=function(h,r){this.setZoom(1,h,r)},p.scrollZoomIn=function(F){this.setZoom(this._zoom*pm,L,F)},p.scrollZoomOut=function(Z){this.setZoom(this._zoom/pm,L,Z)},p.pinchZoomIn=function(w){this.setZoom(this._zoom*qn,L,w)},p.pinchZoomOut=function(c){this.setZoom(this._zoom/qn,L,c)},p.adjustZoom=function(w){return fp>w?fp:w>mc?mc:w},p.getZoom=function(){return this._zoom},p.setZoom=function(Q,E,W){var J=this;if(E=Qb(E)){J._14o&&J._14o.stop(!0);var d=J._zoom;E.action=function(U){J._96O(d+(Q-d)*U,W)},E._37o=function(){delete J._zooming,delete J._14o,J.onZoomEnded()},J._zooming=1,J._14o=fl(E)}else J._96O(Q,W)},p._96O=function(C,Y){var u=this;if(C=u.adjustZoom(C),C!==u._zoom){u.validate();var X=u._29I,p=u._zoom;0!==X.width&&0!==X.height&&(Y=Y?Y:{x:X.x+X.width/2,y:X.y+X.height/2},u.tx((Y.x-X.x)*p-Y.x*C),u.ty((Y.y-X.y)*p-Y.y*C)),u._zoom=C,u.fp("zoom",p,C)}}}};tl(h,{baseZIndex:Y,isTouchable:S,devicePixelRatio:m.devicePixelRatio?m.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:_.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(I){return I*I},labelColor:Ij,labelSelectColor:Qi,labelFont:(S?"15":"12")+"px arial, sans-serif",widgetIndent:S?30:20,widgetRowHeight:S?30:20,widgetHeaderHeight:S?32:22,widgetTitleHeight:S?34:24,scrollBarColor:tn,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:S?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"4.4"},setCompType:function(V,o){tc[V]=o},getCompType:function(i){return tc[i]},numberListener:function(){var T={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(C){var n=C.keyCode;T[n]||65===n&&h.isCtrlDown(C)||n>=35&&39>=n||(C.shiftKey||48>n||n>57)&&(96>n||n>105)&&C.preventDefault()}}(),preventDefault:function(U){var T=U.target.tagName;("DIV"===T||"CANVAS"===T)&&(U.preventDefault(),U.preventManipulation&&U.preventManipulation())},getWindowInfo:function(){var H=i.documentElement,j=H&&(H.scrollLeft||H.scrollTop)?H:i.body;return{target:j,left:j.scrollLeft,top:j.scrollTop,width:m.innerWidth||j.clientWidth,height:m.innerHeight||j.clientHeight}},isDragging:function(){return!!rp},isLeftButton:function(R){return S?!0:0===R.button},getTouchCount:function(D){return S?D.touches.length:1},isDoubleClick:function(){var f=new Date,x=L,X=new Date,$=L;return function(g){if(qr=new Date,Wf=qr.getTime(),S){var v=g.type,k=v+"_isDoubleClick";if(g[k]===Y){var I=vo(g);"touchstart"===v?(g[k]=x&&Oh(x,I)<20&&Wf-f.getTime()<500,f=qr,x=I):(g[k]=$&&Oh($,I)<20&&Wf-X.getTime()<500,X=qr,$=I)}return g[k]}return 2===g.detail}}(),isShiftDown:function(u){return u?u.shiftKey:wj["16"]},isCtrlDown:function(J){return J?t?J.metaKey:J.ctrlKey:t?wj["91"]:wj["17"]},getClientPoint:function(y){return S&&(y=Gq(y)),{x:y.clientX,y:y.clientY}},getPagePoint:function(Z){return S&&(Z=Gq(Z)),{x:Z.pageX,y:Z.pageY}},createObject:function(F,i){var z=new F;for(var A in i){var W=Kg(A),k=i[A];z[W]?(z[W](k),"setToolTip"===W&&z.enableToolTip&&z.enableToolTip()):z[A]=k}return z},setImage:function(K,Y,O,l){var D=arguments.length;4===D?Mj(K,l,Y,O):2===D?dn(Y)?Mj(K,Y):Af[K]=Y:1===D&&Mj(K,K)},getImage:function(g,w){var _;if(g==L)return L;if(mi(g)?_=g:(_=Af[g],g&&_===Y&&(Dc&&Dc[g]||Mj(g,g))),w&&_&&_.tagName){_.colors||(_.colors={});var r=_.colors[w];return r||(r=zf(_,xf(w),_.width,_.height),_.colors[w]=r),r}return _},getId:function(){var s=1;return function(){return++s}}(),callLater:function(Z,R,T,e){var q=function(){Z.apply(R,T)};return e?P(q,e):m.requestAnimationFrame(q)},clone:function(i){if(!i)return L;if(zc(i))return i.slice(0);if(mi(i)){var O,r={};for(O in i)r[O]=i[O];return r}return i},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(P,N){if(P===N)return 0;if(P==L&&N!=L)return 1;if(P!=L&&N==L)return-1;if(P==L&&N==L)return 0;var e,T=typeof P,d=typeof N;return T===cj&&d===cj?e=P.localeCompare(N):T===Ti&&d===Ti&&(e=P-N),e===Y&&(e=(""+P).localeCompare(""+N)),e>0?1:0>e?-1:0},getClassMap:function(){return Cg},getClass:function(s){if(dn(s)){var J,v=Cg[s];if(!v){J=s.split("."),v=m;for(var c=0;c<J.length;c++)v=v[J[c]];Cg[s]=v}return v}return s},def:function(f,y,C){var s,u,$,D=function(){};if(D.prototype=y.prototype,s=new D,dn(f)){if(Cg[f])throw"'"+f+"' alreay defined";$=Ke(f),s.getClassName=function(){return f}}else $=f;if(s.constructor=$,s.getClass=function(){return $},s.getSuperClass=function(){return y},C)for(u in C)Ep[u]&&Ep.hasOwnProperty(u)?Ep[u](s,C):s[u]=C[u];$.prototype=s,$.superClass=y.prototype},startAnim:function(){var f=function(D){D.duration&&(D.startTime=um()),D.timeId=Vj(D.tick,L,L,D.interval)};return function(c){return c=nb(c),c.easing=c.easing||h.animEasing,c.duration||c.frames||(c.duration=h.animDuration),c.t=0,c.duration?c.interval=0:(c.frame=0,c.interval=c.interval||10),c.tick=function(){if(c.duration){var l=(um()-c.startTime)/c.duration;l>1&&(l=1),c.t=l,c.action(c.easing(l),l),1===l?c.stop():c._isPaused||(c.timeId=Vj(c.tick))}else c.frame++,l=c.t=c.frame/c.frames,c.action(c.easing(l),l),c.frame<c.frames?c._isPaused||(c.timeId=Vj(c.tick,L,L,c.interval)):c.stop()},c.resume=function(){c._isPaused&&(delete c._isPaused,c.duration?c.t<1&&(c.startTime=um()-c.duration*c.t,c.timeId=Vj(c.tick)):c.frame<c.frames&&(c.timeId=Vj(c.tick,L,L,c.interval)))},c.pause=function(){c._isPaused=!0},c.stop=function(X){c.isRunning()&&(c.duration?c.t<1&&X&&(c.t=1,c.action(c.easing(1))):c.frame<c.frames&&X&&(c.frame=c.frames,c.action(c.easing(1))),c._37o&&c._37o(),c.finishFunc&&c.finishFunc(),sp(c.timeId,!c.duration),delete c.timeId)},c.isRunning=function(){return c.timeId!=L},c.delay?Vj(f,L,[c],c.delay):f(c),c}}(),getTextSize:function(){var Q={},R=i?Dj().getContext("2d"):L;return function(i,y){R.font=i?i:cd;var w=Q[R.font];return w||(w=2*R.measureText("e").width+4,Q[R.font]=w),{width:R.measureText(y).width+4,height:w}}}(),drawText:function(R,l,W,U,K,p,O,V,m,I){if(l!=L){var S=bd(W,l),c={};c.y=I&&I!==uh?I===Oq?p+S.height/2:p+V-S.height/2:p+V/2,c.x=m&&m!==X?m===a?K+O-S.width/2:K+O/2:K+S.width/2,Im(R,l,c,W,U)}},getDistance:function(F,E){var a=F.length;return E?3===a?N(s(F[0]-E[0])+s(F[1]-E[1])+s(F[2]-E[2])):2===a?N(s(F[0]-E[0])+s(F[1]-E[1])):F.z===Y?N(s(E.x-F.x)+s(E.y-F.y)):N(s(E.x-F.x)+s(E.y-F.y)+s(E.z-F.z)):3===a?N(s(F[0])+s(F[1])+s(F[2])):2===a?N(s(F[0])+s(F[1])):void 0},brighter:function(h,Z){return Gk(h,Z?Z:40)},darker:function(H,C){return Gk(H,C?C:-40)},unionPoint:function(w,u){if(!w)return L;if(2===arguments.length)return w&&u?{x:C(w.x,u.x),y:C(w.y,u.y),width:M(w.x-u.x),height:M(w.y-u.y)}:L;var $=w;if($._as&&($=$._as),$.length===Y)return L;var n=$.length;if(0>=n)return L;for(var q=1,W=$[0],p={x:W.x,y:W.y,width:0,height:0};n>q;q++){W=$[q];var E=C(p.x,W.x),S=K(p.x+p.width,W.x),O=C(p.y,W.y),I=K(p.y+p.height,W.y);p.x=E,p.y=O,p.width=S-E,p.height=I-O}return p},unionRect:function(M,u){if(M&&!u)return nb(M);if(!M&&u)return nb(u);if(M&&u){var V={x:C(M.x,u.x),y:C(M.y,u.y)};return V.width=K(M.x+M.width,u.x+u.width)-V.x,V.height=K(M.y+M.height,u.y+u.height)-V.y,V}return L},containsPoint:function(c,N){return!(!c||N.x<c.x||N.y<c.y||N.x>c.x+c.width||N.y>c.y+c.height)},containsRect:function(M,W){if(!M||!W)return!1;var v=W.x,e=W.y,S=W.width,n=W.height,l=M.width,h=M.height;if(0>(l|h|S|n))return!1;var P=M.x,k=M.y;if(P>v||k>e)return!1;if(l+=P,S+=v,v>=S){if(l>=P||S>l)return!1}else if(l>=P&&S>l)return!1;if(h+=k,n+=e,e>=n){if(h>=k||n>h)return!1}else if(h>=k&&n>h)return!1;return!0},intersectsRect:function(W,P){if(!W||!P)return!1;var L=P.width,C=P.height,$=W.width,s=W.height;if(0>=$||0>=s||0>=L||0>=C)return!1;var Q=P.x,i=P.y,y=W.x,J=W.y;return $+=y,s+=J,L+=Q,C+=i,$>Q&&s>i&&L>y&&C>J},intersection:function(M,G){if(!M||!G)return L;var w=G.x,K=G.y,m=M.x,A=M.y,Q=w,P=K,H=m,l=A;return Q+=G.width,P+=G.height,H+=M.width,l+=M.height,m>w&&(w=m),A>K&&(K=A),Q>H&&(Q=H),P>l&&(P=l),Q-=w,P-=K,0>=Q||0>=P?L:{x:w,y:K,width:Q,height:P}},grow:function(H,g){H.x-=g,H.y-=g,H.width=H.width+2*g,H.height=H.height+2*g},getLogicalPoint:function(D,G,W,s,w,R){var Q=G.getBoundingClientRect();return D=S?Gq(D):D,{x:(D.clientX-Q.left+G.scrollLeft-(W||0))/(w||1),y:(D.clientY-Q.top+G.scrollTop-(s||0))/(R||1)}},removeHTML:function(){var Y;return function(w){return w&&w.parentNode?Y===w?!0:(Y=w,w.parentNode.removeChild(w),Y=L,!0):!1}}(),getToolTipDiv:function(){if(!Ld){Ld=lo(),_d=lo();var Q=Ld.style;h.baseZIndex!=L&&(Q.zIndex=n(h.baseZIndex)+3+""),Q.whiteSpace="nowrap",Q.color=h.toolTipLabelColor,Q.background=h.toolTipBackground,Q.font=h.toolTipLabelFont,Q.padding="5px",Q.boxShadow="0px 0px 3px "+h.toolTipShadowColor}return Ld},isToolTipShowing:function(){return Ld&&Ld.parentNode?!0:_d&&_d.parentNode?!0:!1},hideToolTip:function(){db(Ld),db(_d),pr()},showToolTip:function(V,r){if(!V||r==L)return Nf(),void 0;h.getToolTipDiv();var R,M;if(r.html?(r=r.html,R=_d,db(Ld)):(R=Ld,db(_d)),M=R.style,R.innerHTML=r,R.parentNode||Dg(i.body,R),V.target){V=td(V);var s=er(),m=V.x,T=V.y,N=S?60:12;if(S){var u=R.getBoundingClientRect();M.left=m-u.width/2+Wk,M.top=T-u.height-N<s.top?T+N+Wk:T-u.height-N+Wk}else{M.left=m+N+Wk,M.top=T+N+Wk;var u=R.getBoundingClientRect();u.left+u.width>s.width&&(M.left=m-N-u.width+Wk),u.top+u.height>s.height&&(M.top=T-N-u.height+Wk),u.left<0&&(M.left=m+N+Wk),u.top<0&&(M.top=T+N+Wk)}}else M.left=V.x+Wk,M.top=V.y+Wk;pr()},startDragging:function(F,w){F!==rp&&(rp?S?rp.handleWindowTouchEnd(w):rp.handleWindowMouseUp(w):S?(m.addEventListener(oh,ub,!1),m.addEventListener(We,oo,!1)):(m.addEventListener(dl,ti,!1),m.addEventListener(Zd,Tf,!1)),rp=F)},getImageMap:function(){return Af},toBoundaries:function(u,W,w,R){var k=[];return ph(u,W,w,R).forEach(function(V){var R=[];V.forEach(function(y){R.push(y.x,y.y)}),k.push(R)}),k},getCurrentKeyCodeMap:function(){return wj},drawCenterImage:function(p,J,_,w,d,z,V){var e=Ge(J,d),s=Wc(J,d);md(p,J,c(_-e/2),c(w-s/2),e,s,d,z,V)},drawStretchImage:function(K,M,k,b,w,V,p,r,P,q){var W,x=Ge(M,r),S=Wc(M,r);"uniform"===k?(W=C(V/x,p/S),x*=W,S*=W,b+=c((V-x)/2),w+=c((p-S)/2),V=x,p=S):k===am&&((x>V||S>p)&&(W=C(V/x,p/S),x*=W,S*=W),b+=c((V-x)/2),w+=c((p-S)/2),V=x,p=S),md(K,M,b,w,V,p,r,P,q)},toCanvas:function(w,V,e,D,y,z,x){w=tm(w,x),V=V||Ge(w,y),e=e||Wc(w,y);var f=Dj();Vc(f,V,e,1);var i=on(f);return rj(i,w,D,0,0,V,e,y,z,x),i.restore(),f},createElement:function(R,j,H,y){var p=i.createElement(R);return xq(p,j||_.widgetBorder,2),p.style.font=H?H:cd,y!=L&&(p.value=y),p},containedInView:function(K,o){var S=_c(o).getBoundingClientRect();return lc({x:S.left,y:S.top,width:S.width,height:S.height},vo(K))},isIsolating:function(){return Sb},setIsolating:function(q){Sb=q},toColorData:gj},!0),tl(r,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var hp=h.disabledOpacity,Rh=h.toolTipDelay,og=h.devicePixelRatio,Rc=h.autoMakeVisible,nm=h.autoHideScrollBar,Nh=h.imageGradient,Xm=h.showToolTip,Nf=h.hideToolTip,yc=h.dashPattern,lf=h.lineCap,Pr=h.lineJoin,Vh=h.labelColor,bi=h.labelSelectColor,cd=h.labelFont,Gl=h.widgetIndent,Pn=h.widgetRowHeight,Uq=h.widgetHeaderHeight,eh=h.widgetTitleHeight,ln=h.scrollBarColor,dr=h.scrollBarSize,Ok=h.scrollBarTimeout,Cf=h.scrollBarMinLength,vi=h.scrollBarInteractiveSize,Fj=h.zoomIncrement,pm=h.scrollZoomIncrement,qn=h.pinchZoomIncrement,mc=h.zoomMax,fp=h.zoomMin,gb=h.createObject,ir=h.preventDefault,qg=h.setImage,tm=h.getImage,Sk=h.drawCenterImage,rj=h.drawStretchImage,qs=h.getId,Vj=h.callLater,_n=h.sortFunc,nb=h.clone,Ke=h.getClass,fl=h.startAnim,rg=h.brighter,Al=h.darker,Xj=h.drawText,bd=h.getTextSize,Gg=h.isLeftButton,mh=h.getTouchCount,_e=h.isDoubleClick,Cd=h.isShiftDown,Yq=h.isCtrlDown,vo=h.getClientPoint,td=h.getPagePoint,Oh=h.getDistance,Aj=h.unionPoint,pl=h.unionRect,lc=h.containsPoint,Yb=h.containsRect,mo=h.intersectsRect,rd=h.intersection,er=h.getWindowInfo,oe=h.grow,lm=h.getLogicalPoint,dc=h.startDragging,db=h.removeHTML,ac=h.createElement,lh=h.segmentResolution,Ak=h.shapeResolution,_g=h.shapeSide,jf=h.def,Pj=function(H,m,g){jf(T+"."+H,m,g)};tl(h,{toolTipLabelColor:Vh,toolTipLabelFont:cd,toolTipBackground:_.toolTipBackground,toolTipShadowColor:tn},!0);var Ni=1e-6,Sn="undefined"!=typeof Uint16Array?Uint16Array:Array,Kq="undefined"!=typeof Float32Array?Float32Array:Array,Jo=function(c,p,h){var P=[c[0]-p[0],c[1]-p[1],c[2]-p[2]];if(h){var y=Oh(P);y>0&&(P[0]/=y,P[1]/=y,P[2]/=y)}return P},ze=function(l){return[-l[0],-l[1],-l[2]]},hl=function(U,y){return 3===U.length?U[0]*y[0]+U[1]*y[1]+U[2]*y[2]:U[0]*y[0]+U[1]*y[1]},il=function(){var C=new Kq(16);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},$h=il(),ye=function(B){var U=new Kq(16);return U[0]=B[0],U[1]=B[1],U[2]=B[2],U[3]=B[3],U[4]=B[4],U[5]=B[5],U[6]=B[6],U[7]=B[7],U[8]=B[8],U[9]=B[9],U[10]=B[10],U[11]=B[11],U[12]=B[12],U[13]=B[13],U[14]=B[14],U[15]=B[15],U},Ve=function(c,g){return c[0]=g[0],c[1]=g[1],c[2]=g[2],c[3]=g[3],c[4]=g[4],c[5]=g[5],c[6]=g[6],c[7]=g[7],c[8]=g[8],c[9]=g[9],c[10]=g[10],c[11]=g[11],c[12]=g[12],c[13]=g[13],c[14]=g[14],c[15]=g[15],c},or=function(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k},Yp=function(w,L){var o=w[0],E=w[1],J=w[2];return w[0]=L[0]*o+L[4]*E+L[8]*J+L[12],w[1]=L[1]*o+L[5]*E+L[9]*J+L[13],w[2]=L[2]*o+L[6]*E+L[10]*J+L[14],w},jl=function(h,A){var N=h[0],T=h[1],l=h[2],J=h[3];return h[0]=A[0]*N+A[4]*T+A[8]*l+A[12]*J,h[1]=A[1]*N+A[5]*T+A[9]*l+A[13]*J,h[2]=A[2]*N+A[6]*T+A[10]*l+A[14]*J,h[3]=A[3]*N+A[7]*T+A[11]*l+A[15]*J,h},Ng=function(){var u,S,W,a,w=po(pj[1]+pj[7]),x=po(pj[0]+pj[3]-pj[10]),y=po(pj[8]+2),z=function(){return S=W.charAt(u),u+=1,S},o=function(){var Y="";if(S===y)for(;z();){if(S===y)return z(),Y;Y+=S}else z()},B=function(){for(;S&&" ">=S;)z()},q=function(){var b,Z={};if(S===w){if(z(),B(),S===x)return z(),Z;for(;S;){if(b=o(),B(),z(),Z[b]=a(),B(),S===x)return z(),Z;z(),B()}}};return a=function(){switch(B(),S){case w:return q();default:return o()}},function(O){if(G={},O){var n;if(W=O,u=0,S=" ",n=a(),B(),!S)return n}}}(),Yl=function(f,E){if(E){var G=x(E),g=e(E),w=f[4],U=f[5],o=f[6],p=f[7],S=f[8],Y=f[9],J=f[10],B=f[11];f[4]=w*g+S*G,f[5]=U*g+Y*G,f[6]=o*g+J*G,f[7]=p*g+B*G,f[8]=S*g-w*G,f[9]=Y*g-U*G,f[10]=J*g-o*G,f[11]=B*g-p*G}},Zr=function(X,k){if(k){var d=x(k),V=e(k),o=X[0],y=X[1],R=X[2],v=X[3],C=X[8],p=X[9],w=X[10],G=X[11];X[0]=o*V-C*d,X[1]=y*V-p*d,X[2]=R*V-w*d,X[3]=v*V-G*d,X[8]=o*d+C*V,X[9]=y*d+p*V,X[10]=R*d+w*V,X[11]=v*d+G*V}},bn=function(r,m){if(m){var k=x(m),F=e(m),X=r[0],J=r[1],N=r[2],V=r[3],b=r[4],_=r[5],c=r[6],K=r[7];r[0]=X*F+b*k,r[1]=J*F+_*k,r[2]=N*F+c*k,r[3]=V*F+K*k,r[4]=b*F-X*k,r[5]=_*F-J*k,r[6]=c*F-N*k,r[7]=K*F-V*k}},hn=function(k,n,b){return Eb(L,b===!1?L:k.s3(),k.r3(),k.getRotationMode(),k.p3(),L,n)},Eb=function(R,A,W,d,s,U,N){return U||(U=il()),s&&Fr(U,s),Or(U,W,d),N&&Lc(U,U,N),A&&ee(U,A),R&&Lc(U,U,R),U},oi=function(u,L,P){L=n(L),P=n(P);var g=this;g.g=u,g._84O=L,g._85O=P,g._70I=!0,g.F=0,g._83O=L+P,g.pen={x:0,y:0}},Pk="lineDashOffset",wq="setLineDash",Ck=function(k){for(var G in k)1===G.length&&(Pk=k[G]);return G?1:0},Zg=function(q,D,$){return wi(D)?q:q[wq]?(q[wq](D),$&&(q.lineDashOffset=$),q):new oi(q,D[0],D.length>1?D[1]:D[0])},hh=function(R,v){!wi(v)&&R[wq]&&(R[wq](Ad),R.lineDashOffset=0)};jf(oi,b,{_69I:6,moveTo:function(t,$){var Q=this,o=Q.pen;o.x=t,o.y=$,Q.g.moveTo(t,$),Q.start||(Q.start={x:t,y:$})},lineTo:function(U,P){var q=this,$=q.pen,G=U-$.x,J=P-$.y,S=l(J,G),B=e(S),u=x(S),m=q._23O($.x,$.y,U,P),M=q._85O,d=q._84O,i=q._83O;if(q.F){if(q.F>m)return q._70I?q._72I(U,P):q.moveTo(U,P),q.F-=m,void 0;if(q._70I?q._72I($.x+B*q.F,$.y+u*q.F):q.moveTo($.x+B*q.F,$.y+u*q.F),m-=q.F,q.F=0,q._70I=!q._70I,!m)return}var k=F(m/i);if(k){for(var T=B*d,O=u*d,C=B*M,j=u*M,D=0;k>D;D++)q._70I?(q._72I($.x+T,$.y+O),q.moveTo($.x+C,$.y+j)):(q.moveTo($.x+C,$.y+j),q._72I($.x+T,$.y+O));m-=i*k}q._70I?m>d?(q._72I($.x+B*d,$.y+u*d),q.moveTo(U,P),q.F=M-(m-d),q._70I=!1):(q._72I(U,P),m===d?(q.F=0,q._70I=!q._70I):(q.F=d-m,q.moveTo(U,P))):m>M?(q.moveTo($.x+B*M,$.y+u*M),q._72I(U,P),q.F=d-(m-M),q._70I=!0):(q.moveTo(U,P),m===M?(q.F=0,q._70I=!q._70I):q.F=M-m)},quadraticCurveTo:function(W,T,l,e){var v,x=this,I=x.pen,c=I.x,q=I.y,G=x._22O(c,q,W,T,l,e),A=0,z=0,$=x._85O,m=x._84O;if(x.F){if(x.F>G)return x._70I?x._71I(W,T,l,e):x.moveTo(l,e),x.F-=G,void 0;if(A=x.F/G,v=x._20O(c,q,W,T,l,e,A),x._70I?x._71I(v[2],v[3],v[4],v[5]):x.moveTo(v[4],v[5]),x.F=0,x._70I=!x._70I,!G)return}var J=G-G*A,k=F(J/x._83O),R=m/G,w=$/G;if(k)for(var t=0;k>t;t++)x._70I?(z=A+R,v=x._21O(c,q,W,T,l,e,A,z),x._71I(v[2],v[3],v[4],v[5]),A=z,z=A+w,v=x._21O(c,q,W,T,l,e,A,z),x.moveTo(v[4],v[5])):(z=A+w,v=x._21O(c,q,W,T,l,e,A,z),x.moveTo(v[4],v[5]),A=z,z=A+R,v=x._21O(c,q,W,T,l,e,A,z),x._71I(v[2],v[3],v[4],v[5])),A=z;J=G-G*A,x._70I?J>m?(z=A+R,v=x._21O(c,q,W,T,l,e,A,z),x._71I(v[2],v[3],v[4],v[5]),x.moveTo(l,e),x.F=$-(J-m),x._70I=!1):(v=x._19O(c,q,W,T,l,e,A),x._71I(v[2],v[3],v[4],v[5]),G===m?(x.F=0,x._70I=!x._70I):(x.F=m-J,x.moveTo(l,e))):J>$?(z=A+w,v=x._21O(c,q,W,T,l,e,A,z),x.moveTo(v[4],v[5]),v=x._19O(c,q,W,T,l,e,z),x._71I(v[2],v[3],v[4],v[5]),x.F=m-(J-$),x._70I=!0):(x.moveTo(l,e),J===$?(x.F=0,x._70I=!x._70I):x.F=$-J)},bezierCurveTo:function(){var k=arguments;this.pen={x:k[4],y:k[5]},this.g.bezierCurveTo(k[0],k[1],k[2],k[3],k[4],k[5])},arc:function(G,l,R,z,d,J){J||(z=-z,d=-d),vh(this,G,l,z,d-z,R,R,!1)},rect:function(t,P,O,r){var g=this;g.pen={x:t,y:P},g.moveTo(t,P),g.lineTo(t,P+r),g.lineTo(t+O,P+r),g.lineTo(t+O,P),g.lineTo(t,P)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(W,x,H,e){var R=H-W,r=e-x;return N(R*R+r*r)},_22O:function(M,Y,H,B,Q,O,L){for(var m,E,W,D,C,g,P,p=0,e=M,X=Y,i=L>0?L:this._69I,U=1;i>=U;U++)W=U/i,D=1-W,C=D*D,g=2*W*D,P=W*W,m=C*M+g*H+P*Q,E=C*Y+g*B+P*O,p+=this._23O(e,X,m,E),e=m,X=E;return p},_21O:function(c,q,R,p,v,P,z,V){var T=this;if(0===z)return T._20O(c,q,R,p,v,P,V);if(1===V)return T._19O(c,q,R,p,v,P,z);var u=T._20O(c,q,R,p,v,P,V);return u.push(z/V),T._19O.apply(T,u)},_20O:function(m,Q,o,b,E,G,M){if(1!==M){var i=o+(E-o)*M,V=b+(G-b)*M;o=m+(o-m)*M,b=Q+(b-Q)*M,E=o+(i-o)*M,G=b+(V-b)*M}return[m,Q,o,b,E,G]},_19O:function(V,$,f,E,A,Q,O){if(1!==O){var Z=V+(f-V)*O,u=$+(E-$)*O;f+=(A-f)*O,E+=(Q-E)*O,V=Z+(f-Z)*O,$=u+(E-u)*O}return[V,$,f,E,A,Q]},_72I:function(p,Z){var d=this.pen;(p!==d.x||Z!==d.y)&&(d.x=p,d.y=Z,this.g.lineTo(p,Z))},_71I:function(t,n,$,R){var c=this.pen;(t!==$||n!==R||$!==c.x||R!==c.y)&&(c.x=$,c.y=R,this.g.quadraticCurveTo(t,n,$,R))}});var Jg=_.chart,vf=h.compStack=[],mm=/^style@/,br=/^attr@/,Uc=/^field@/,Ge=function(D,F){return D?Ek(D.width,F):0},Wc=function(b,A){return b?Ek(b.height,A):0},Ek=function(B,W,o){if(!B||!B.func)return B;var S,k=B.func,d=B.value;return S=$c(k)?k(W,o):W?mm.test(k)?W.s(k.slice(6)):br.test(k)?W.a(k.slice(5)):Uc.test(k)?W[k.slice(6)]:W[k]?W[k](o):d:d,d!==Y&&S==L?d:S},md=h.drawImage=function(){var X,n,R,V,H,d=function(Z,q,w){var v=Z[q];return v&&v.func?(v=Ek(v,n,R),w&&(v=w(v))):w&&(v=Z[q]=w(v)),v},D=function(V,s){var g=d(V,s);if(H&&g){var S=xf(H);return g=gj(g),"rgba("+F(g[0]*S[0])+","+F(g[1]*S[1])+","+F(g[2]*S[2])+","+g[3]+")"}return g},u=function(I){if(zc(I)){for(var j=new Ml,y=I.length,m=0;y>m;m+=2)j.add({x:I[m],y:I[m+1]});I=j}return I},_=function(p,b){var n=d(p,Fo);if(zc(n)){var G=n.length,F=d(p,"relative"),D=b.width,V=b.height;if(4===G)n={x:n[0],y:n[1],width:n[2],height:n[3]},F&&(n.x*=D,n.y*=V,n.width*=D,n.height*=V);else if(3===G){var S=n[0];n={width:n[1],height:n[2]},F&&(n.width*=D,n.height*=V),S=Mp(S,b,n),n.x=S.x-n.width/2,n.y=S.y-n.height/2}var $=d(p,"offsetX");$&&(n.x+=$),$=d(p,"offsetY"),$&&(n.y+=$)}return n},g=function(x){return zc(x)?new Ml(x):x},$=function(R,Z){if(R){var T=Z.x+Z.width/2,K=Z.y+Z.height/2;X.save(),mk(X,T,K),en(X,R),mk(X,-T,-K)}},W=function(E){E&&X.restore()},M=function(U,v,M){var g=d(U,"path"),S=d(U,ah),Y=L,s=Ip(null,g);if(M||(M=U.unionRect,M||(M=Aj(s),U.path.func||(U.unionRect=M)),Y=M),M){Y||(Y=U.unionRect,Y||(Y=Aj(s),U.path.func||(U.unionRect=Y)));var G=ic(Y,M);if(G)$(S,Y);else{var P=Y.width,K=Y.height,a=M.width,y=M.height,Z=a/P,I=y/K;X.save(),mk(X,M.x+a/2,M.y+y/2),X.scale(Z,I),S&&en(X,S),mk(X,-Y.x-P/2,-Y.y-K/2)}var l=d(U,"borderPattern"),B=Zg(X,l),i=D(U,"background"),H=D(U,"borderColor"),C=d(U,"borderWidth"),j=d(U,"gradient"),f=D(U,"gradientColor"),r=d(U,"border3d"),p=d(U,"border3dColor"),n=d(U,"border3dAccuracy"),F=X.lineJoin,z=X.lineCap;if(X.lineJoin=d(U,"borderJoin")||Pr,X.lineCap=d(U,"borderCap")||lf,i?(Fg(X,i,j,f,Y),Ip(X,g),X.fill(),B!==X&&Ip(X,g)):Ip(X,g),C&&H&&(X.lineWidth=C,X.strokeStyle=H,X.stroke(),r&&Gc(X,H,p,C,V,n)),hh(X,l),d(U,"dash")){var J=d(U,"dashWidth")||C;if(J>0){l=d(U,"dashPattern")||yc;var B=Zg(X,l,d(U,"dashOffset")),q=d(U,"dashColor")||Gn;B!==X&&Ip(X,g),X.strokeStyle=q,X.lineWidth=J,X.stroke(),d(U,"dash3d")&&Gc(X,q,d(U,"dash3dColor"),J,V,d(U,"dash3dAccuracy")),hh(X,l)}}v===Fo&&yi(X,i,d(U,"depth"),Y),X.lineJoin=F,X.lineCap=z,G?W(S):X.restore()}},p=function(I,m,B){var C=d(I,Yk,u),i=d(I,ah),K=m===sq,f=L;if(!B&&K&&(B=I.unionRect,B||(B=Aj(C),I.points.func||(I.unionRect=B)),f=B),B){K?f||(f=I.unionRect,f||(f=Aj(C),I.points.func||(I.unionRect=f))):f=B;var _=ic(f,B);if(_)$(i,f);else{var R=f.width,N=f.height,Y=B.width,y=B.height,o=Y/R,T=y/N;X.save(),mk(X,B.x+Y/2,B.y+y/2),X.scale(o,T),i&&en(X,i),mk(X,-f.x-R/2,-f.y-N/2)}var a,j,n,q,S=d(I,"borderPattern"),s=Zg(X,S),U=D(I,"background"),O=tm(d(I,"repeatImage"),H),l=D(I,"borderColor"),F=d(I,"borderWidth"),x=d(I,"segments",g),b=d(I,"gradient"),r=D(I,"gradientColor"),h=d(I,"border3d"),P=d(I,"border3dColor"),t=d(I,"border3dAccuracy"),c=d(I,"closePath"),A=X.lineJoin,v=X.lineCap;if(X.lineJoin=d(I,"borderJoin")||Pr,X.lineCap=d(I,"borderCap")||lf,K?U||O?(O?Ue(X,O):Fg(X,U,b,r,f),Fp(X,C,x,c),X.fill(),s!==X&&Fp(s,C,x,c)):Fp(s,C,x,c):("roundRect"===m?a=d(I,"cornerRadius"):"polygon"===m?a=d(I,"polygonSide"):"arc"===m&&(a=d(I,"arcFrom"),j=d(I,"arcTo"),n=d(I,"arcClose"),q=d(I,"arcOval")),U||O?(O?Ue(X,O):Fg(X,U,b,r,f),kj(X,m,f,a,j,n,q),X.fill(),X!==s&&kj(s,m,f,a,j,n,q)):kj(s,m,f,a,j,n,q)),F&&l&&(X.lineWidth=F,X.strokeStyle=l,X.stroke(),h&&Gc(X,l,P,F,V,t)),hh(X,S),d(I,"dash")){var p=d(I,"dashWidth")||F;if(p>0){S=d(I,"dashPattern")||yc;var s=Zg(X,S,d(I,"dashOffset")),M=d(I,"dashColor")||Gn;s!==X&&(K?Fp(s,C,x,c):kj(s,m,f,a,j,n,q)),X.strokeStyle=M,X.lineWidth=p,X.stroke(),d(I,"dash3d")&&Gc(X,M,d(I,"dash3dColor"),p,V,d(I,"dash3dAccuracy")),hh(X,S)}}m===Fo&&yi(X,U,d(I,"depth"),f),X.lineJoin=A,X.lineCap=v,_?W(i):X.restore()}},r=function(V,s){var J=H,G=H||d(V,Lj),C=tm(d(V,"name"),G);C&&(rj(X,C,d(V,"stretch"),s.x,s.y,s.width,s.height,n,R,G),H=J)},Q=function(q,x){var C=d(q,"text");
C!=L&&Xj(X,C,d(q,"font"),D(q,Lj),x.x,x.y,x.width,x.height,d(q,"align"),d(q,"vAlign"))},Y=function(C,R){ai(X,D(C,Lj),R.x,R.y,R.width,R.height,d(C,"width"))},t=function(_,q){var z=d(_,Kn),y=0;if(z&&(z.forEach(function(T){y+=T}),y>0)){for(var t=d(_,"colors")||Jg,Q=d(_,"startAngle")||0,N=d(_,"hollow"),h=d(_,jk),p=d(_,Uh),G=d(_,fb),F=h?new Ml:L,V=q.x,A=q.y,k=q.width,u=q.height,Z=V+k/2,K=A+u/2,m=C(k,u)/2,b=0,f=0;f<z.length;f++){var l=z[f],a=B*l/y,v=Q+a;if(X.fillStyle=t[b++],b===t.length&&(b=0),X.beginPath(),N){var i=Z+e(Q)*m/2,M=K+x(Q)*m/2,D=Z+e(v)*m,P=K+x(v)*m;X.moveTo(i,M),X.arc(Z,K,m/2,Q,v,!1),X.lineTo(D,P),X.arc(Z,K,m,v,Q,!0)}else X.moveTo(Z,K),X.arc(Z,K,m,v,Q,!0);F&&(a=(Q+v)/2,F.add({text:$c(h)?h(l,f,y,n):l,x:Z+.75*e(a)*m,y:K+.75*x(a)*m})),X.closePath(),X.fill(),Q=v}F&&F.each(function(K){Xj(X,K.text,p,G,K.x,K.y,0,0,vl)})}},c=function(T,w){var M=d(T,Yd);if(M&&M.length>0){var $=M.length,J=d(T,jk),V=d(T,Uh),z=d(T,fb),U=J?new Ml:L,O=d(T,"minValue")||0,o=d(T,"maxValue");if(o==L&&(o=0,M.forEach(function(p){p.values.forEach(function(U){o=K(o,U)})})),O===o)return;for(var p=w.height/(o-O),S=w.y+o*p,y=d(M[0],Kn).length,s=w.width/(3*y+1),H=2*s/$,F=0,u=0;$>u;u++)for(var R=M[u],r=d(R,Lj),_=d(R,"colors"),l=d(R,Kn),h=0;y>h;h++){_?X.fillStyle=_[h]:r?X.fillStyle=r:(X.fillStyle=Jg[F++],F===Jg.length&&(F=0));var q=l[h],x=q*p,A=w.x+(1+3*h)*s+u*H;if(kh(X,A,S-x,H,x),U){var v=$c(J)?J(q,h,R,n):q,a=bd(V,v).height;U.add({x:A,y:S-x-a,width:H,height:a,text:v})}}U&&U.each(function(n){Xj(X,n.text,V,z,n.x,n.y,n.width,n.height,vl)})}},s=function(Z,Y){var m=d(Z,Yd);if(m&&m.length>0){var p=m.length,s=d(m[0],Kn).length,_=Y.width/(3*s+1),f=0,R=d(Z,"maxValue"),g=d(Z,jk),k=d(Z,Uh),j=d(Z,fb),P=g?new Ml:L;if(R==L){R=0;for(var b=0;s>b;b++){for(var N=0,u=0;p>u;u++)N+=d(m[u],Kn)[b];R=K(R,N)}}if(R>0){for(var b=0;s>b;b++)for(var F=Y.y+Y.height,u=0;p>u;u++){var t=m[u],S=d(t,Lj),r=d(t,Kn)[b],T=r/R*Y.height;S?X.fillStyle=S:(X.fillStyle=Jg[f++],f===Jg.length&&(f=0)),F-=T;var G={x:Y.x+(1+3*b)*_,y:F,width:2*_,height:T};kh(X,G.x,G.y,G.width,G.height),P&&(G.text=$c(g)?g(r,b,t,n):r,P.add(G))}P&&P.each(function(y){Xj(X,y.text,k,j,y.x,y.y,y.width,y.height,vl)})}}},I=function(K,v){var Y=d(K,Yd);if(Y&&Y.length>0){for(var z=Y.length,P=d(Y[0],Kn).length,M=v.width/(3*P+1),l=0,O=d(K,jk),G=d(K,Uh),s=d(K,fb),D=O?new Ml:L,W=0;P>W;W++){for(var U=0,H=0;z>H;H++)U+=d(Y[H],Kn)[W];if(U>0){var I=v.y+v.height;for(H=0;z>H;H++){var t=Y[H],b=d(t,Lj),S=d(t,Kn)[W],g=S/U*v.height;b?X.fillStyle=b:(X.fillStyle=Jg[l++],l===Jg.length&&(l=0)),I-=g;var $={x:v.x+(1+3*W)*M,y:I,width:2*M,height:g};kh(X,$.x,$.y,$.width,$.height),D&&($.text=$c(O)?O(S,W,t,n):S,D.add($))}}}D&&D.each(function(v){Xj(X,v.text,G,s,v.x,v.y,v.width,v.height,vl)})}},A=function(E,J){var f=d(E,Yd);if(f&&f.length>0){var F=f.length,c=d(E,"minValue")||0,O=d(E,"maxValue");if(O==L&&(O=0,f.forEach(function(D){D.values.forEach(function(G){O=K(O,G)})})),c===O)return;for(var x=J.height/(O-c),Q=J.y+O*x,W=d(f[0],Kn).length,D=J.width/(3*W+1),r=0,i=d(E,"lineWidth")||2,N=d(E,"line3d"),j=d(E,"linePoint"),b=d(E,jk),P=d(E,Uh),G=d(E,fb),p=0;F>p;p++){var _=f[p],k=d(_,Lj),e=d(_,Kn);k?X.strokeStyle=k:(k=X.strokeStyle=Jg[r++],r===Jg.length&&(r=0)),X.beginPath();for(var I=0;W>I;I++){var o=J.x+(2+3*I)*D,q=Q-e[I]*x;0===I?X.moveTo(o,q):X.lineTo(o,q)}if(X.lineWidth=i,X.stroke(),N&&Gc(X,k,L,i,V),j||b){var Z,M=i/2+2;for(I=0;W>I;I++){var A=e[I];if(o=J.x+(2+3*I)*D,q=Q-A*x,$c(j)?j(X,o,q,k,I,_,n):j&&(X.fillStyle=k,X.beginPath(),X.arc(o,q,M,0,B,!0),X.fill()),$c(b)?Z=b(A,I,_,n):b&&(Z=A),Z){var u=bd(P,Z).height,U=X.shadowBlur;if(U){var m=X.shadowOffsetX,S=X.shadowOffsetY,s=X.shadowColor;X.shadowOffsetX=0,X.shadowOffsetY=0,X.shadowBlur=0,X.shadowColor=L}Xj(X,Z,P,G,o,q-u-M+2,0,u,vl),U&&(X.shadowOffsetX=m,X.shadowOffsetY=S,X.shadowColor=s,X.shadowBlur=U)}}}}}},O={border:Y,image:r,text:Q,pieChart:t,columnChart:c,stackedColumnChart:s,percentageColumnChart:I,lineChart:A};return function(N,C,m,J,g,T,K,z,P){if(C&&g&&T){if(X=N,n=K,R=z,V=R?R._zoom?R._zoom:1:1,H=P,C.tagName)return X.drawImage(C,m,J,g,T),void 0;if(d(C,"visible")!==!1){H||(H=Ek(C.color,n,R));var e=Ge(C,n),S=Wc(C,n),o={x:0,y:0,width:e,height:S},v=d(C,"clip"),r=d(C,"opacity");X.save(),mk(X,m,J),(e!==g||S!==T)&&X.scale(g/e,T/S),v&&($c(v)?v(X,e,S,n,R,C):(X.beginPath(),X.rect(0,0,e,S),X.clip())),r!=L&&(X.globalAlpha*=r),d(C,"comps").forEach(function(V){if(d(V,Gp)!==!1){vf.splice(0,0,V);var t=d(V,"opacity"),e=d(V,"shadow"),c=d(V,"type"),g=_(V,o);if(t!=L){var E=X.globalAlpha;X.globalAlpha*=t}if(e){var w=X.shadowOffsetX,v=X.shadowOffsetY,f=X.shadowBlur,s=X.shadowColor,D=d(V,"shadowOffsetX"),F=d(V,"shadowOffsetY"),K=d(V,"shadowBlur"),C=d(V,"shadowColor");X.shadowOffsetX=D==L?3:D,X.shadowOffsetY=F==L?3:F,X.shadowBlur=K==L?6:K,X.shadowColor=C||tn}if($c(c))c(X,g,V,n,R);else if(h.getCompType(c))h.getCompType(c)(X,g,V,n,R);else if(Jp[c]||c===sq)p(V,c,g);else if("SVGPath"===c)M(V,c,g);else if(O[c]&&g){var m=d(V,ah);$(m,g),O[c](V,g),W(m)}e&&(X.shadowOffsetX=w,X.shadowOffsetY=v,X.shadowBlur=f,X.shadowColor=s),t!=L&&(X.globalAlpha=E),vf.splice(0,1)}}),X.restore()}}}}();h.getCurrentComp=function(){return vf[0]},h.getParentComp=function(){return vf[1]},h.getInternal=function(){return{isEnter:Lp,isEsc:Bd,isSpace:Dk,isLeft:bc,isUp:Xd,isRight:Zf,isDown:Cp,addMethod:tl,superCall:Xc,toPointsArray:ph,translateAndScale:fd,appendArray:Bk,createWorldMatrix:Eb,vec3TransformMat4:Yp,setCanvas:Vc,createDiv:lo,createCanvas:Dj,createImage:Ze,initContext:on,layout:kl,fillRect:kh,Mat:ls,drawBorder:ai,isString:dn,setBorder:xq,getPropertyValue:Eh,setPropertyValue:Wl,drawVerticalLine:vc,draw3DRect:yi,getPinchDist:Qq,isSameRect:ic,getPosition:Mp,intersectionLineRect:cq,getNodeRect:Bf,getImageWidth:Ge,getImageHeight:Wc,formatNumber:Xk,initItemElement:Go,drawPoints:Fp,createG2:Zg,closePopup:Hb,isH:Dd,createAnim:Qb,createNormalMatrix:Uj,createNormals:ri,toFloatArray:ss,glMV:hm,batchShape:ks,createNodeMatrix:hn,getFaceInfo:cc,transformAppend:sf,drawFaceInfo:df,to3dPointsArray:bq,setGLDebugMode:function(W){zr=W},cube:function(){return{vs:Ln,is:Df,uv:pb}},ui:function(){return{DataUI:eb,NodeUI:Vo,EdgeUI:so,GroupUI:Bj,ShapeUI:Rk,GridUI:$f,Data3dUI:_m,Node3dUI:Co,Shape3dUI:gd}},getInternalVersion:function(){return"U2FsdGVkX1/+W+AE61stxUqZNvSsgpFqJZ1DMbs1Fx2JMpaFVUZAnHX0JiP2Botz"},getDragger:function(){return rp},addMSMap:function(Q){tl(Ep,Q)},k:O}},function(A){function i(C,j){C!=L&&(j==L&&cj!=typeof C?this._54O(C,256):this._54O(C,j))}function E(){return new i(L)}function p(Y,U,q,A,R,o){for(;--o>=0;){var z=U*this[Y++]+q[A]+R;R=F(z/67108864),q[A++]=67108863&z}return R}function I(i,c,n,k,T,f){for(var x=32767&c,W=c>>15;--f>=0;){var E=32767&this[i],$=this[i++]>>15,Z=W*E+$*x;E=x*E+((32767&Z)<<15)+n[k]+(1073741823&T),T=(E>>>30)+(Z>>>15)+W*$+(T>>>30),n[k++]=1073741823&E}return T}function W(o,k,T,B,y,J){for(var g=16383&k,j=k>>14;--J>=0;){var C=16383&this[o],e=this[o++]>>14,$=j*C+e*g;C=g*C+((16383&$)<<14)+T[B]+y,y=(C>>28)+($>>14)+j*e,T[B++]=268435455&C}return y}function v(q){return dh.charAt(q)}function Z(x,r){var D=ls[x.charCodeAt(r)];return D==L?-1:D}function r($){for(var c=this.t-1;c>=0;--c)$[c]=this[c];$.t=this.t,$.s=this.s}function R(K){this.t=1,this.s=0>K?-1:0,K>0?this[0]=K:-1>K?this[0]=K+this.DV:this.t=0}function t(V){var e=E();return e._58O(V),e}function J(I,Y){var V,p=this;if(16==Y)V=4;else if(8==Y)V=3;else if(256==Y)V=8;else if(2==Y)V=1;else if(32==Y)V=5;else{if(4!=Y)return p.fromRadix(I,Y),void 0;V=2}p.t=0,p.s=0;for(var z=I.length,v=!1,k=0;--z>=0;){var X=8==V?255&I[z]:Z(I,z);0>X?"-"==I.charAt(z)&&(v=!0):(v=!1,0==k?p[p.t++]=X:k+V>p.DB?(p[p.t-1]|=(X&(1<<p.DB-k)-1)<<k,p[p.t++]=X>>p.DB-k):p[p.t-1]|=X<<k,k+=V,k>=p.DB&&(k-=p.DB))}8==V&&0!=(128&I[0])&&(p.s=-1,k>0&&(p[p.t-1]|=(1<<p.DB-k)-1<<k)),p._57O(),v&&i.ZERO._78O(p,p)}function u(){for(var P=this,y=P.s&P.DM;P.t>0&&P[P.t-1]==y;)--P.t}function w(X){var c=this;if(c.s<0)return"-"+c._85O()[ij](X);var S;if(16==X)S=4;else if(8==X)S=3;else if(2==X)S=1;else if(32==X)S=5;else{if(4!=X)return c.toRadix(X);S=2}var e,q=(1<<S)-1,F=!1,r="",u=c.t,T=c.DB-u*c.DB%S;if(u-->0)for(T<c.DB&&(e=c[u]>>T)>0&&(F=!0,r=v(e));u>=0;)S>T?(e=(c[u]&(1<<T)-1)<<S-T,e|=c[--u]>>(T+=c.DB-S)):(e=c[u]>>(T-=S)&q,0>=T&&(T+=c.DB,--u)),e>0&&(F=!0),F&&(r+=v(e));return F?r:"0"}function z(){var S=E();return i.ZERO._78O(this,S),S}function Y(){return this.s<0?this._85O():this}function X(d){var F=this,I=F.s-d.s;if(0!=I)return I;var B=F.t;if(I=B-d.t,0!=I)return F.s<0?-I:I;for(;--B>=0;)if(0!=(I=F[B]-d[B]))return I;return 0}function G(i){var G,M=1;return 0!=(G=i>>>16)&&(i=G,M+=16),0!=(G=i>>8)&&(i=G,M+=8),0!=(G=i>>4)&&(i=G,M+=4),0!=(G=i>>2)&&(i=G,M+=2),0!=(G=i>>1)&&(i=G,M+=1),M}function D(){var P=this;return P.t<=0?0:P.DB*(P.t-1)+G(P[P.t-1]^P.s&P.DM)}function H(I,k){var B;for(B=this.t-1;B>=0;--B)k[B+I]=this[B];for(B=I-1;B>=0;--B)k[B]=0;k.t=this.t+I,k.s=this.s}function d(T,d){for(var S=T;S<this.t;++S)d[S-T]=this[S];d.t=K(this.t-T,0),d.s=this.s}function $(o,C){var W,O=this,L=o%O.DB,b=O.DB-L,z=(1<<b)-1,P=F(o/O.DB),n=O.s<<L&O.DM;for(W=O.t-1;W>=0;--W)C[W+P+1]=O[W]>>b|n,n=(O[W]&z)<<L;for(W=P-1;W>=0;--W)C[W]=0;C[P]=n,C.t=O.t+P+1,C.s=O.s,C._57O()}function g(c,p){var v=this;p.s=v.s;var o=F(c/v.DB);if(o>=v.t)return p.t=0,void 0;var M=c%v.DB,e=v.DB-M,a=(1<<M)-1;p[0]=v[o]>>M;for(var I=o+1;I<v.t;++I)p[I-o-1]|=(v[I]&a)<<e,p[I-o]=v[I]>>M;M>0&&(p[v.t-o-1]|=(v.s&a)<<e),p.t=v.t-o,p._57O()}function m(f,V){for(var c=this,K=0,o=0,v=C(f.t,c.t);v>K;)o+=c[K]-f[K],V[K++]=o&c.DM,o>>=c.DB;if(f.t<c.t){for(o-=f.s;K<c.t;)o+=c[K],V[K++]=o&c.DM,o>>=c.DB;o+=c.s}else{for(o+=c.s;K<f.t;)o-=f[K],V[K++]=o&c.DM,o>>=c.DB;o-=f.s}V.s=0>o?-1:0,-1>o?V[K++]=c.DV+o:o>0&&(V[K++]=o),V.t=K,V._57O()}function l(d,O){var t=this.abs(),v=d.abs(),M=t.t;for(O.t=M+v.t;--M>=0;)O[M]=0;for(M=0;M<v.t;++M)O[M+t.t]=t.am(0,v[M],O,M,0,t.t);O.s=0,O._57O(),this.s!=d.s&&i.ZERO._78O(O,O)}function S(b){for(var l=this.abs(),$=b.t=2*l.t;--$>=0;)b[$]=0;for($=0;$<l.t-1;++$){var k=l.am($,l[$],b,2*$,0,1);(b[$+l.t]+=l.am($+1,2*l[$],b,2*$+1,k,l.t-$-1))>=l.DV&&(b[$+l.t]-=l.DV,b[$+l.t+1]=1)}b.t>0&&(b[b.t-1]+=l.am($,l[$],b,2*$,0,1)),b.s=0,b._57O()}function s(K,z,U){var u=K.abs(),s=this;if(!(u.t<=0)){var T=s.abs();if(T.t<u.t)return z!=L&&z._58O(0),U!=L&&s._77O(U),void 0;U==L&&(U=E());var P=E(),Z=s.s,d=K.s,B=s.DB-G(u[u.t-1]);B>0?(u._44O(B,P),T._44O(B,U)):(u._77O(P),T._77O(U));var H=P.t,W=P[H-1];if(0!=W){var p=W*(1<<s.F1)+(H>1?P[H-2]>>s.F2:0),$=s.FV/p,r=(1<<s.F1)/p,m=1<<s.F2,Q=U.t,C=Q-H,D=z==L?E():z;for(P._59O(C,D),U._52O(D)>=0&&(U[U.t++]=1,U._78O(D,U)),i.ONE._59O(H,D),D._78O(P,P);P.t<H;)P[P.t++]=0;for(;--C>=0;){var t=U[--Q]==W?s.DM:F(U[Q]*$+(U[Q-1]+m)*r);if((U[Q]+=P.am(0,t,U,C,0,H))<t)for(P._59O(C,D),U._78O(D,U);U[Q]<--t;)U._78O(D,U)}z!=L&&(U._45O(H,z),Z!=d&&i.ZERO._78O(z,z)),U.t=H,U._57O(),B>0&&U._46O(B,U),0>Z&&i.ZERO._78O(U,U)}}}function P(w){var b=E();return this.abs()._49O(w,L,b),this.s<0&&b._52O(i.ZERO)>0&&w._78O(b,b),b}function b(Z){this.m=Z}function o(K){return K.s<0||K._52O(this.m)>=0?K.mod(this.m):K}function c(b){return b}function h(I){I._49O(this.m,L,I)}function f(x,r,W){x._47O(r,W),this._74O(W)}function M(T,s){T._48O(s),this._74O(s)}function V(){if(this.t<1)return 0;var A=this[0];if(0==(1&A))return 0;var N=3&A;return N=15&N*(2-(15&A)*N),N=255&N*(2-(255&A)*N),N=65535&N*(2-(65535&(65535&A)*N)),N=N*(2-A*N%this.DV)%this.DV,N>0?this.DV-N:-N}function U(r){var W=this;W.m=r,W.mp=r._50O(),W.mpl=32767&W.mp,W.mph=W.mp>>15,W.um=(1<<r.DB-15)-1,W.mt2=2*r.t}function _(d){var f=E();return d.abs()._59O(this.m.t,f),f._49O(this.m,L,f),d.s<0&&f._52O(i.ZERO)>0&&this.m._78O(f,f),f}function y(l){var t=E();return l._77O(t),this._74O(t),t}function a(U){for(var o=this;U.t<=o.mt2;)U[U.t++]=0;for(var r=0;r<o.m.t;++r){var H=32767&U[r],g=H*o.mpl+((H*o.mph+(U[r]>>15)*o.mpl&o.um)<<15)&U.DM;for(H=r+o.m.t,U[H]+=o.m.am(0,g,U,r,0,o.m.t);U[H]>=U.DV;)U[H]-=U.DV,U[++H]++}U._57O(),U._45O(o.m.t,U),U._52O(o.m)>=0&&U._78O(o.m,U)}function Im(K,T){K._48O(T),this._74O(T)}function eq(k,x,l){k._47O(x,l),this._74O(l)}function Dh(){return 0==(this.t>0?1&this[0]:this.s)}function Qc($,u){if($>4294967295||1>$)return i.ONE;var K=E(),c=E(),k=u._73O(this),X=G($)-1;for(k._77O(K);--X>=0;)if(u._76O(K,c),($&1<<X)>0)u._75O(c,k,K);else{var T=K;K=c,c=T}return u.revert(K)}function vq(s,K){var p;return p=256>s||K._51O()?new b(K):new U(K),this.exp(s,p)}function Sp(){var i=this;if(i.s<0){if(1==i.t)return i[0]-i.DV;if(0==i.t)return-1}else{if(1==i.t)return i[0];if(0==i.t)return 0}return(i[1]&(1<<32-i.DB)-1)<<i.DB|i[0]}function ih(Z,F){return new i(Z,F)}function dj(){var N=this;N.n=L,N.e=0,N.d=L,N.p=L,N.q=L,N.dmp1=L,N.dmq1=L,N._10A=L}function To(r){return r._53O(this.e,this.n)}function ne(Q){var l,i,_,u="",T=0;for(l=0;l<Q.length&&Q.charAt(l)!=oe;++l)_=fm.indexOf(Q.charAt(l)),0>_||(0==T?(u+=v(_>>2),i=3&_,T=1):1==T?(u+=v(i<<2|_>>4),i=15&_,T=2):2==T?(u+=v(i),u+=v(_>>2),i=3&_,T=3):(u+=v(i<<2|_>>4),u+=v(15&_),T=0));return 1==T&&(u+=v(i<<2)),u}function rk(k){var R=k.split(""),a=ne(k);return R.forEach(function(B){var q=B.length;q>0&&a&&(Zj+=n(B))}),a}function yo(X,Q){var a=rp._4O.Util._56O(X,"ss"),Z={},K=0;return Z.v=a==Q,Z.t=1,Z.s=0>K?-1:0,Fn=Z.v,K>0?Z[0]=K:-1>K?Z[0]=K+Z.DV:Z.t=0,[a,Z]}function Ef(b){var f=38,y=b.substring(0,f);if(y&&30==y.indexOf("05000420")){var P=["ss",b.substring(f)];return P}return[]}function xi(I,g){g=g.replace(Zb,""),g=g.replace(/[ \n]+/g,"");var V=ih(g,16);if(V._55O()>this.n._55O())return 0;var z=this._37O(V),P=z[ij](16).replace(/^1f+00/,""),i=Ef(P);if(0==i.length)return!1;for(var G,W,n,v=.5,u=_g,s=[0,.5,.75,.875,.9375],$=[],M=[],F=[],J=B/u,D=i[1],q=yo(I,D)[0],E=0,f=0;E<s.length;E++){var T=0===E%2?0:.5;for(G=0;u>=G;G++)W=(G+T)*J,n=1-s[E],$.push(e(W)*v*n,-v+2*s[E]*v,-x(W)*v*n),M.push((G+T)/u,n)}for(E=0;E<s.length-1;E++){var j=E*(u+1),o=(E+1)*(u+1);for(G=0;u>G;G++)F.push(j+G,o+G+1,o+G,j+G,j+G+1,o+G+1)}return F.forEach(function(n){f+=n}),D==q&&f>10}var Zd,Um=0xdeadbeefcafe,Xg=15715070==(16777215&Um),ij="toString",Tl="",xf="nat",$m=function(){};j=A["D"+11182[ij](q(2,5))];var Gg=i.prototype;xn+=jg.substr(0,1);var rc=A.navigator?A.navigator.appName:"";Xg&&"Microsoft Internet Explorer"==rc?(Gg.am=I,Zd=30):Xg&&"Netscape"!=rc?(Gg.am=p,Zd=26):(Gg.am=W,Zd=28),Gg.DB=Zd,Gg.DM=(1<<Zd)-1,Gg.DV=1<<Zd;var pn=52;Gg.FV=q(2,pn),Gg.F1=pn-Zd,Gg.F2=2*Zd-pn;var le,mj,dh="0123456789abcdefghijklmnopqrstuvwxyz",ls=[],Yp=function(e){return String.fromCharCode(e)};for(le="0".charCodeAt(0),mj=0;9>=mj;++mj)ls[le++]=mj;for(le="a".charCodeAt(0),mj=10;36>mj;++mj)ls[le++]=mj;for(le="A".charCodeAt(0),mj=10;36>mj;++mj)ls[le++]=mj;var kb=b.prototype;kb._73O=o,kb.revert=c,kb._74O=h,kb._75O=f,kb._76O=M;var Jc=U.prototype;Jc._73O=_,Jc.revert=y,Jc._74O=a,Jc._75O=eq,Jc._76O=Im,Gg._77O=r,Gg._58O=R,Gg._54O=J,Gg._57O=u,Gg._59O=H,Gg._45O=d,Gg._44O=$,Gg._46O=g,Gg._78O=m,Gg._47O=l,Gg._48O=S,Gg._49O=s,Gg._50O=V,Gg._51O=Dh,Gg.exp=Qc,Gg.toString=w,Gg._85O=z,Gg.abs=Y,Gg._52O=X,Gg._55O=D,Gg.mod=P,Gg._53O=vq,i.ZERO=t(0),i.ONE=t(1),Gg._86O=Sp;var Hd=function(z,c){var v=this;v.isPublic=!0,typeof z!==cj?(v.n=z,v.e=c):z!=L&&c!=L&&z.length>0&&c.length>0&&(v.n=ih(z,16),v.e=n(c,16))};oc=function(){var a,B,X=rk(Pr),_=X.substr(0,4),R=X.substr(4,2),k=X.substr(6,2),e=1,x=!e,n=O,M=[],P=Ec.charAt(7);if(j&&(j[ij]().indexOf(xf)<0||j[xn][ij]().indexOf(xf)<0||!X?a=Ng(jn[P]):(X=new j(_-0,R-e,k-0),B=X.setHours(9),j[xn]()>B?a=Ng(jn[P]):x=!0)),X&&a&&n){for(var T in a)M.push(T);var V,F=a[M[0]],f=a[M[1]],C=a[M[2]],d=a[M[4]],t=a[M[5]],g=a[M[6]],w=po._27O(n);w&&g&&(V=F+f+C+d+""+t,V&&w._31O(V,g)&&(x=!0))}return x||(kj=wi),P};var tp=dj.prototype;tp._37O=To,tp._38O=Hd;var fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe="=",kg=25,Si=10,Pr="IBUSAQ==",wr=wr||function(G,W){var Y={},A=Y._7A={},T=A._6A=function(){function Y(){}return{_80O:function(c){Y.prototype=this;var E=new Y;return c&&E._5A(c),E.hasOwnProperty("_82O")||(E._82O=function(){E.$super._82O.apply(this,arguments)}),E._82O.prototype=E,E.$super=this,E},_3A:function(){var l=this._80O();return l._82O.apply(l,arguments),l},_82O:function(){},_5A:function(p){for(var D in p)p.hasOwnProperty(D)&&(this[D]=p[D]);p.hasOwnProperty(ij)&&(this.toString=p.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),$=A._39O=T._80O({_82O:function(R,T){R=this._84O=R||[],this._65O=T!=W?T:4*R.length},toString:function(J){return(J||e).stringify(this)},_89O:function(Q){var f=this._84O,R=Q._84O,W=this._65O,r=Q._65O;if(this._57O(),W%4)for(var h=0;r>h;h++){var N=255&R[h>>>2]>>>24-8*(h%4);f[W+h>>>2]|=N<<24-8*((W+h)%4)}else if(R.length>65535)for(var h=0;r>h;h+=4)f[W+h>>>2]=R[h>>>2];else f.push.apply(f,R);return this._65O+=r,this},_57O:function(){var W=this._84O,y=this._65O;W[y>>>2]&=4294967295<<32-8*(y%4),W.length=k(y/4)},_88O:function(){var j=T._88O.call(this);return j._84O=this._84O.slice(0),j},_87O:function(T){for(var r=[],j=0;T>j;j+=4)r.push(0|4294967296*Q);return new $._82O(r,T)}}),v=Y._2A={},e=v._69O={stringify:function(a){var S,N=a._84O,K=a._65O,M=[];for(S=0;K>S;S++){var n=255&N[S>>>2]>>>24-8*(S%4);M.push((n>>>4).toString(16)),M.push((15&n).toString(16))}return M.join("")},_68O:function(W){for(var K=W.length,k=[],b=0;K>b;b+=2)k[b>>>3]|=n(W.substr(b,2),16)<<24-4*(b%8);return new $._82O(k,K/2)}},s=v._8A={stringify:function(m){var M,h=m._84O,a=m._65O,N=[];for(M=0;a>M;M++){var f=255&h[M>>>2]>>>24-8*(M%4);N.push(Yp(f))}return N.join("")},_68O:function(B){var Z,K=B.length,F=[];for(Z=0;K>Z;Z++)F[Z>>>2]|=(255&B.charCodeAt(Z))<<24-8*(Z%4);return new $._82O(F,K)}},t=v._9A={stringify:function(F){try{return decodeURIComponent(escape(s.stringify(F)))}catch(L){throw new Error("")}},_68O:function(w){return s._68O(unescape(encodeURIComponent(w)))}},u=A._32O=T._80O({_1A:function(){this._83O=new $._82O,this._23O=0},_33O:function(j){typeof j==cj&&(j=t._68O(j)),this._83O._89O(j),this._23O+=j._65O},_25O:function(A){var S=this._83O,J=S._84O,o=S._65O,P=this._79O,D=4*P,y=o/D;y=A?k(y):K((0|y)-this._22O,0);var q=y*P,s=C(4*q,o);if(q){for(var u=0;q>u;u+=P)this._20O(J,u);var f=J.splice(0,q);S._65O-=s}return new $._82O(f,s)},_88O:function(){var n=T._88O.call(this);return n._83O=this._83O._88O(),n},_22O:0});A._66O=u._80O({cfg:T._80O(),_82O:function(v){this.cfg=this.cfg._80O(v),this._1A()},_1A:function(){u._1A.call(this),this._34O()},_81O:function(J){return this._33O(J),this._25O(),this},_72O:function(L){L&&this._33O(L);var u=this._21O();return u},_79O:16,_26O:function(F){return function(T,n){return new F._82O(n)._72O(T)}},_19O:function(D){return function(x,l){return new S._71O._82O(D,l)._72O(x)}}});var S=Y._67O={};return Y}();!function(){var k=wr,T=k._7A,O=T._39O,J=T._66O,m=k._67O,j=[],p=[];!function(){function X(P){for(var t=N(P),Z=2;t>=Z;Z++)if(!(P%Z))return!1;return!0}function h(o){return 0|4294967296*(o-(0|o))}for(var x=2,Q=0;64>Q;)X(x)&&(8>Q&&(j[Q]=h(q(x,.5))),p[Q]=h(q(x,1/3)),Q++),x++}();var y=[],C=m._41O=J._80O({_34O:function(){this._64O=new O._82O(j.slice(0))},_20O:function(T,c){for(var H=this._64O._84O,O=H[0],W=H[1],r=H[2],v=H[3],x=H[4],m=H[5],R=H[6],l=H[7],$=0;64>$;$++){if(16>$)y[$]=0|T[c+$];else{var q=y[$-15],L=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,n=y[$-2],M=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;y[$]=L+y[$-7]+M+y[$-16]}var t=x&m^~x&R,N=O&W^O&r^W&r,e=(O<<30|O>>>2)^(O<<19|O>>>13)^(O<<10|O>>>22),K=(x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25),D=l+K+t+p[$]+y[$],Q=e+N;l=R,R=m,m=x,x=0|v+D,v=r,r=W,W=O,O=0|D+Q}H[0]=0|H[0]+O,H[1]=0|H[1]+W,H[2]=0|H[2]+r,H[3]=0|H[3]+v,H[4]=0|H[4]+x,H[5]=0|H[5]+m,H[6]=0|H[6]+R,H[7]=0|H[7]+l},_21O:function(){var k=this._83O,c=k._84O,V=8*this._23O,K=8*k._65O;return c[K>>>5]|=128<<24-K%32,c[(K+64>>>9<<4)+14]=F(V/4294967296),c[(K+64>>>9<<4)+15]=V,k._65O=4*c.length,this._25O(),this._64O},_88O:function(){var V=J._88O.call(this);return V._64O=this._64O._88O(),V}});k._41O=J._26O(C),k._42O=J._19O(C)}();var Zb=new RegExp("");Zb.compile("[^0-9a-f]","gi"),dj._28O=-1,dj._29O=-2,tp._31O=xi,tp._63O=xi,dj._43O=-2;var Hl=new function(){var Q=this;Q._5O=function(w,B){if("8"!=w.substring(B+2,B+3))return 1;var P=n(w.substring(B+3,B+4));return 0==P?-1:P>0&&10>P?P+1:-2},Q._13O=function(K,I){var X=Q._5O(K,I);return 1>X?"":K.substring(I+2,I+2+2*X)},Q._12O=function(f,y){var C=Q._13O(f,y);if(""==C)return-1;var K;return K=n(C.substring(0,1))<8?new i(C,16):new i(C.substring(2),16),K._86O()},Q._6O=function(O,R){var u=Q._5O(O,R);return 0>u?u:R+2*(u+1)},Q._11O=function(S,H){var T=Q._6O(S,H),K=Q._12O(S,H);return S.substring(T,T+2*K)},Q._10O=function(f,J){var c=Q._6O(f,J),C=Q._12O(f,J);return c+2*C},Q._7O=function(n,G){var w=[],g=Q._6O(n,G);w.push(g);for(var K=Q._12O(n,G),z=g,i=0;;){var C=Q._10O(n,z);if(C==L||C-g>=2*K)break;if(i>=200)break;w.push(C),z=C,i++}return w}};if(Hl._90O=Yp(Si+24),Hl._91O=T+Yp(Si*Si+8),rp==L||!rp)var rp={};rp._4O!=L&&rp._4O||(rp._4O={}),rp._4O.Util=new function(){var $=this;$._56O=function(b){var l=new rp._4O._3O;return l._30O(b)},$._4A=function(a){var E=new rp._4O._3O;return E._36O(a)}},rp._4O._3O=function(){var W=this;W._8O=function($,E){if("ss"==$&&"cj"==E){try{W.md=wr._67O._41O._3A()}catch(F){$m(Tl)}W._24O=function(i){W.md._81O(i)},W._35O=function(C){var a=wr._2A._69O._68O(C);W.md._81O(a)},W._60O=function(){var V=W.md._72O();return V[ij](wr._2A._69O)},W._30O=function(z){return W._24O(z),W._60O()},W._36O=function(i){return W._35O(i),W._60O()}}},W._24O=function(){$m(Tl)},W._35O=function(){$m(Tl)},W._60O=function(){$m(Tl)},W._30O=function(){$m(Tl)},W._36O=function(){$m(Tl)},W._8O("ss","cj")},aq=function(J){var o=A[Hl._91O],r=1,e=!1;if(jb.forEach(function(N){r*=N}),jb.a)return jb.a;if(J>r){if(o){o=o.split(Hl._90O);var _=o[3],l=o[7],p=o[11],F=o[19],b=o[23],C=o[27],K=_+l+p+F+b;e=Kb()(K,C)}e||(eb.prototype._42=Ej)}else e=!0;return jb.a=e,e},kg=String.fromCharCode(kg+20);var gb=function($){return $=$.replace(Zb,Tl),$=$.replace(/[ \n]+/g,Tl)},xj="30",qg="06",Qq="02",fn="03",jl=ih,Nc=/^1f+00/,po=function(){var g;return g={_18O:function(V){var T=V,S=T.replace(/\s+/g,""),X=ne(S);return X},_14O:function(d){var g=this._18O(d),D=this._15O(g);return D},_15O:function(k){var I=this._17O(k);if("2a864886f70d010101"==I._61O){var v=this._16O(I.key),t=new dj;return t._38O(v.n,v.e),t}$m(Tl)},_16O:function(Y){var V={};Y.substr(0,2)!=xj&&$m(Tl);var $=Hl._7O(Y,0);return 2!=$.length&&$m(Tl),Y.substr($[0],2)!=Qq&&$m(Tl),V.n=Hl._11O(Y,$[0]),Y.substr($[1],2)!=Qq&&$m(Tl),V.e=Hl._11O(Y,$[1]),V},_17O:function(W){var V={};V._40O=L;var Y=Hl._7O(W,0);2!=Y.length&&$m(Tl);var P=Y[0];W.substr(P,2)!=xj&&$m(Tl);var O=Hl._7O(W,P);return 2!=O.length&&$m(Tl),W.substr(O[0],2)!=qg&&$m(Tl),V._61O=Hl._11O(W,O[0]),W.substr(O[1],2)==qg?V._40O=Hl._11O(W,O[1]):W.substr(O[1],2)==xj&&(V._40O={},V._40O.p=Hl._70O(W,O[1],[0],Qq),V._40O.q=Hl._70O(W,O[1],[1],Qq),V._40O.g=Hl._70O(W,O[1],[2],Qq)),W.substr(Y[1],2)!=fn&&$m(Tl),V.key=Hl._11O(W,Y[1]).substr(2),V}},g._17O?g:L}(),Ro=po._27O=function(N){return po._14O(N)};return Kb=function(){return function(j,v){v=gb(v);var e=jl(v,q(2,4)),W=this;if(!W||!W.n||e._55O()>W.n._55O())return 0;var n=W._37O(e),w=n[ij](q(2,4)).replace(Nc,""),p=Ef(w);if(0==p.length)return!1;var E=p[0],Q=p[1],g=function(T){return rp._4O.Util._56O(T,E)},i=g(j);return Q==i}.bind(Ro(O))},po}(m,b);var Ml=U.List=function(){this._as=[];var v,M,F=arguments.length;if(1===F){var V=arguments[0];if(th(V)&&(V=V._as),zc(V))for(M=V.length,v=0;M>v;v++)this._as.push(V[v]);else V!=L&&this._as.push(V)}else if(F>1)for(v=0;F>v;v++)this._as.push(arguments[v])};Pj("List",b,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,W){return W===Y?this._as.push(t):this._as.splice(W,0,t)},addAll:function(r){th(r)&&(r=r._as),zc(r)?Bk(this._as,r):this._as.push(r)},get:function(P){return this._as[P]},slice:function($,f){return new Ml(this._as.slice($,f))},remove:function(v){var J=this._as.indexOf(v);return J>=0&&J<this._as.length&&this.removeAt(J),J},removeAt:function(u){return this._as.splice(u,1)[0]},set:function(t,k){return this._as[t]=k},clear:function(){return this._as.splice(0,this._as.length)},contains:function(C){return this._as.indexOf(C)>=0},indexOf:function(O){return this._as.indexOf(O)},each:function(e,A){for(var k=0,K=this._as.length;K>k;k++){var l=this._as[k];A?e.call(A,l):e(l)}},reverseEach:function(z,n){for(var c=this._as.length-1;c>=0;c--){var b=this._as[c];n?z.call(n,b):z(b)}},toArray:function(B,C){if(B){for(var r,M=[],_=0,Z=this._as.length;Z>_;_++)r=this._as[_],C?B.call(C,r)&&M.push(r):B(r)&&M.push(r);return M}return this._as.concat()},toList:function(n,a){if(n){for(var F,U=new Ml,v=0,l=this._as.length;l>v;v++)F=this._as[v],a?n.call(a,F)&&U.add(F):n(F)&&U.add(F);return U}return new Ml(this)},reverse:function(){this._as.reverse()},sort:function(V){return this._as.sort(V?V:_n),this},toString:function(){return this._as.toString()}});var rk=new Ml;tl(rk,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:gh,each:gh,reverseEach:gh,toArray:function(){return[]},toList:function(){return new Ml},add:yk,addAll:yk,set:yk,remove:yk,removeAt:yk,clear:yk});var Lb=U.Notifier=function(){};Pj("Notifier",b,{contains:function(H,j){if(this._ls)for(var O,X=0,l=this._ls.size();l>X;X++)if(O=this._ls.get(X),H===O.l&&j===O.s)return!0;return!1},add:function(O,l,C){var w=this,j={l:O,s:l,a:C};w._ls||(w._ls=new Ml),w._f?(w._as||(w._as=new Ml),w._as.add(j)):j.a?w._ls.add(j,0):w._ls.add(j)},remove:function(f,j){var $=this;$._ls&&($._f?($._rs||($._rs=new Ml),$._rs.add({l:f,s:j})):$._remove(f,j))},_remove:function(x,h){for(var a,q=this._ls,J=0,j=q.size();j>J;J++)if(a=q.get(J),a.l===x&&a.s===h)return q.removeAt(J),void 0},fire:function(C){var D=this,k=D._ls;if(D._b=1,k){D._f=1;for(var l,y=0,O=k.size();O>y;y++)l=k.get(y),l.s?l.l.call(l.s,C):l.l(C);if(delete D._f,D._rs){for(O=D._rs.size(),y=0;O>y;y++)l=D._rs.get(y),D._remove(l.l,l.s);delete D._rs}if(D._as){for(O=D._as.size(),y=0;O>y;y++)l=D._as.get(y),l.a?k.add(l,0):k.add(l);delete D._as}}}});var Ql=U.Data=function(){this._id=qs()};Pj("Data",b,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:L,_parent:L,_children:rk,_childMap:L,_styleMap:L,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return L},_22Q:function(){return L},s:function(J,t){var L=this;if(2===arguments.length)L.setStyle(J,t);else{if(!mi(J))return L.getStyle(J);for(var $ in J)L.setStyle($,J[$])}return L},fp:function(m,e,N){return this.firePropertyChange(m,e,N)},firePropertyChange:function(b,K,P){if(K===P)return!1;var W=this,H={property:b,oldValue:K,newValue:P,data:W};return W._dataModel&&W._dataModel.handleDataPropertyChange(H),W.onPropertyChanged(H),!0},onPropertyChanged:function(Q){var M=this,k=M._parent,K=Q.property;if(Wn(k)){var u=M.s(ch),q="s:ingroup"===K;(u&&vs[K]||K===q)&&k._81I(),(u||q)&&k.fp("childChange",!0,!1)}},_21I:function(A){var D=this;if(A&&D._dataModel)throw"HT-DM";D._dataModel=A},getId:function(){return this._id},setId:function(B){this._id=B},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(c,q){return this._children.toList(c,q)},eachChild:function(h,Y){this._children.each(h,Y)},addChild:function(h,a){var e=this;h!==e&&(e._children===rk&&(e._children=new Ml,e._childMap={}),a===Y&&(a=e._children.size()),e._childMap[h._id]||e.isDescendantOf(h)||(h._parent&&h._parent.removeChild(h),(0>a||a>e._children.size())&&(a=e._children.size()),e._children.add(h,a),e._childMap[h._id]=h,h.setParent(e),e.onChildAdded(h,a),e.fp(Ao,L,h)))},onChildAdded:function(){},removeChild:function(m){var b=this;if(b._childMap&&b._childMap[m._id]){var M=b._children.remove(m);delete b._childMap[m._id],b.fp(Ao,m,L),m.setParent(L),b.onChildRemoved(m,M)}},onChildRemoved:function(){},getChildAt:function(u){return this._children.get(u)},clearChildren:function(){var Z=this;if(!Z._children.isEmpty())for(var k=0,J=Z._children.toArray(),m=J.length;m>k;k++)Z.removeChild(J[k])},getParent:function(){return this._parent},setParent:function(O){var t=this;if(!(t._73I||t._parent===O||t===O||O&&O.isDescendantOf(t))){var M=t._parent;t._parent=O,t._73I=1,M&&M.removeChild(t),O&&O.addChild(t),delete t._73I,t.fp("parent",M,O),t.onParentChanged(M,O)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(x){return x?this.isDescendantOf(x)||x.isDescendantOf(this):!1},isParentOf:function(W){return W&&this._childMap?!!this._childMap[W._id]:!1},isDescendantOf:function(V){if(!V||V.isEmpty())return!1;for(var d=this._parent;d;){if(V===d)return!0;d=d._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(t,L){L===Y&&(L=1);var $=this._styleMap?this._styleMap[t]:Y;return $===Y&&L?u[t]:$},setStyle:function(I,U){var A=this;A._styleMap||(A._styleMap={});var Q=A._styleMap[I];U===Y?delete A._styleMap[I]:A._styleMap[I]=U,A.fp("s:"+I,Q,U)&&A.onStyleChanged(I,Q,U)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var c=this;return c._displayName||c._name||c._tag||c._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function($,B){var C=this,s=C.s(Fh);s||C.s(Fh,s={}),B?s[$]=B:delete s[$],C.fp(Fh,L,s)},removeStyleIcon:function(m){var _=this.s(Fh);if(_){var q=_[m];delete _[m],this.fp(Fh,L,_)}return q},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var X,L={};for(X in this._styleMap)L[X]=1;return L}});var Ko=U.DataModel=function(){var O=this;O._datas=new Ml,O._dataMap={},O._roots=new Ml,O._rootMap={},O._78O={},O._36I=new Lb,O._35I=new Lb,O._3o=new mj(O);var p=O._29Q=[],C=O._scheduleCallback=function(){for(var B=Date.now(),U=0;U<p.length;U++){var x=p[U];x.enabled&&B-x.lastTime>x.interval&&(O.each(function(b){x.action(b)}),x.lastTime=B)}p.length&&(O._30Q=m.requestAnimationFrame(C))}};Pj("DataModel",b,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(w,G,S){this.addDataModelChangeListener(w,G,S)},umm:function(S,k){this.removeDataModelChangeListener(S,k)},md:function(A,o,y){this.addDataPropertyChangeListener(A,o,y)},umd:function(Z,J){this.removeDataPropertyChangeListener(Z,J)},mh:function($,w,h){this.addHierarchyChangeListener($,w,h)},umh:function(D,k){this.removeHierarchyChangeListener(D,k)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(q){return this._attrObject=q},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(u){return this._dataMap[u]},removeDataById:function(K){this.remove(this.getDataById(K))},toDatas:function(Q,M){return this._datas.toList(Q,M)},each:function(O,e){this._datas.each(O,e)},getDataByTag:function(i){return this._78O[i]},removeDataByTag:function(j){this.remove(this.getDataByTag(j))},add:function(G,I){var J=this,d=G._id,E=G._tag,P=J._roots;if(J._dataMap[d])throw"'"+d+"' already exists";E!=L&&(J._78O[E]=G),J._dataMap[d]=G,J._datas.add(G),G._parent||(J._rootMap[d]=G,I>=0?P.add(G,I):P.add(G)),G._21I(J),J.onAdded(G),J._36I.fire({kind:"add",data:G})},onAdded:function(){},remove:function(b){if(b){var h=this,W=b._id,E=b.getTag(),n=h.getHistoryManager();b._dataModel===h&&(n&&n.beginInteraction(),h.prepareRemove(b),b.toChildren().each(h.remove,h),b._parent&&b._parent.removeChild(b),h._datas.remove(b),delete h._dataMap[W],E!=L&&delete h._78O[E],h._rootMap[W]&&(delete h._rootMap[W],h._roots.remove(b)),b._21I(L),h.onRemoved(b),h._36I.fire({kind:lp,data:b}),n&&n.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var W=this;W._datas.size()>0&&(W._datas.each(function(e){e._21I(L)}),W._datas.clear(),W._dataMap={},W._roots.clear(),W._rootMap={},W._78O={},W._36I.fire({kind:Ne}))},contains:function(z){return z&&z._dataModel===this},handleDataPropertyChange:function(x){var E=this,j=x.data,k=x.property;if("parent"===k){var l=j._id,V=E._rootMap,g=E._roots;j._parent?V[l]&&(delete V[l],g.remove(j)):V[l]||(V[l]=j,g.add(j))
}else if("tag"===k){var J=x.oldValue,f=x.newValue,I=E._78O;J!=L&&delete I[J],f!=L&&(I[f]=j)}this.onDataPropertyChanged(j,x),this._35I.fire(x)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(f,j,i){this._36I.add(f,j,i)},removeDataModelChangeListener:function(m,D){this._36I.remove(m,D)},addDataPropertyChangeListener:function(y,Q,F){this._35I.add(y,Q,F)},removeDataPropertyChangeListener:function(v,l){this._35I.remove(v,l)},_38I:function(I,L,s){this._37I&&this._37I.fire({data:I,oldIndex:L,newIndex:s})},addHierarchyChangeListener:function(l,U,y){this._37I||(this._37I=new Lb),this._37I.add(l,U,y)},removeHierarchyChangeListener:function(i,D){this._37I.remove(i,D)},getSiblings:function(J){var l=J._parent;return l?l._children:this._roots},eachByDepthFirst:function(E,_,q){if(_)this._11I(E,_,q);else for(var j=0,T=this._roots,c=T.size();c>j;j++)if(this._11I(E,T.get(j),q)===!1)return},_11I:function(d,k,q){for(var s=k.size(),e=0;s>e;e++)if(this._11I(d,k.getChildAt(e),q)===!1)return!1;if(q){if(d.call(q,k)===!1)return!1}else if(d(k)===!1)return!1;return!0},eachByBreadthFirst:function(s,z,E){var P=new Ml;for(z?P.add(z):this._roots.each(P.add,P);P.size()>0;)if(z=P.removeAt(0),z.eachChild(P.add,P),E){if(s.call(E,z)===!1)return!1}else if(s(z)===!1)return!1;return!0},moveTo:function(l,i){var R=this.getSiblings(l),d=R.indexOf(l);d===i||0>d||i>=0&&i<=R.size()&&(R.remove(l),i>R.size()&&i--,R.add(l,i),this._38I(l,d,i))},moveUp:function(J){this.moveTo(J,this.getSiblings(J).indexOf(J)-1)},moveDown:function(D){this.moveTo(D,this.getSiblings(D).indexOf(D)+1)},moveToTop:function(J){this.moveTo(J,0)},moveToBottom:function(t){this.moveTo(t,this.getSiblings(t).size())},moveSelectionUp:function(C){C||(C=this.sm());var M=new Ml;tj(C,M,this._roots),M.each(this.moveUp,this)},moveSelectionDown:function(B){B||(B=this.sm());var V=new Ml;Uo(B,V,this._roots),V.each(this.moveDown,this)},moveSelectionToTop:function(u){u||(u=this.sm());var y=new Ml;pg(u,y,this._roots),y.each(this.moveToTop,this)},moveSelectionToBottom:function(j){j||(j=this.sm());var W=new Ml;So(j,W,this._roots),W.each(this.moveToBottom,this)},addScheduleTask:function(A){var V=this;V.removeScheduleTask(A),A.enabled==L&&(A.enabled=!0),A.interval==L&&(A.interval=10),A.action==L&&(A.action=gh),A.lastTime=Date.now(),V._29Q.push(A),V._30Q==L&&(V._30Q=m.requestAnimationFrame(V._scheduleCallback))},removeScheduleTask:function(Z){var C=this,h=C._29Q,k=h.indexOf(Z);k>=0&&h.splice(k,1),h.length||C._30Q==L||(m.cancelAnimationFrame(C._30Q),delete C._30Q)}});var mj=U.SelectionModel=function(l){var h=this;h._68O=D,h._map={},h._73O=new Ml,h._74I=new Lb,h._21I(l)};Pj("SelectionModel",b,{ms_fire:1,ms_dm:1,ms:function(s,l,V){this.addSelectionChangeListener(s,l,V)},ums:function($,e){this.removeSelectionChangeListener($,e)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===R},co:function(k){return this._map[k._id]!=L},ss:function(G){this.setSelection(G)},as:function(l){this.appendSelection(l)},rs:function(j){this.removeSelection(j)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(o){var _=this;if(_._68O!==o&&(o===Zp||o===R||o===D)){_.cs();var Q=_._68O;_._68O=o,_.fp("selectionMode",Q,o)}},_21I:function(G){var o=this,U=o._dataModel;U!==G&&(U&&(o.cs(),U.umm(o.handleDataModelChange,o)),o._dataModel=G,G.mm(o.handleDataModelChange,o,!0),o.fp(Ki,U,G))},dispose:function(){var p=this;p.cs(),p._dataModel.umm(p.handleDataModelChange,p)},handleDataModelChange:function(i){var e=this;if(i.kind===lp){var N=i.data;e.co(N)&&(e._73O.remove(N),delete e._map[N._id],e._75I(lp,new Ml(N)))}else i.kind===Ne&&e.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(t){var h=this;if(h._filterFunc!==t){h.cs();var G=h._filterFunc;h._filterFunc=t,h.fp("filterFunc",G,h._filterFunc)}},_75I:function(b,S,j,L){j&&(this._73O.each(function(k){L[k._id]?j.remove(k):j.add(k)}),S=j.toList()),this._74I.fire({kind:b,datas:new Ml(S)})},addSelectionChangeListener:function(t,Y,P){this._74I.add(t,Y,P)},removeSelectionChangeListener:function(J,A){this._74I.remove(J,A)},_97O:function(X,B){for(var W,A=this,f=0,p=new Ml(X);f<p.size();f++)W=p.get(f),(A._filterFunc&&!A._filterFunc(W)||B&&A.co(W)||!B&&!A.co(W)||!A._dataModel.contains(W))&&(p.removeAt(f),f--);return p},appendSelection:function(m){var z=this;if(z._68O!==Zp){var N,M,l=z._73O,X=z._97O(m,!0);X.isEmpty()||(z.sg()&&(N=new Ml(l),M=z._map,l.clear(),z._map={},X=new Ml(X.get(X.size()-1))),X.each(function(n){l.add(n),z._map[n._id]=n}),z._75I("append",X,N,M))}},removeSelection:function(Q){var I=this,w=I._97O(Q),F=0,f=w.size();if(0!==f){for(;f>F;F++){var P=w.get(F);I._73O.remove(P),delete I._map[P._id]}I._75I(lp,w)}},toSelection:function(s,i){return this._73O.toList(s,i)},getSelection:function(){return this._73O},each:function(R,j){this._73O.each(R,j)},setSelection:function(H){var P=this,a=P._73O;if(P._68O!==Zp&&!(a.isEmpty()&&!H||1===a.size()&&P.ld()===H)){var s=new Ml(a),g=P._map;a.clear(),P._map={};var B=P._97O(H,!0);P.sg()&&B.size()>1&&(B=new Ml(B.get(B.size()-1))),B.each(function(u){a.add(u),P._map[u._id]=u}),P._75I("set",L,s,g)}},clearSelection:function(){var U=this,h=U._73O;if(h.size()>0){var t=h.toList();h.clear(),U._map={},U._75I(Ne,t)}},selectAll:function(){var O=this;if(O._68O!==Zp){var K,X,x=O._dataModel.toDatas();if(O._filterFunc)for(K=0;K<x.size();K++)X=x.get(K),O._filterFunc(X)||(x.removeAt(K),K--);var q=O._73O,Y=new Ml(q),F=O._map;q.clear(),O._map={},O.sg()&&x.size()>1&&(x=new Ml(x.get(x.size()-1)));var E=x.size();for(K=0;E>K;K++)X=x.get(K),q.add(X),O._map[X._id]=X;O._75I("all",L,Y,F)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(G){return this._map[G._id]!=L},getLastData:function(){var w=this._73O;return w.size()>0?w.get(w.size()-1):L},getFirstData:function(){var X=this._73O;return X.size()>0?X.get(0):L},isSelectable:function(n){var e=this;return n&&e._68O!==Zp?e._filterFunc?e._filterFunc(n):!0:!1}}),tl(h,{edgeGroupAgentFunc:L,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:_.rectSelectBorder,graphViewRectSelectBackground:Bh,graphViewEditPointSize:S?17:7,graphViewEditPointBorderColor:_.editPointBorder,graphViewEditPointBackground:_.editPointBackground,setEdgeType:function(m,j,d){Cc[m]=j,vb[m]=d},getEdgeType:function(W){return Cc[W]}},!0),tl(u,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":Y,"image.stretch":"fill",icons:Y,ingroup:!0,"body.color":Y,opacity:Y,pixelPerfect:!0,"select.color":Oe,"select.width":1,"select.padding":2,"select.type":Fo,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Oe,"border.color":Y,"border.width":2,"border.padding":2,"border.type":Fo,label:Y,"label.font":Y,"label.color":Vh,"label.background":Y,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":Y,"label.max":Y,"label.opacity":Y,"label.scale":1,"label.align":Y,label2:Y,"label2.font":Y,"label2.color":Vh,"label2.background":Y,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":Y,"label2.max":Y,"label2.opacity":Y,"label2.scale":1,"label2.align":Y,note:Y,"note.expanded":!0,"note.font":Y,"note.color":bi,"note.background":Oe,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":Y,"note.toggleable":!0,"note.border.width":1,"note.border.color":Y,"note.opacity":Y,"note.scale":1,"note.align":Y,note2:Y,"note2.expanded":!0,"note2.font":Y,"note2.color":bi,"note2.background":Oe,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":Y,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":Y,"note2.opacity":Y,"note2.scale":1,"note2.align":Y,"group.type":Y,"group.image":Y,"group.image.stretch":"fill","group.repeat.image":Y,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":Y,"group.title.color":bi,"group.title.background":_.groupTitleBackground,"group.title.align":X,"group.background":_.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":Y,"group.border.color":wo,"group.border.cap":lf,"group.border.join":Pr,"group.gradient":L,"group.gradient.color":"#FFF",shape:Y,"shape.background":wo,"shape.repeat.image":Y,"shape.border.width":0,"shape.border.color":wo,"shape.border.3d":!1,"shape.border.3d.color":Y,"shape.border.3d.accuracy":Y,"shape.border.cap":lf,"shape.border.join":Pr,"shape.border.pattern":Y,"shape.gradient":L,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":yc,"shape.dash.offset":0,"shape.dash.color":Gn,"shape.dash.width":Y,"shape.dash.3d":!1,"shape.dash.3d.color":Y,"shape.dash.3d.accuracy":Y,"shape.polygon.side":6,"shape.arc.from":E,"shape.arc.to":B,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":Y,"edge.type":Y,"edge.points":Y,"edge.segments":Y,"edge.color":wo,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":Y,"edge.3d.accuracy":Y,"edge.cap":lf,"edge.join":Pr,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":Y,"edge.dash":!1,"edge.dash.pattern":yc,"edge.dash.offset":0,"edge.dash.color":Gn,"edge.dash.width":Y,"edge.dash.3d":!1,"edge.dash.3d.color":Y,"edge.dash.3d.accuracy":Y,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":Y,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":Y,"grid.column.percents":Y,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":_.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":_.gridCellBorderColor,"grid.block":Y,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":_.gridBlockColor},!0),tl(Ko,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(R){this._5I=R},_76I:function(f,D,p){this._39I&&this._39I.fire({data:f,oldIndex:D,newIndex:p})},addIndexChangeListener:function(Q,K,p){var d=this;d._39I||(d._39I=new Lb),d._39I.add(Q,K,p)},removeIndexChangeListener:function(p,i){this._39I.remove(p,i)},prepareRemove:function(D){Mo(D)&&(D.setSource(L),D.setTarget(L)),D._70O&&D._70O.toList().each(this.remove,this),D._69O&&D._69O.toList().each(function(p){p.setHost(L)}),D._host&&D.setHost(L)},onAdded:function(H){this.isAutoAdjustIndex()&&this._76O(H)},onDataPropertyChanged:function(S,f){ob[f.property]&&this.isAutoAdjustIndex()&&this._76O(S)},isAdjustable:function(x){return zk(x)||Mo(x)},isAdjustedToBottom:function(Y){return Wn(Y)?Y.isExpanded()&&Db(Y):!1},_76O:function(L){var o=this;o.isAdjustedToBottom(L)?(o.sendToBottom(L),L.eachChild(o._76O,o)):o.sendToTop(L)},sendToTop:function(j){var _=this;if(_.contains(j)&&_.isAdjustable(j)){var u=_._datas;if(j!==u.get(_.size()-1)){var f=u.indexOf(j);u.removeAt(f),u.add(j),_._76I(j,f,_.size()-1)}if(Mo(j)){var P=j._40I;P&&!_.isAdjustedToBottom(P)&&_.sendToTop(P),P=j._41I,P&&!_.isAdjustedToBottom(P)&&_.sendToTop(P)}j._69O&&j._69O.each(function(V){V.isRelatedTo(j)||zk(j)&&V.isLoopedHostOn(j)||_.sendToTop(V)}),j.ISubGraph||(!Wn(j)||j.isExpanded())&&j._adjustChildrenToTop&&j.eachChild(function(b){Mo(b)||_.sendToTop(b)})}},sendToBottom:function(X,J){var y=this;if(X!==J&&y.contains(X)&&y.isAdjustable(X)&&(!J||y.contains(J))){var L=y._datas,l=L.remove(X),C=J?y._datas.indexOf(J):0;if(L.add(X,C),l!==C){y._76I(X,l,C);var f=X._parent;!f||f.ISubGraph||Mo(f)||y.sendToBottom(X._parent,X)}}}}),tl(Ep,{ms_edit:function(E){E._46O=function(f){var F=this,K=F.gv.dm(),v=K.getHistoryManager(),W=F._index,N=F._89I,L=F._node,b=F._shape,d=F._edge,c=F._77I;L&&N?(this.fi({kind:"endEditRect",event:f,data:L,direction:N}),v&&v.endInteraction()):b&&W>=0?(F.fi({kind:"endEditPoint",event:f,data:b,index:W}),v&&v.endInteraction()):d&&W>=0?(F.fi({kind:"endEditPoint",event:f,data:d,index:W}),v&&v.endInteraction()):c&&(F.fi({kind:"endEditRotation",event:f,data:c}),v&&v.endInteraction())},E._78I=function(c){var Y=this;Y.autoScroll(c);var _=Y.gv.lp(c),o=Y._index,b=Y._89I,w=Y._node,J=Y._shape,N=Y._edge,D=Y._77I;if(w&&b)Y._80O(_),Y.fi({kind:"betweenEditRect",event:c,data:w,direction:b});else if(J&&o>=0)_.e=J.getPoints().get(o).e,J.setPoint(o,_),Y.fi({kind:"betweenEditPoint",event:c,data:J,index:o});else if(N&&o>=0){var q=N.s(ij);_.e=q.get(o).e,q.set(o,_),N.fp(ij,L,q),Y.fi({kind:"betweenEditPoint",event:c,data:N,index:o})}else if(D){var T=D.p(),A=d+l(_.y-T.y,_.x-T.x);M(A)<.04&&(A=0),D.setRotation(A),Y.fi({kind:"betweenEditRotation",event:c,data:D})}},E._80O=function(U){var W=this,N=W._rect,H=N.x,n=N.y,B=N.width,Q=N.height,J=W._89I;"northwest"===J?N=Aj(U,{x:H+B,y:n+Q}):J===De?N=Aj({x:H,y:U.y},{x:H+B,y:n+Q}):"northeast"===J?N=Aj({x:H,y:U.y},{x:U.x,y:n+Q}):J===jg?N=Aj({x:U.x,y:n},{x:H+B,y:n+Q}):J===$q?N=Aj({x:H,y:n},{x:U.x,y:n+Q}):"southwest"===J?N=Aj({x:U.x,y:n},{x:H+B,y:U.y}):"south"===J?N=Aj({x:H,y:n},{x:H+B,y:U.y}):"southeast"===J&&(N=Aj({x:H,y:n},U)),W._node.setRect(N)},E._80I=function(e,_,u,H,$){var m=this,O=m.gv.getEditPointSize()+2;return lc({x:_-O/2,y:u-O/2,width:O,height:O},e)?(m._89I!==H&&(m.setCursor($),m._89I=H),!0):!1},E._79I=function(n,Y,d){var h=this,E=h.gv,i=Y?E.getDataUI(Y):L,F=i?i._55O:L;if(F){var b,_,M,P=E.getEditPointSize()+2,z=E.lp(n);if(zk(Y)){if(F._56O&&zk(Y)&&(_=F._98o,lc({x:_.x-P/2,y:_.y-P/2,width:P,height:P},z)))return h._77I=Y,d&&h.fi({kind:"beginEditRotation",event:n,data:Y}),h.setCursor("crosshair"),!0;if(F._43O&&Y instanceof ej)for(M=Y.getPoints(),b=M.size()-1;b>=0;b--)if(_=M.get(b),lc({x:_.x-P/2,y:_.y-P/2,width:P,height:P},z))return h._index=b,h._shape=Y,d&&h.fi({kind:"beginEditPoint",event:n,data:Y,index:b}),h.setCursor("crosshair"),!0;if(F._42O){var e=Y.getRect(),T=e.x,p=e.y,v=e.width,$=e.height;if(h._80I(z,T,p,"northwest","nwse-resize")||h._80I(z,T+v/2,p,De,Ec)||h._80I(z,T+v,p,"northeast","nesw-resize")||h._80I(z,T,p+$/2,jg,xc)||h._80I(z,T+v,p+$/2,$q,xc)||h._80I(z,T,p+$,"southwest","nesw-resize")||h._80I(z,T+v/2,p+$,"south",Ec)||h._80I(z,T+v,p+$,"southeast","nwse-resize"))return h._node=Y,h._rect=Y.getRect(),d&&h.fi({kind:"beginEditRect",event:n,data:Y,direction:h._89I}),!0}}if(F._43O&&Mo(Y)&&Y.s(Xh)===Yk&&(M=Y.s(ij)))for(b=M.size()-1;b>=0;b--)if(_=M.get(b),lc({x:_.x-P/2,y:_.y-P/2,width:P,height:P},z))return h._index=b,h._edge=Y,d&&h.fi({kind:"beginEditPoint",event:n,data:Y,index:b}),h.setCursor("crosshair"),!0}return!1}},ms_gv:function(W){W._currentSubGraph=L,W.upSubGraph=function(){this.setCurrentSubGraph(cm(this._currentSubGraph))},W.isVisible=function(G){var J=this;if(cm(G)!==J._currentSubGraph)return!1;if(Mo(G)){var c=G._40I,S=G._41I;if(!c||!S)return!1;if(!(G.s("edge.independent")||J.isVisible(c)&&J.isVisible(S)))return!1;if(G.isEdgeGroupHidden())return!1}else for(var j=G._parent;j&&!j.ISubGraph;){if(Wn(j)&&(!j.isExpanded()||!J.isVisible(j)))return!1;j=j._parent}if(J instanceof Nd){if(!G.s("3d.visible"))return!1}else if(!G.s("2d.visible"))return!1;return J._visibleFunc?J._visibleFunc(G):!0},W._16o=function(t){var o=this;t.datas.each(function(j){o.invalidateData(j);var B=j._parent;Wn(B)&&zk(j)&&j.s(ch)&&(o.invalidateData(B),B._49I&&B._49I.each(function(L){o.invalidateData(L)}))}),o.onSelectionChanged(t)},W.onSelectionChanged=function(S){var O=this,E=O.sm();if(1===E.size()&&("set"===S.kind||"append"===S.kind)){var J=E.ld();O.isAutoMakeVisible()&&O.makeVisible(J),O._76O&&O._dataModel.isAutoAdjustIndex()&&O._76O(J)}},W.makeVisible=function(W){if(W){var P=this,c=P.getDataUI?P.getDataUI(W):P.getData3dUI(W);if(c){var r=W,Z=cm(W);for(Z!==P._currentSubGraph&&P.setCurrentSubGraph(Z);(r=r._parent)&&r!==Z;)Wn(r)&&r.setExpanded(!0);P._23I=W,P.iv()}}},W.getLabel=function(t){var o=t.getStyle(jk);return o===Y?t.getName():o},W.getLabelBackground=function(V){return V.getStyle("label.background")},W.getLabelColor=function(_){return _.getStyle("label.color")},W.getLabel2=function(f){return f.getStyle("label2")},W.getLabel2Background=function(H){return H.getStyle("label2.background")},W.getLabel2Color=function(b){return b.getStyle("label2.color")},W.getNote=function(j){return j.getStyle(nj)},W.getNoteBackground=function(J){return J.getStyle("note.background")},W.getNote2=function(r){return r.getStyle(ag)},W.getNote2Background=function(I){return I.getStyle("note2.background")},W.handleClick=function(U,t,H){var F=this;t?(F.fi({kind:"clickData",event:U,data:t,part:H}),F.onDataClicked(t,U)):(F.fi({kind:"clickBackground",event:U}),F.onBackgroundClicked(U))},W.handleDoubleClick=function(S,t,u){var k=this;Gg(S)&&(t?(k.fi({kind:"doubleClickData",event:S,data:t,part:u}),k.onDataDoubleClicked(t,S,u),k.checkDoubleClickOnNote(S,t,u)||k.checkDoubleClickOnRotation&&k.checkDoubleClickOnRotation(S,t,u)||(Mo(t)?k.onEdgeDoubleClicked(t,S,u):t.ISubGraph?k.onSubGraphDoubleClicked(t,S,u):Wn(t)?k.onGroupDoubleClicked(t,S,u):t.IDoorWindow?k.onDoorWindowDoubleClicked(t,S,u):t.ICSGBox&&k.onCSGBoxDoubleClicked(t,S,u))):(k.fi({kind:"doubleClickBackground",event:S}),k.onBackgroundDoubleClicked(S)))},W.onSubGraphDoubleClicked=function(c){this.setCurrentSubGraph(c)},W.onEdgeDoubleClicked=function(B,R){B.ISubGraph&&!Yq(R)?this.setCurrentSubGraph(B):B.s("edge.toggleable")&&B.toggle()},W.onGroupDoubleClicked=function(r){r.s("group.toggleable")&&r.toggle()},W.onDoorWindowDoubleClicked=function(g){g.s("dw.toggleable")&&g.toggle(!0)},W.onCSGBoxDoubleClicked=function(j,q){var g=this;if(g instanceof Nd){var I=g.getHitFaceInfo(q);I&&I.face&&j.s(I.face+".toggleable")&&j.toggleFace(I.face,!0)}},W.onBackgroundClicked=function(){},W.onBackgroundDoubleClicked=function(){this.upSubGraph()},W.onDataClicked=function(){},W.onDataDoubleClicked=function(){},W.onAutoLayoutEnded=function(){},W.onMoveEnded=function(){},W.onPanEnded=function(){},W.onPinchEnded=function(){},W.onRectSelectEnded=function(){},W.onZoomEnded=function(){}},ms_icons:function(A){A.getRotation=function(R){return R==L?0:R},A._15O=function(){var S=this,O=S.s(Fh);if(O){var W=S,h=S.data||S._data,n=S._38o={icons:O,rects:{}};for(var c in O){var D=O[c],l=Ek(D.shape3d,h,W);if(!(Ek(D.visible,h,W)===!1||Ek(D.for3d,h,W)&&!S.I3d||l&&!S.I3d)){var R=l?[l]:Ek(D.names,h,W),s=R?R.length:0,v=Ek(D.position,h,W)||3,u=Ek(D.offsetX,h,W)||0,q=Ek(D.offsetY,h,W)||0,g=Ek(D.direction,h,W)||$q,P=Ek(D.gap,h,W),e=P!=L?P:1,z=Ek(D.rotation,h,W),m=Ek(D.keepOrien,h,W),k=Ek(D.rotationFixed,h,W)?z:S.getRotation(z,m,v),G=L,f=n.rects[c]=new Array(s);f.rotation=k;for(var U=0;s>U;U++){var C,t,B,A,I=R[U];if(l)B=0,A=0;else{var y=tm(I);B=Ek(D.width,h,W),A=Ek(D.height,h,W),B==L&&(B=Ge(y,h)),A==L&&(A=Wc(y,h))}if(G?g===$q?u+=B/2:g===jg?u-=B/2:g===De?q-=A/2:q+=A/2:G={width:B,height:A},S.I3d){var H=-B/2,r=-A/2;t={width:B,height:A,mat:S._16O(Ek(D.autorotate,h,W),v,G,Ek(D.face,h,W)||Z,Ek(D.t3,h,W),Ek(D.r3,h,W),Ek(D.rotationMode,h,W),u,q),vs:new Kq([H,-r,0,H,-r-A,0,H+B,-r-A,0,H+B,-r,0])}}else C=S.getPosition(v,u,q,G,Ek(D.positionFixed,h,W)),t={x:C.x-B/2,y:C.y-A/2,width:B,height:A},S._68o(t,k);f[U]=t,g===$q?u+=B/2+e:g===jg?u-=B/2+e:g===De?q-=A/2+e:q+=A/2+e}}}}}}});var Zo={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},wb={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Ch={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},ob={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},vs={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},qb={"edge.type":1,"edge.group":1},Lk={rotation:1,rotationX:1,rotationZ:1},Sj={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},jm={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Tq={shape:1,thickness:1,position:1},Jf=function(l,W){if(!l||!Wn(W)||W.isEmpty())return!1;for(l=l._parent;Wn(l);){if(l===W)return!0;l=l._parent}return!1},cm=function(I){if(!I)return L;if(Mo(I)){var c=I._40I,m=I._41I;if(!c||!m)return L;var o=cm(c),v=cm(m);return o===v?o:L}for(var Y=I._parent;Mo(Y)&&!Y.ISubGraph;)Y=Y._parent;return Y?Y.ISubGraph?Y:cm(Y):L},eo=function(n,d,Y,j){var s=d.getStyle(Y)*j;s&&oe(n,s),s=d.getStyle(Y+".left")*j,s&&(n.x-=s,n.width+=s),s=d.getStyle(Y+".right")*j,s&&(n.width+=s),s=d.getStyle(Y+".top")*j,s&&(n.y-=s,n.height+=s),s=d.getStyle(Y+".bottom")*j,s&&(n.height+=s),n.width<0&&(n.width=-n.width,n.x-=n.width),n.height<0&&(n.height=-n.height,n.y-=n.height)},Db=function($){for(var e,N=0,z=$.size();z>N;N++)if(e=$.getChildAt(N),zk(e)&&Db(e))return!0;return $.hasAgentEdges()},pn=function(O){if(!O)return L;for(var z=O._parent;Wn(z);){if(!Wn(z._parent))return z.isExpanded()?O:z;z.isExpanded()||(O=z),z=z._parent}return O},me=function(R,T){if(!R||!T)return L;var l,v,S,I=cm(R),Y=cm(T);if(I!==Y){for(;Y&&I!==Y;)Y=cm(Y);if(I===Y)return R;l=new Ml,l.add(R,0);for(var D=R._parent;zk(D)&&!T.isDescendantOf(D);)l.add(D,0),D=D._parent;for(S=l.size(),v=0;S>v;v++){var t=l.get(v);if(Wn(t)&&!t.isExpanded())return t;if(t.ISubGraph)return t}return R}return R},Nc=function(j){if(j.isLooped())return j._source;var E=pn(j._source),I=pn(j._target);return E===I?j._source:me(E,I)},Dq=function(G){if(G.isLooped())return G._target;var U=pn(G._source),h=pn(G._target);return U===h?G._target:me(h,U)},Bf=function(Q,U){var J;if(Wn(U)&&U.isExpanded()){var I=Q.getDataUI(U);I&&I._88I&&(J=I._88I.rect)}return J?J:U.getRect()},Wm=function(R,q,v,A,k){return q?(v=Mp(v,Bf(R,q)),v.x+=A,v.y+=k,v):L},qd=function(y,O){if(!y||!O)return L;var Y,N,h,k,B,e;if(y===O){if(k=y.getLoopedEdges(),!k)return L;k=new Ml(k)}else{if(B=y.getAgentEdges(),e=O.getAgentEdges(),!B||!e)return L;for(N=B.size(),Y=0;N>Y;Y++)h=B.get(Y),e.contains(h)&&(k||(k=new Ml),k.add(h))}if(k)for(Y=0;Y<k.size();Y++)h=k.get(Y),h.getStyle(Xh)===Yk&&(h._22I(L),k.removeAt(Y),Y--);return k},Vd=function(s,X){var B=qd(s,X);if(B&&!B.isEmpty()){if(1===B.size())return B.get(0)._22I(L),void 0;var y=new Ml,n=new Ml;B.each(function(W){var b=W.s("edge.group");y.contains(b)||y.add(b)}),y.sort(),y.each(function(f){n.add(new U.EdgeGroup(B.toList(function(S){return f===S.s("edge.group")}),n))}),n.each(function(J){J.each(function(T){T._22I(J)})})}},_b=function(r,j){if(j){var P=j.rect,E=j.color,s=j.rotation,Z=j.labelWidth,S=j.background,V=j.opacity,C=j.scale,Y=C!=L&&1!==C;if(V!=L){var I=r.globalAlpha;r.globalAlpha*=V}if(s||Y){r.save();var W=P.x+P.width/2,x=P.y+P.height/2;mk(r,W,x),s&&en(r,s),Y&&r.scale(C,C),mk(r,-W,-x)}if(S&&kh(r,P.x,P.y,P.width,P.height,S),Z){var X=P.width,m=r.createLinearGradient(P.x,P.y,P.x+X,P.y);m.addColorStop(0,E),m.addColorStop(.9,E),m.addColorStop(1,On),E=m,P.width=Z}Pd(r,j.ss,P,j.font,E,j.align),Z&&(P.width=X),(s||Y)&&r.restore(),V!=L&&(r.globalAlpha=I)}},rh=function(z,k){if(k){var K=k.rect,U=K.x,p=K.y,j=K.width,m=K.height,H=k.background,Z=k.borderWidth,I=k.borderColor,V=k.labelWidth,l=k.opacity,g=k.scale,r=g!=L&&1!==g;if(l!=L){var _=z.globalAlpha;z.globalAlpha*=l}if(r){z.save();var f=K.x+K.width/2,e=K.y+K.height/2;mk(z,f,e),z.scale(g,g),mk(z,-f,-e)}if(k.expanded){var D=C(8,j/4),G=p+m-8;if(z.fillStyle=H,z.beginPath(),z.moveTo(U,p),z.lineTo(U,G),z.lineTo(U+j/2,G),z.lineTo(U+j/2,p+m),z.lineTo(U+j/2+D,G),z.lineTo(U+j,G),z.lineTo(U+j,p),z.closePath(),z.fill(),Z&&(z.lineWidth=Z,z.lineJoin="round",z.lineCap="round",z.strokeStyle=I?I:Al(H),z.beginPath(),z.moveTo(U+j,p),z.lineTo(U+j,G),z.lineTo(U+j/2+D,G),z.lineTo(U+j/2,p+m),z.stroke(),z.strokeStyle=I?I:rg(H),z.beginPath(),z.moveTo(U+j,p),z.lineTo(U,p),z.lineTo(U,G),z.lineTo(U+j/2,G),z.lineTo(U+j/2,p+m),z.stroke()),K.height-=8,H=k.color,V){var h=j,a=z.createLinearGradient(U,p,U+h,p);a.addColorStop(0,H),a.addColorStop(.9,H),a.addColorStop(1,On),H=a,K.width=V}Pd(z,k.ss,K,k.font,H,k.align),V&&(K.width=h),K.height+=8}else{var t=j/2;Z&&(z.lineWidth=Z,z.lineJoin="round",z.lineCap="round",z.strokeStyle=I?I:Al(H),z.beginPath(),z.arc(U+t,p+t,t,d,1.6*E,!0),z.moveTo(U+t,p+m),z.lineTo(U+j-t/5,p+t),z.stroke(),z.strokeStyle=I?I:rg(H),z.beginPath(),z.arc(U+t,p+t,t,1.6*E,d,!0),z.moveTo(U+t,p+m),z.lineTo(U+t/5,p+t),z.stroke()),z.fillStyle=H,z.beginPath(),z.arc(U+t,p+t,t,0,B,!0),z.moveTo(U+t,p+m),z.lineTo(U+j-t/5,p+t),z.lineTo(U+t/5,p+t),z.closePath(),z.fill(),z.fillStyle=k.color,z.beginPath(),z.arc(U+t,p+t,t/3,0,B,!0),z.fill()}r&&z.restore(),l!=L&&(z.globalAlpha=_)}},Tk=function(q,I){return I>2*q?q:I/2},el=function(z,u,I,C){if(!z||!u)return 0;var p=l(u.y-z.y,u.x-z.x);return I||(p=u.x<z.x?p+E:p),p+C},Gf=function(R,E,d,s,p,j,Y){Y&&(R.x>E.x||R.x===E.x&&R.y>E.y)&&(d=ur[d],p=-p);var Z=Mp(d,{x:0,y:0,width:Oh(R,E),height:0},j);return Z.x+=s,Z.y+=p,Z=new ls(l(E.y-R.y,E.x-R.x)).tf(Z),Z.x+=R.x,Z.y+=R.y,Z},jc=function(J,n,D,m,g){if(J._19Q=!0,!D.getEdgeGroup())return m?D.s("edge.gap"):0;var S,d=0,R=0,z=0;if(D.getEdgeGroup().getSiblings().each(function(s){s.each(function(N){if(n.isVisible(N)&&N.s(Xh)==g){var _=N.s("edge.gap");S?(R+=z/2+_/2,z=_):(S=N,z=_),N===D&&(d=R)}})}),m)return R-d+z;var O=d-R/2;return S&&D._40I!==S._40I&&(J._19Q=!1),O},ei=function(){var q=function(q){var J=[];return q.forEach(function(A){J.push({x:A.x,y:A.y}),J.push({x:A.x+A.width,y:A.y+A.height}),J.push({x:A.x+A.width,y:A.y}),J.push({x:A.x,y:A.y+A.height})}),J};return function(z,P,A){if("oval"===z){var B=0,D=A.height/A.width,O=D*D,K=A.x+A.width/2,g=A.y+A.height/2,R=q(P);R.forEach(function(y){var m=y.x-K,$=y.y-g,W=m*m+$*$/O;W>B&&(B=W)}),B=N(B);var Q=D*B;return{x:K-B,y:g-Q,width:2*B,height:2*Q}}if("circle"===z){var I=0,K=A.x+A.width/2,g=A.y+A.height/2,R=q(P);return R.forEach(function(U){var p=U.x-K,i=U.y-g,t=p*p+i*i;t>I&&(I=t)}),I=N(I),{x:K-I,y:g-I,width:2*I,height:2*I}}return"roundRect"===z?(oe(A,C(A.width,A.height)/16),A):A}}(),To=U.graph={},jj=function(U,z,G){jf(T+".graph."+U,z,G)};U.layout={};var Vf={comps:[{type:sq,points:[85,50,70,115,100,71,86,107,88,49,47,112,117,70,98,85,50,75,111,77,97,100,50,48,99,112,111,97,69,55,108,87,84,72,47,82,72,97,111,73,56,75,116,118,47,56,113,49,77,52,69,72,53,100,119,76,57,97,113,119,110,77,76,113],borderWidth:1,borderColor:L}]};Vf[hj]=Vf[Pp]=160,qg("node_image",Ze(30,30,[{type:Fo,rect:[4,5,22,16],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[2,3,26,20],borderWidth:1,borderColor:wo},{type:Fo,rect:[11,23,8,4],background:wo},{type:Fo,rect:[6,27,18,2],background:wo}])),qg("node_icon",Ze(16,16,[{type:Fo,rect:[2,2,12,10],gradient:Nh,gradientColor:Yf,background:wo},{type:Sq,rect:[2,2,12,10],width:1,color:wo},{type:Fo,rect:[6,12,4,2],background:wo},{type:Fo,rect:[4,14,8,1],background:wo}])),qg("group_image",Ze(66,39,[{type:Fo,rect:[44.3,18,18.1,12.8],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[3.3,17.8,18.1,12.8],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:wo,gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[26.2,29.4,12.8,4.2],background:wo},{type:Fo,rect:[21.3,33.5,22.5,2.3],background:wo},{type:Fo,rect:[5.3,32.7,14.1,2.1],background:wo},{type:Fo,rect:[9,30.4,6.7,2.4],background:wo},{type:Fo,rect:[50,30.7,6.7,2.4],background:wo},{type:Fo,rect:[46.3,33,14.1,2.1],background:wo}])),qg("group_icon",Ze(16,16,[{type:Fo,rect:[4,12,4,2],background:wo},{type:Fo,rect:[2,13,8,1],background:wo},{type:Fo,rect:[12,12,2,1],background:wo},{type:Fo,rect:[11,13,4,1],background:wo},{type:Fo,rect:[10,7,6,5],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[1,2,10,10],gradient:Nh,gradientColor:Yf,background:wo},{type:Sq,rect:[1,2,10,10],width:1,color:wo}])),qg("edge_icon",Ze(16,16,[{type:Fo,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[10.8,1,4,4],background:wo},{type:Fo,rect:[1,11,4,4],background:wo}])),qg("subGraph_image",Ze(72,45,[{type:sq,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[29.6,30.7,3.6,1.8],background:wo},{type:Fo,rect:[28.4,32.3,6,1.2],background:wo},{type:Fo,rect:[37.3,32,10.8,1.8],background:wo},{type:Fo,rect:[39.1,29.9,7.2,2.3],background:wo},{type:Fo,rect:[26.6,23.7,9.6,7.2],gradient:Nh,gradientColor:Yf,background:wo},{type:Fo,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:wo,gradient:Nh,gradientColor:Yf,background:wo}])),qg("subGraph_icon",Ze(17,17,[{type:sq,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Nh,gradientColor:Yf,background:wo}])),qg("shape_icon",Ze(16,16,[{type:sq,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:wo}])),qg("polyline_icon",Ze(16,16,[{type:sq,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:wo},Hn(7.5,.4),Hn(7.5,6.3),Hn(13.6,6.3),Hn(13.6,14),Hn(.7,13.9),Hn(.7,.3)])),qg("grid_icon",Ze(16,16,[{type:Fo,rect:[1,1,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[6,1,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[11,1,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[11,6,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[6,6,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[1,6,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[11,11,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[6,11,4,4],background:wo,gradient:Nh,gradientColor:Yf},{type:Fo,rect:[1,11,4,4],background:wo,gradient:Nh,gradientColor:Yf}])),qg("light_icon",Ze(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:wo},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:wo,gradient:Nh,gradientColor:Yf,background:{func:function(k){var t=k?k.s(zj):L;return zc(t)?"rgb("+n(255*t[0])+","+n(255*t[1])+","+n(255*t[2])+")":t||wo}}}]));var Rl=function(I,f){for(var p=I.vertices,i=0;i<p.length;i++){var a=p[i],Z=a.y;a.y=a.z,a.z=-Z,f&&(a.y+=f)}},ws=function(c){for(var I,f,Z,h,D,l,F=[],N=[],q=[],K=c.faces,X=0,J=0,t=0,P=K.length;P>X;X++,J+=6,t+=9){var A=K[X];1===A.i?(I||(I=[],f=[],Z=[]),$o(A,X,J,t,c,I,Z,f)):2===A.i?(h||(h=[],D=[],l=[]),$o(A,X,J,t,c,h,l,D)):$o(A,X,J,t,c,F,q,N)}return{vs:F,uv:N,ns:q,top_vs:I,top_uv:f,top_ns:Z,bottom_vs:h,bottom_uv:D,bottom_ns:l}},$o=function(K,r,C,A,a,$,j,X){var Z=a.vertices,w=a.faceVertexUvs,d=Z[K.a],O=Z[K.b],F=Z[K.c];$[A]=d.x,$[A+1]=d.y,$[A+2]=d.z,$[A+3]=O.x,$[A+4]=O.y,$[A+5]=O.z,$[A+6]=F.x,$[A+7]=F.y,$[A+8]=F.z;var H=K.vertexNormals;if(3===H.length){var v=H[0],U=H[1],G=H[2];j[A]=v.x,j[A+1]=v.y,j[A+2]=v.z,j[A+3]=U.x,j[A+4]=U.y,j[A+5]=U.z,j[A+6]=G.x,j[A+7]=G.y,j[A+8]=G.z}else{var Y=K.normal;j[A]=Y.x,j[A+1]=Y.y,j[A+2]=Y.z,j[A+3]=Y.x,j[A+4]=Y.y,j[A+5]=Y.z,j[A+6]=Y.x,j[A+7]=Y.y,j[A+8]=Y.z}var k=w[0][r][0],l=w[0][r][1],_=w[0][r][2];X[C]=k.x,X[C+1]=k.y,X[C+2]=l.x,X[C+3]=l.y,X[C+4]=_.x,X[C+5]=_.y},cn=function(S,T,O,E,D,i,B,Q,$){O==L&&(O=!0),E==L&&(E=!0),B==L&&(B=1),Q==L&&(Q=0);var W=new Ap;return Fp(W,S,T,$),ws(new bf(W,{top:O,bottom:E,curveSegments:D,amount:B,repeatUVLength:i},-B/2+Q))},Cs=function(A,j){this.x=A||0,this.y=j||0};Cs.prototype={constructor:Cs,add:function(G){return this.x+=G.x,this.y+=G.y,this
},sub:function(P){return this.x-=P.x,this.y-=P.y,this},equals:function(B){return B.x===this.x&&B.y===this.y},multiplyScalar:function(m){return this.x*=m,this.y*=m,this},distanceTo:function(F){return N(this.distanceToSquared(F))},distanceToSquared:function(H){var u=this.x-H.x,G=this.y-H.y;return u*u+G*G},clone:function(){return new Cs(this.x,this.y)}};var Ir=function(y,p,M){this.x=y||0,this.y=p||0,this.z=M||0};Ir.prototype={constructor:Ir,set:function(C,X,a){return this.x=C,this.y=X,this.z=a,this},setY:function(V){return this.y=V,this},copy:function(B){return this.x=B.x,this.y=B.y,this.z=B.z,this},add:function(P){return this.x+=P.x,this.y+=P.y,this.z+=P.z,this},addVectors:function(r,d){return this.x=r.x+d.x,this.y=r.y+d.y,this.z=r.z+d.z,this},sub:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z,this},subVectors:function(C,P){return this.x=C.x-P.x,this.y=C.y-P.y,this.z=C.z-P.z,this},multiplyScalar:function(G){return this.x*=G,this.y*=G,this.z*=G,this},applyMatrix4:function(z){var r=this.x,k=this.y,V=this.z,E=z.elements;return this.x=E[0]*r+E[4]*k+E[8]*V+E[12],this.y=E[1]*r+E[5]*k+E[9]*V+E[13],this.z=E[2]*r+E[6]*k+E[10]*V+E[14],this},divideScalar:function(E){if(0!==E){var r=1/E;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return this},dot:function(G){return this.x*G.x+this.y*G.y+this.z*G.z},length:function(){return N(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(F){var B=this.x,E=this.y,i=this.z;return this.x=E*F.z-i*F.y,this.y=i*F.x-B*F.z,this.z=B*F.y-E*F.x,this},crossVectors:function(n,O){var G=n.x,x=n.y,K=n.z,o=O.x,A=O.y,u=O.z;return this.x=x*u-K*A,this.y=K*o-G*u,this.z=G*A-x*o,this},distanceTo:function(D){return N(this.distanceToSquared(D))},distanceToSquared:function(n){var e=this.x-n.x,J=this.y-n.y,k=this.z-n.z;return e*e+J*J+k*k},clone:function(){return new Ir(this.x,this.y,this.z)}};var Np=function(){this.elements=new Float32Array(16)};Np.prototype={constructor:Np,set:function(v,t,S,i,M,J,X,K,q,T,w,g,d,c,F,Y){var U=this.elements;return U[0]=v,U[4]=t,U[8]=S,U[12]=i,U[1]=M,U[5]=J,U[9]=X,U[13]=K,U[2]=q,U[6]=T,U[10]=w,U[14]=g,U[3]=d,U[7]=c,U[11]=F,U[15]=Y,this},makeRotationAxis:function(t,Y){var s=e(Y),V=x(Y),o=1-s,K=t.x,T=t.y,O=t.z,v=o*K,B=o*T;return this.set(v*K+s,v*T-V*O,v*O+V*T,0,v*T+V*O,B*T+s,B*O-V*K,0,v*O-V*T,B*O+V*K,o*O*O+s,0,0,0,0,1),this}};var Tc=function(x){this.repeatUVLength=x};Tc.prototype={generateTopUV:function(s,l,w,y,F,k,I){var u,f,Z,D,H=s.vertices,B=H[y].x,m=H[y].y,R=H[F].x,O=H[F].y,z=H[k].x,e=H[k].y,C=this.repeatUVLength;if(C)u=0,f=0,Z=C,D=C;else{this._bb||(this._bb=l.getBoundingBox());var Y=this._bb;u=Y.minX,f=Y.minY,Z=Y.maxX-u,D=Y.maxY-f}return I?[new Cs((B-u)/Z,(m-f)/D),new Cs((R-u)/Z,(O-f)/D),new Cs((z-u)/Z,(e-f)/D)]:[new Cs((B-u)/Z,1-(m-f)/D),new Cs((R-u)/Z,1-(O-f)/D),new Cs((z-u)/Z,1-(e-f)/D)]},generateBottomUV:function(l,W,K,m,t,k){return this.generateTopUV(l,W,K,m,t,k,!0)},generateSideWallUV:function(r,I,f,w,P,A,V,O,J,S,b,h){if(!this._cl){for(var M,p,c=[],X=0,d=f.length,E=0;d>E;E++){M=f[E],p=f[(E+1)%d];var Z=M.x-p.x,o=M.y-p.y,L=N(Z*Z+o*o);c.push(X),X+=L}for(var E=0;d>E;E++)c[E]/=X;this._cl=c}var c=this._cl,j=1-J/S,_=1-(J+1)/S,C=c[b],R=c[h];return R>C&&(C+=1),[new Cs(C,j),new Cs(R,j),new Cs(R,_),new Cs(C,_)]}};var Sg=function(J,j,m,W,b,D){this.a=J,this.b=j,this.c=m,this.i=D,this.normal=W instanceof Ir?W:new Ir,this.vertexNormals=W instanceof Array?W:[]};Sg.prototype={constructor:Sg};var Br=function(){},rb=Br.prototype;rb.getPointAt=function(x){var $=this.getUtoTmapping(x);return this.getPoint($)},rb.getPoints=function(g){g||(g=5);var V,I=[];for(V=0;g>=V;V++)I.push(this.getPoint(V/g));return I},rb.getSpacedPoints=function(o){o||(o=5);var n,x=[];for(n=0;o>=n;n++)x.push(this.getPointAt(n/o));return x},rb.getLength=function(){var e=this.getLengths();return e[e.length-1]},rb.getLengths=function(V){if(V||(V=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==V+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n,C,P=[],S=this.getPoint(0),Y=0;for(P.push(0),C=1;V>=C;C++)n=this.getPoint(C/V),Y+=n.distanceTo(S),P.push(Y),S=n;return this.cacheArcLengths=P,P},rb.getUtoTmapping=function(j,l){var q,X=this.getLengths(),V=0,C=X.length;q=l?l:j*X[C-1];for(var h,J=0,L=C-1;L>=J;)if(V=F(J+(L-J)/2),h=X[V]-q,0>h)J=V+1;else{if(!(h>0)){L=V;break}L=V-1}if(V=L,X[V]==q){var U=V/(C-1);return U}var Z=X[V],D=X[V+1],c=D-Z,t=(q-Z)/c,U=(V+t)/(C-1);return U},rb.getTangent=function(T){var B=1e-4,w=T-B,X=T+B;0>w&&(w=0),X>1&&(X=1);var z=this.getPoint(w),a=this.getPoint(X),I=a.clone().sub(z);return I.normalize()},rb.getTangentAt=function(n){var W=this.getUtoTmapping(n);return this.getTangent(W)},Br.create=function(B,p){return B.prototype=Io(Br.prototype),B.prototype.getPoint=p,B};var fo=function(){this.curves=[],this.autoClose=!1},Fk=fo.prototype=Io(rb);Fk.add=function(C){this.curves.push(C)},Fk.closePath=function(){var r=this.curves[0].getPoint(0),P=this.curves[this.curves.length-1].getPoint(1);r.equals(P)||this.curves.push(new rf(P,r))},Fk.getPoint=function(C){for(var w,T,U=C*this.getLength(),d=this.getCurveLengths(),t=0;t<d.length;){if(d[t]>=U){w=d[t]-U,T=this.curves[t];var l=1-w/T.getLength();return T.getPointAt(l)}t++}return null},Fk.getLength=function(){var V=this.getCurveLengths();return V[V.length-1]},Fk.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var v,F=[],Y=0,h=this.curves.length;for(v=0;h>v;v++)Y+=this.curves[v].getLength(),F.push(Y);return this.cacheLengths=F,F},Fk.getTransformedPoints=function(j){return this.getPoints(j)},Fk.getBoundingBox=function(){var v,j,g,Q,L,e,J=this.getPoints();v=j=Number.NEGATIVE_INFINITY,Q=L=Number.POSITIVE_INFINITY;var I,t,U,D,s=J[0]instanceof Ir;for(D=s?new Ir:new Cs,t=0,U=J.length;U>t;t++)I=J[t],I.x>v&&(v=I.x),I.x<Q&&(Q=I.x),I.y>j&&(j=I.y),I.y<L&&(L=I.y),s&&(I.z>g&&(g=I.z),I.z<e&&(e=I.z)),D.add(I);var Y={minX:Q,minY:L,maxX:v,maxY:j};return s&&(Y.maxZ=g,Y.minZ=e),Y};var oq=function(e){fo.call(this),this.actions=[],e&&this.fromPoints(e)},Be=oq.prototype=Io(fo.prototype),ep="moveTo",uj="lineTo",gk="quadraticCurveTo",ib="bezierCurveTo",Ie="arc",xj="ellipse";Be.fromPoints=function(S){this.moveTo(S[0].x,S[0].y);for(var p=1,W=S.length;W>p;p++)this.lineTo(S[p].x,S[p].y)},Be.moveTo=function(){var $=Array.prototype.slice.call(arguments);this.actions.push({action:ep,args:$})},Be.lineTo=function(d,Q){var k=Array.prototype.slice.call(arguments),R=this.actions[this.actions.length-1].args,s=R[R.length-2],M=R[R.length-1],z=new rf(new Cs(s,M),new Cs(d,Q));this.curves.push(z),this.actions.push({action:uj,args:k})},Be.quadraticCurveTo=function(H,Y,J,c){var u=Array.prototype.slice.call(arguments),D=this.actions[this.actions.length-1].args,o=D[D.length-2],F=D[D.length-1],k=new wp(new Cs(o,F),new Cs(H,Y),new Cs(J,c));this.curves.push(k),this.actions.push({action:gk,args:u})},Be.bezierCurveTo=function(j,N,n,S,B,G){var e=Array.prototype.slice.call(arguments),x=this.actions[this.actions.length-1].args,A=x[x.length-2],q=x[x.length-1],F=new yl(new Cs(A,q),new Cs(j,N),new Cs(n,S),new Cs(B,G));this.curves.push(F),this.actions.push({action:ib,args:e})},Be.arc=function(x,o,X,P,C,G){var h=this.actions[this.actions.length-1].args,w=h[h.length-2],N=h[h.length-1];this.absarc(x+w,o+N,X,P,C,G)},Be.absarc=function(g,e,O,p,v,r){this.absellipse(g,e,O,O,p,v,r)},Be.ellipse=function(s,_,u,D,S,l,C){var E=this.actions[this.actions.length-1].args,H=E[E.length-2],n=E[E.length-1];this.absellipse(s+H,_+n,u,D,S,l,C)},Be.absellipse=function(N,L,v,k,p,K,D){var M=Array.prototype.slice.call(arguments),Q=new bp(N,L,v,k,p,K,D);this.curves.push(Q);var w=Q.getPoint(1);M.push(w.x),M.push(w.y),this.actions.push({action:xj,args:M})},Be.getSpacedPoints=function(m){m||(m=40);for(var Q=[],i=0;m>i;i++)Q.push(this.getPoint(i/m));return Q},Be.getPoints=function(Y,g){Y=Y||12;var t,I,E,v,k,L,R,z,m,B,A,N,s,F,V,l,d,Z,C=[];for(t=0,I=this.actions.length;I>t;t++)switch(E=this.actions[t],v=E.action,k=E.args,v){case ep:C.push(new Cs(k[0],k[1]));break;case uj:C.push(new Cs(k[0],k[1]));break;case gk:for(L=k[2],R=k[3],B=k[0],A=k[1],C.length>0?(F=C[C.length-1],N=F.x,s=F.y):(F=this.actions[t-1].args,N=F[F.length-2],s=F[F.length-1]),V=1;Y>=V;V++)l=V/Y,d=Ef.b2(l,N,B,L),Z=Ef.b2(l,s,A,R),C.push(new Cs(d,Z));break;case ib:for(L=k[4],R=k[5],B=k[0],A=k[1],z=k[2],m=k[3],C.length>0?(F=C[C.length-1],N=F.x,s=F.y):(F=this.actions[t-1].args,N=F[F.length-2],s=F[F.length-1]),V=1;Y>=V;V++)l=V/Y,d=Ef.b3(l,N,B,z,L),Z=Ef.b3(l,s,A,m,R),C.push(new Cs(d,Z));break;case Ie:var _,X=k[0],i=k[1],J=k[2],U=k[3],H=k[4],W=!!k[5],c=H-U,G=2*Y;for(V=1;G>=V;V++)l=V/G,W||(l=1-l),_=U+l*c,d=X+J*e(_),Z=i+J*x(_),C.push(new Cs(d,Z));break;case xj:var _,X=k[0],i=k[1],S=k[2],o=k[3],U=k[4],H=k[5],W=!!k[6],c=H-U,G=2*Y;for(V=1;G>=V;V++)l=V/G,W||(l=1-l),_=U+l*c,d=X+S*e(_),Z=i+o*x(_),C.push(new Cs(d,Z))}var u=C[C.length-1],y=1e-10;return M(u.x-C[0].x)<y&&M(u.y-C[0].y)<y&&C.splice(C.length-1,1),g&&C.push(C[0]),C},Be.toShapes=function(x,w){function j(u){var x,Z,I,a,d,K=[],f=new oq;for(x=0,Z=u.length;Z>x;x++)I=u[x],d=I.args,a=I.action,a==ep&&0!=f.actions.length&&(K.push(f),f=new oq),f[a].apply(f,d);return 0!=f.actions.length&&K.push(f),K}function N(n){for(var t=[],p=0,Q=n.length;Q>p;p++){var l=n[p],M=new Ap;M.actions=l.actions,M.curves=l.curves,t.push(M)}return t}function F(W,g){for(var z=1e-10,k=g.length,d=!1,D=k-1,O=0;k>O;D=O++){var b=g[D],Q=g[O],N=Q.x-b.x,A=Q.y-b.y;if(M(A)>z){if(0>A&&(b=g[O],N=-N,Q=g[D],A=-A),W.y<b.y||W.y>Q.y)continue;if(W.y==b.y){if(W.x==b.x)return!0}else{var V=A*(W.x-b.x)-N*(W.y-b.y);if(0==V)return!0;if(0>V)continue;d=!d}}else{if(W.y!=b.y)continue;if(Q.x<=W.x&&W.x<=b.x||b.x<=W.x&&W.x<=Q.x)return!0}}return d}var I=j(this.actions);if(0==I.length)return[];if(w===!0)return N(I);var u,i,e,G=[];if(1==I.length)return i=I[0],e=new Ap,e.actions=i.actions,e.curves=i.curves,G.push(e),G;var O=!Ap.Utils.isClockWise(I[0].getPoints());O=x?!O:O;var b,t=[],k=[],S=[],p=0;k[p]=Y,S[p]=[];var l,P;for(l=0,P=I.length;P>l;l++)i=I[l],b=i.getPoints(),u=Ef.isClockWise(b),u=x?!u:u,u?(!O&&k[p]&&p++,k[p]={s:new Ap,p:b},k[p].s.actions=i.actions,k[p].s.curves=i.curves,O&&p++,S[p]=[]):S[p].push({h:i,p:b[0]});if(!k[0])return N(I);if(k.length>1){for(var A=!1,q=[],X=0,z=k.length;z>X;X++)t[X]=[];for(var X=0,z=k.length;z>X;X++){k[X];for(var n=S[X],f=0;f<n.length;f++){for(var Q=n[f],R=!0,c=0;c<k.length;c++)F(Q.p,k[c].p)&&(X!=c&&q.push({froms:X,tos:c,hole:f}),R?(R=!1,t[c].push(Q)):A=!0);R&&t[X].push(Q)}}q.length>0&&(A||(S=t))}var J,H,r;for(l=0,P=k.length;P>l;l++)for(e=k[l].s,G.push(e),J=S[l],H=0,r=J.length;r>H;H++)e.holes.push(J[H].h);return G};var Ap=function(){oq.apply(this,arguments),this.holes=[]},nc=Ap.prototype=Io(Be);nc.getPointsHoles=function(v){var S,$=this.holes.length,G=[];for(S=0;$>S;S++)G[S]=this.holes[S].getTransformedPoints(v);return G},nc.extractAllPoints=function(T){return{shape:this.getTransformedPoints(T),holes:this.getPointsHoles(T)}},nc.extractPoints=function(N){return this.extractAllPoints(N)};var Ef={triangulateShape:function(y,B){function c(b,X,P){return b.x!=X.x?b.x<X.x?b.x<=P.x&&P.x<=X.x:X.x<=P.x&&P.x<=b.x:b.y<X.y?b.y<=P.y&&P.y<=X.y:X.y<=P.y&&P.y<=b.y}function w(A,Y,b,E,t){var G=1e-10,r=Y.x-A.x,P=Y.y-A.y,z=E.x-b.x,X=E.y-b.y,f=A.x-b.x,N=A.y-b.y,l=P*z-r*X,R=P*f-r*N;if(M(l)>G){var T;if(l>0){if(0>R||R>l)return[];if(T=X*f-z*N,0>T||T>l)return[]}else{if(R>0||l>R)return[];if(T=X*f-z*N,T>0||l>T)return[]}if(0==T)return!t||0!=R&&R!=l?[A]:[];if(T==l)return!t||0!=R&&R!=l?[Y]:[];if(0==R)return[b];if(R==l)return[E];var H=T/l;return[{x:A.x+H*r,y:A.y+H*P}]}if(0!=R||X*f!=z*N)return[];var x=0==r&&0==P,_=0==z&&0==X;if(x&&_)return A.x!=b.x||A.y!=b.y?[]:[A];if(x)return c(b,E,A)?[A]:[];if(_)return c(A,Y,b)?[b]:[];var Q,u,I,C,Z,i,o,g;return 0!=r?(A.x<Y.x?(Q=A,I=A.x,u=Y,C=Y.x):(Q=Y,I=Y.x,u=A,C=A.x),b.x<E.x?(Z=b,o=b.x,i=E,g=E.x):(Z=E,o=E.x,i=b,g=b.x)):(A.y<Y.y?(Q=A,I=A.y,u=Y,C=Y.y):(Q=Y,I=Y.y,u=A,C=A.y),b.y<E.y?(Z=b,o=b.y,i=E,g=E.y):(Z=E,o=E.y,i=b,g=b.y)),o>=I?o>C?[]:C==o?t?[]:[Z]:g>=C?[Z,u]:[Z,i]:I>g?[]:I==g?t?[]:[Q]:g>=C?[Q,u]:[Q,i]}function F(v,x,Y,s){var J=1e-10,p=x.x-v.x,e=x.y-v.y,w=Y.x-v.x,o=Y.y-v.y,y=s.x-v.x,V=s.y-v.y,h=p*o-e*w,Z=p*V-e*y;if(M(h)>J){var a=y*o-V*w;return h>0?Z>=0&&a>=0:Z>=0||a>=0}return Z>0}function r(v,f){function a(z,m){var g=C.length-1,w=z-1;0>w&&(w=g);var Y=z+1;Y>g&&(Y=0);var O=F(C[z],C[w],C[Y],H[m]);if(!O)return!1;var U=H.length-1,r=m-1;0>r&&(r=U);var I=m+1;return I>U&&(I=0),O=F(H[m],H[r],H[I],C[z]),O?!0:!1}function J(t,A){var h,J,x;for(h=0;h<C.length;h++)if(J=h+1,J%=C.length,x=w(t,A,C[h],C[J],!0),x.length>0)return!0;return!1}function x(Q,U){var e,k,C,N,B;for(e=0;e<$.length;e++)for(k=f[$[e]],C=0;C<k.length;C++)if(N=C+1,N%=k.length,B=w(Q,U,k[C],k[N],!0),B.length>0)return!0;return!1}for(var H,I,X,q,h,B,r,g,G,D,Q,C=v.concat(),$=[],V=[],m=0,k=f.length;k>m;m++)$.push(m);for(var p=0,t=2*$.length;$.length>0&&(t--,!(0>t));)for(X=p;X<C.length;X++){q=C[X],I=-1;for(var m=0;m<$.length;m++)if(B=$[m],r=q.x+":"+q.y+":"+B,V[r]===Y){H=f[B];for(var K=0;K<H.length;K++)if(h=H[K],a(X,K)&&!J(q,h)&&!x(q,h)){I=K,$.splice(m,1),g=C.slice(0,X+1),G=C.slice(X),D=H.slice(I),Q=H.slice(0,I+1),C=g.concat(D).concat(Q).concat(G),p=X;break}if(I>=0)break;V[r]=!0}if(I>=0)break}return C}for(var v,t,U,q,b,g,O={},V=y.concat(),K=0,X=B.length;X>K;K++)Array.prototype.push.apply(V,B[K]);for(v=0,t=V.length;t>v;v++)b=V[v].x+":"+V[v].y,O[b]!==Y,O[b]=v;var p=r(y,B),f=Fc.Triangulate(p,!1);for(v=0,t=f.length;t>v;v++)for(q=f[v],U=0;3>U;U++)b=q[U].x+":"+q[U].y,g=O[b],g!==Y&&(q[U]=g);return f.concat()},isClockWise:function(Q){return Fc.Triangulate.area(Q)<0},b2p0:function(p,x){var r=1-p;return r*r*x},b2p1:function(h,V){return 2*(1-h)*h*V},b2p2:function(W,Q){return W*W*Q},b2:function(t,O,o,y){return this.b2p0(t,O)+this.b2p1(t,o)+this.b2p2(t,y)},b3p0:function(u,q){var c=1-u;return c*c*c*q},b3p1:function(s,y){var Z=1-s;return 3*Z*Z*s*y},b3p2:function(O,f){var C=1-O;return 3*C*O*O*f},b3p3:function(l,K){return l*l*l*K},b3:function(S,b,L,j,d){return this.b3p0(S,b)+this.b3p1(S,L)+this.b3p2(S,j)+this.b3p3(S,d)}},Fc={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(F){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(C){var R=C.familyName.toLowerCase(),I=this;return I.faces[R]=I.faces[R]||{},I.faces[R][C.cssFontWeight]=I.faces[R][C.cssFontWeight]||{},I.faces[R][C.cssFontWeight][C.cssFontStyle]=C,I.faces[R][C.cssFontWeight][C.cssFontStyle]=C,C},drawText:function(W){var T,Y=this.getFace(),B=this.size/Y.resolution,L=0,e=String(W).split(""),S=e.length,$=[];for(T=0;S>T;T++){var H=new oq,v=this.extractGlyphPoints(e[T],Y,B,L,H);L+=v.offset,$.push(v.path)}var m=L/2;return{paths:$,offset:m}},extractGlyphPoints:function(l,x,u,V,O){var q,g,E,w,h,H,T,I,S,W,i,N,o,j,M,X,z,B,J,b=[],A=x.glyphs[l]||x.glyphs["?"];if(A){if(A.o)for(w=A._cachedOutline||(A._cachedOutline=A.o.split(" ")),H=w.length,T=u,I=u,q=0;H>q;)switch(h=w[q++]){case"m":S=w[q++]*T+V,W=w[q++]*I,O.moveTo(S,W);break;case"l":S=w[q++]*T+V,W=w[q++]*I,O.lineTo(S,W);break;case"q":if(i=w[q++]*T+V,N=w[q++]*I,M=w[q++]*T+V,X=w[q++]*I,O.quadraticCurveTo(M,X,i,N),J=b[b.length-1])for(o=J.x,j=J.y,g=1,E=this.divisions;E>=g;g++){var e=g/E;Ef.b2(e,o,M,i),Ef.b2(e,j,X,N)}break;case"b":if(i=w[q++]*T+V,N=w[q++]*I,M=w[q++]*T+V,X=w[q++]*I,z=w[q++]*T+V,B=w[q++]*I,O.bezierCurveTo(M,X,z,B,i,N),J=b[b.length-1])for(o=J.x,j=J.y,g=1,E=this.divisions;E>=g;g++){var e=g/E;Ef.b3(e,o,M,z,i),Ef.b3(e,j,X,B,N)}}return{offset:A.ha*u,path:O}}}};Fc.generateShapes=function($,M){M=M||{};var L=M.size!==Y?M.size:100,C=M.curveSegments!==Y?M.curveSegments:4,n=M.font!==Y?M.font:"helvetiker",f=M.weight!==Y?M.weight:"normal",e=M.style!==Y?M.style:"normal";Fc.size=L,Fc.divisions=C,Fc.face=n,Fc.weight=f,Fc.style=e;for(var T=Fc.drawText($),N=T.paths,H=[],J=0,z=N.length;z>J;J++)Array.prototype.push.apply(H,N[J].toShapes());return H},function(j){var G=1e-10,N=function(A,B){var r=A.length;if(3>r)return null;var p,b,C,O=[],d=[],t=[];if(m(A)>0)for(b=0;r>b;b++)d[b]=b;else for(b=0;r>b;b++)d[b]=r-1-b;var w=r,K=2*w;for(b=w-1;w>2;){if(K--<=0)return B?t:O;if(p=b,p>=w&&(p=0),b=p+1,b>=w&&(b=0),C=b+1,C>=w&&(C=0),v(A,p,b,C,w,d)){var n,y,u,M,j;for(n=d[p],y=d[b],u=d[C],O.push([A[n],A[y],A[u]]),t.push([d[p],d[b],d[C]]),M=b,j=b+1;w>j;M++,j++)d[M]=d[j];w--,K=2*w}}return B?t:O},m=function(V){for(var k=V.length,w=0,t=k-1,E=0;k>E;t=E++)w+=V[t].x*V[E].y-V[E].x*V[t].y;return.5*w},v=function(c,Y,i,s,l,m){var S,x,g,o,C,O,d,L,Z;if(x=c[m[Y]].x,g=c[m[Y]].y,o=c[m[i]].x,C=c[m[i]].y,O=c[m[s]].x,d=c[m[s]].y,G>(o-x)*(d-g)-(C-g)*(O-x))return!1;var u,h,f,D,K,N,p,R,Q,F,_,P,t,j,A;for(u=O-o,h=d-C,f=x-O,D=g-d,K=o-x,N=C-g,S=0;l>S;S++)if(L=c[m[S]].x,Z=c[m[S]].y,!(L===x&&Z===g||L===o&&Z===C||L===O&&Z===d)&&(p=L-x,R=Z-g,Q=L-o,F=Z-C,_=L-O,P=Z-d,A=u*F-h*Q,t=K*R-N*p,j=f*P-D*_,A>=-G&&j>=-G&&t>=-G))return!1;return!0};return j.Triangulate=N,j.Triangulate.area=m,j}(Fc),m._typeface_js={faces:Fc.faces,loadFace:Fc.loadFace};var sr=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Xb=sr.prototype={constructor:sr,computeFaceNormals:function(){for(var l=new Ir,f=new Ir,B=0,s=this.faces.length;s>B;B++){var G=this.faces[B],c=this.vertices[G.a],Y=this.vertices[G.b],H=this.vertices[G.c];l.subVectors(H,Y),f.subVectors(c,Y),l.cross(f),l.normalize(),G.normal.copy(l)}},computeVertexNormals:function(I){var w,q,u,Q,J,k;for(k=new Array(this.vertices.length),w=0,q=this.vertices.length;q>w;w++)k[w]=new Ir;if(I){var H,o,b,l=new Ir,j=new Ir;for(u=0,Q=this.faces.length;Q>u;u++)J=this.faces[u],H=this.vertices[J.a],o=this.vertices[J.b],b=this.vertices[J.c],l.subVectors(b,o),j.subVectors(H,o),l.cross(j),k[J.a].add(l),k[J.b].add(l),k[J.c].add(l)}else for(u=0,Q=this.faces.length;Q>u;u++)J=this.faces[u],k[J.a].add(J.normal),k[J.b].add(J.normal),k[J.c].add(J.normal);for(w=0,q=this.vertices.length;q>w;w++)k[w].normalize();for(u=0,Q=this.faces.length;Q>u;u++)J=this.faces[u],J.vertexNormals[0]=k[J.a].clone(),J.vertexNormals[1]=k[J.b].clone(),J.vertexNormals[2]=k[J.c].clone()},mergeVertices:function(){var t,Q,X,M,F,k,B,o,Z={},l=[],d=[],x=4,z=q(10,x);for(X=0,M=this.vertices.length;M>X;X++)t=this.vertices[X],Q=c(t.x*z)+"_"+c(t.y*z)+"_"+c(t.z*z),Z[Q]===Y?(Z[Q]=X,l.push(this.vertices[X]),d[X]=l.length-1):d[X]=d[Z[Q]];var I=[];for(X=0,M=this.faces.length;M>X;X++){F=this.faces[X],F.a=d[F.a],F.b=d[F.b],F.c=d[F.c],k=[F.a,F.b,F.c];for(var w=0;3>w;w++)if(k[w]==k[(w+1)%3]){I.push(X);break}}for(X=I.length-1;X>=0;X--){var A=I[X];for(this.faces.splice(A,1),B=0,o=this.faceVertexUvs.length;o>B;B++)this.faceVertexUvs[B].splice(A,1)}var S=this.vertices.length-l.length;return this.vertices=l,S}},bp=function(E,p,e,c,X,f,g){this.aX=E,this.aY=p,this.xRadius=e,this.yRadius=c,this.aStartAngle=X,this.aEndAngle=f,this.aClockwise=g};bp.prototype=Io(rb),bp.prototype.getPoint=function(q){var H,W=this.aEndAngle-this.aStartAngle;0>W&&(W+=B),W>B&&(W-=B),H=this.aClockwise===!0?this.aEndAngle+(1-q)*(B-W):this.aStartAngle+q*W;var P=this.aX+this.xRadius*e(H),f=this.aY+this.yRadius*x(H);return new Cs(P,f)};var rf=function(A,b){this.v1=A,this.v2=b},ql=rf.prototype=Io(rb);ql.getPoint=function(J){var N=this.v2.clone().sub(this.v1);return N.multiplyScalar(J).add(this.v1),N},ql.getPointAt=function(B){return this.getPoint(B)},ql.getTangent=function(){var i=this.v2.clone().sub(this.v1);return i.normalize()};var wp=function(S,q,v){this.v0=S,this.v1=q,this.v2=v};wp.prototype=Io(rb),wp.prototype.getPoint=function(y){var K,P;return K=Ef.b2(y,this.v0.x,this.v1.x,this.v2.x),P=Ef.b2(y,this.v0.y,this.v1.y,this.v2.y),new Cs(K,P)};var yl=function($,g,M,a){this.v0=$,this.v1=g,this.v2=M,this.v3=a};yl.prototype=Io(rb),yl.prototype.getPoint=function(N){var Z,n;return Z=Ef.b3(N,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=Ef.b3(N,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Cs(Z,n)},Br.create(function(G,F){this.v1=G,this.v2=F},function(n){var Y=new Ir;return Y.subVectors(this.v2,this.v1),Y.multiplyScalar(n),Y.add(this.v1),Y});var _f=Br.create(function(O,x,D){this.v0=O,this.v1=x,this.v2=D},function(Z){var c,h,C;return c=Ef.b2(Z,this.v0.x,this.v1.x,this.v2.x),h=Ef.b2(Z,this.v0.y,this.v1.y,this.v2.y),C=Ef.b2(Z,this.v0.z,this.v1.z,this.v2.z),new Ir(c,h,C)}),Zm=Br.create(function(Y,n,w,K){this.v0=Y,this.v1=n,this.v2=w,this.v3=K},function(e){var Q,L,_;return Q=Ef.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),L=Ef.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),_=Ef.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Ir(Q,L,_)}),wh=function(p,g,u,w,A,O,I,E){sr.call(this),w=w!==Y?w:.5,A=A!==Y?A:.5,E=E!==Y?E:1,p=p||8,O=O||0,I=I||B;var L,v,z=1,d=E/2,Z=[],P=[],K=this.vertices,c=this.faces,k=this.faceVertexUvs;for(v=0;z>=v;v++){var F=[],r=[],D=v/z,i=D*(A-w)+w;for(L=0;p>=L;L++){var l=L/p,S=new Ir,h=-(l*I+O);S.z=i*x(h),S.y=-D*E+d,S.x=i*e(h),K.push(S),F.push(K.length-1),r.push(new Cs(l,D))}Z.push(F),P.push(r)}var M,T,Q=(A-w)/E;for(L=0;p>L;L++)for(0!==w?(M=K[Z[0][L]].clone(),T=K[Z[0][L+1]].clone()):(M=K[Z[1][L]].clone(),T=K[Z[1][L+1]].clone()),M.setY(N(M.x*M.x+M.z*M.z)*Q).normalize(),T.setY(N(T.x*T.x+T.z*T.z)*Q).normalize(),v=0;z>v;v++){var s=Z[v][L],G=Z[v+1][L],H=Z[v+1][L+1],W=Z[v][L+1],o=M.clone(),J=M.clone(),m=T.clone(),y=T.clone(),X=P[v][L].clone(),q=P[v+1][L].clone(),b=P[v+1][L+1].clone(),R=P[v][L+1].clone();c.push(new Sg(s,G,W,[o,J,y])),k[0].push([X,q,R]),c.push(new Sg(G,H,W,[J.clone(),m,y.clone()])),k[0].push([q.clone(),b,R.clone()])}if(g&&w>0)for(this.vertices.push(new Ir(0,d,0)),L=0;p>L;L++){var s=Z[0][L],G=Z[0][L+1],H=this.vertices.length-1,o=new Ir(0,1,0),J=new Ir(0,1,0),m=new Ir(0,1,0),X=P[0][L].clone(),q=P[0][L+1].clone(),b=new Cs(q.x,0);c.push(new Sg(s,G,H,[o,J,m],null,1));var n=L/p*B,t=e(n),V=x(n),C=(L+1)/p*B,a=e(C),_=x(C);k[0].push([new Cs(.5+.5*t,.5+.5*V),new Cs(.5+.5*a,.5+.5*_),new Cs(.5,.5)])}if(u&&A>0)for(this.vertices.push(new Ir(0,-d,0)),L=0;p>L;L++){var s=Z[v][L+1],G=Z[v][L],H=K.length-1,o=new Ir(0,-1,0),J=new Ir(0,-1,0),m=new Ir(0,-1,0),X=P[v][L+1].clone(),q=P[v][L].clone();c.push(new Sg(s,G,H,[o,J,m],null,2));var n=L/p*B,t=e(n),V=x(n),C=(L+1)/p*B,a=e(C),_=x(C);k[0].push([new Cs(.5+.5*a,.5-.5*_),new Cs(.5+.5*t,.5-.5*V),new Cs(.5,.5)])}};wh.prototype=Io(Xb);var Xi=function(R,q,t,P,G,H,V){sr.call(this),V=V||.5,R=R||16,q=q||16,t=(t!==Y?t:0)-E,P=P!==Y?P:B,G=G!==Y?G:0,H=H!==Y?H:E;var r,U,Z=[],N=[],j=this.vertices,m=this.faces,v=this.faceVertexUvs;for(U=0;q>=U;U++){var i=[],s=[];for(r=0;R>=r;r++){var K=r/R,T=U/q,L=new Ir;L.x=-V*e(t+K*P)*x(G+T*H),L.y=V*e(G+T*H),L.z=V*x(t+K*P)*x(G+T*H),j.push(L),i.push(j.length-1),s.push(new Cs(K,T))}Z.push(i),N.push(s)}for(U=0;q>U;U++)for(r=0;R>r;r++){var w=Z[U][r+1],k=Z[U][r],J=Z[U+1][r],C=Z[U+1][r+1],g=j[w].clone().normalize(),a=j[k].clone().normalize(),y=j[J].clone().normalize(),W=j[C].clone().normalize(),O=N[U][r+1].clone(),X=N[U][r].clone(),p=N[U+1][r].clone(),F=N[U+1][r+1].clone();M(j[w].y)===V?(O.x=(O.x+X.x)/2,m.push(new Sg(w,J,C,[g,y,W])),v[0].push([O,p,F])):M(j[J].y)===V?(p.x=(p.x+F.x)/2,m.push(new Sg(w,k,J,[g,a,y])),v[0].push([O,X,p])):(m.push(new Sg(w,k,C,[g,a,W])),v[0].push([O,X,F]),m.push(new Sg(k,J,C,[a.clone(),y,W.clone()])),v[0].push([X.clone(),p,F.clone()]))}};Xi.prototype=Io(Xb);var Xe=function(S,f,_,b,Q,J){sr.call(this),S=S||.33,f=f||.17,b=b||8,_=_||6,Q=Q||0,J=J||B;for(var Z=new Ir,y=[],c=[],M=0;b>=M;M++)for(var I=M/b*B+E,s=0;_>=s;s++){var h=s/_*J+Q;Z.x=S*e(h),Z.z=-S*x(h);var V=new Ir,G=S+f*e(I);V.x=G*e(h),V.z=-G*x(h),V.y=f*x(I),this.vertices.push(V),y.push(new Cs(s/_,1-M/b)),c.push(V.clone().sub(Z).normalize())}for(var M=1;b>=M;M++)for(var s=1;_>=s;s++){var l=(_+1)*M+s-1,W=(_+1)*(M-1)+s-1,a=(_+1)*(M-1)+s,k=(_+1)*M+s,m=new Sg(l,W,k,[c[l].clone(),c[W].clone(),c[k].clone()]);this.faces.push(m),this.faceVertexUvs[0].push([y[l].clone(),y[W].clone(),y[k].clone()]),m=new Sg(W,a,k,[c[W].clone(),c[a].clone(),c[k].clone()]),this.faces.push(m),this.faceVertexUvs[0].push([y[W].clone(),y[a].clone(),y[k].clone()])}this.computeFaceNormals()};Xe.prototype=Io(Xb);var bf=function(p,V,E){return p?(sr.call(this),p=p instanceof Array?p:[p],this.addShapeList(p,V),Rl(this,E),this.computeFaceNormals(),void 0):(p=[],void 0)},gm=bf.prototype=Io(sr.prototype);gm.addShapeList=function(j,d){for(var V=j.length,C=0;V>C;C++){var R=j[C];this.addShape(R,d)}},gm.addShape=function(N,j){function X(){if(j.bottom)for(var o=0;B>o;o++)C=D[o],r(C[2],C[1],C[0],!0);if(j.top)for(o=0;B>o;o++)C=D[o],r(C[0]+O*v,C[1]+O*v,C[2]+O*v,!1)}function q(){var x=0;for(m(I,x),x+=I.length,y=0,b=S.length;b>y;y++)t=S[y],m(t,x),x+=t.length}function m(J,$){for(var R,i,t=J.length;--t>=0;){R=t,i=t-1,0>i&&(i=J.length-1);var u=0,j=v;for(u=0;j>u;u++){var k=O*u,G=O*(u+1),C=$+R+k,I=$+i+k,K=$+i+G,e=$+R+G;s(C,I,K,e,J,u,j,R,i)}}}function W(S,c,y){U.vertices.push(new Ir(S,c,y))}function r(h,n,a,m){h+=A,n+=A,a+=A,U.faces.push(new Sg(h,n,a,null,null,m?2:1));var I=m?H.generateBottomUV(U,N,j,h,n,a):H.generateTopUV(U,N,j,h,n,a);U.faceVertexUvs[0].push(I)}function s(f,q,Q,g,a,P,h,o,y){f+=A,q+=A,Q+=A,g+=A,U.faces.push(new Sg(f,q,g)),U.faces.push(new Sg(q,Q,g));var K=H.generateSideWallUV(U,N,a,j,f,q,Q,g,P,h,o,y);U.faceVertexUvs[0].push([K[0],K[1],K[3]]),U.faceVertexUvs[0].push([K[1],K[2],K[3]])}var d,K,o,Z,R,u=j.amount,V=j.curveSegments||Ak,v=j.steps||1,Q=j.extrudePath,L=!1,H=new Tc(j.repeatUVLength);Q&&(d=Q.getSpacedPoints(v),L=!0,K=j.frames!==Y?j.frames:new wm.FrenetFrames(Q,v,!1),o=new Ir,Z=new Ir,R=new Ir);var t,y,b,U=this,A=this.vertices.length,z=N.extractPoints(V),J=z.shape,S=z.holes,p=!Ef.isClockWise(J);if(p){for(J=J.reverse(),y=0,b=S.length;b>y;y++)t=S[y],Ef.isClockWise(t)&&(S[y]=t.reverse());p=!1}var D=Ef.triangulateShape(J,S),I=J;for(y=0,b=S.length;b>y;y++)t=S[y],J=J.concat(t);for(var e,C,O=J.length,B=D.length,h=0;O>h;h++)e=J[h],L?(Z.copy(K.normals[0]).multiplyScalar(e.x),o.copy(K.binormals[0]).multiplyScalar(e.y),R.copy(d[0]).add(Z).add(o),W(R.x,R.y,R.z)):W(e.x,e.y,0);var k;for(k=1;v>=k;k++)for(h=0;O>h;h++)e=J[h],L?(Z.copy(K.normals[k]).multiplyScalar(e.x),o.copy(K.binormals[k]).multiplyScalar(e.y),R.copy(d[k]).add(Z).add(o),W(R.x,R.y,R.z)):W(e.x,e.y,u/v*k);X(),q()};var wm=function(U,X,H,c,p){function G(X,Q,g){return S.vertices.push(new Ir(X,Q,g))-1}sr.call(this),X=X||64,H=H||1,c=c||8,p=p||!1;var r,E,s,b,u,R,Y,I,y,$,l,Q,v,T,W,Z,q,A,d,t,k=[],S=this,m=X+1,w=new Ir,O=new wm.FrenetFrames(U,X,p),n=O.tangents,M=O.normals,N=O.binormals;for(this.tangents=n,this.normals=M,this.binormals=N,y=0;m>y;y++)for(k[y]=[],b=y/(m-1),I=U.getPointAt(b),r=n[y],E=M[y],s=N[y],$=0;c>$;$++)u=$/c*B,R=-H*e(u),Y=H*x(u),w.copy(I),w.x+=R*E.x+Y*s.x,w.y+=R*E.y+Y*s.y,w.z+=R*E.z+Y*s.z,k[y][$]=G(w.x,w.y,w.z);for(y=0;X>y;y++)for($=0;c>$;$++)l=p?(y+1)%X:y+1,Q=($+1)%c,v=k[y][$],T=k[l][$],W=k[l][Q],Z=k[y][Q],q=new Cs(y/X,$/c),A=new Cs((y+1)/X,$/c),d=new Cs((y+1)/X,($+1)/c),t=new Cs(y/X,($+1)/c),this.faces.push(new Sg(v,T,Z)),this.faceVertexUvs[0].push([q,A,t]),this.faces.push(new Sg(T,W,Z)),this.faceVertexUvs[0].push([A.clone(),d,t.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};wm.prototype=Io(Xb),wm.FrenetFrames=function(e,u,j){function m(){Z[0]=new Ir,s[0]=new Ir,g=Number.MAX_VALUE,r=M(X[0].x),v=M(X[0].y),V=M(X[0].z),g>=r&&(g=r,C.set(1,0,0)),g>=v&&(g=v,C.set(0,1,0)),g>=V&&C.set(0,0,1),B.crossVectors(X[0],C).normalize(),Z[0].crossVectors(X[0],B),s[0].crossVectors(X[0],Z[0])}var P,g,r,v,V,h,S,C=new Ir,X=[],Z=[],s=[],B=new Ir,b=new Np,L=u+1,E=1e-4;for(this.tangents=X,this.normals=Z,this.binormals=s,h=0;L>h;h++)S=h/(L-1),X[h]=e.getTangentAt(S),X[h].normalize();for(m(),h=1;L>h;h++)Z[h]=Z[h-1].clone(),s[h]=s[h-1].clone(),B.crossVectors(X[h-1],X[h]),B.length()>E&&(B.normalize(),P=w(Og(X[h-1].dot(X[h]),-1,1)),Z[h].applyMatrix4(b.makeRotationAxis(B,P))),s[h].crossVectors(X[h],Z[h]);if(j)for(P=w(Og(Z[0].dot(Z[L-1]),-1,1)),P/=L-1,X[0].dot(B.crossVectors(Z[0],Z[L-1]))>0&&(P=-P),h=1;L>h;h++)Z[h].applyMatrix4(b.makeRotationAxis(X[h],P*h)),s[h].crossVectors(X[h],Z[h])};var Dh=function(X,S,f,z){sr.call(this),S=S||18,f=f||0,z=z==L?B:z;for(var T=1/(X.length-1),M=1/S,E=0,R=S;R>=E;E++)for(var c=f+E*M*z,k=e(c),$=x(c),y=0,u=X.length;u>y;y++){var g=X[y],D=new Ir;D.x=k*g.x-$*g.y,D.y=$*g.x+k*g.y,D.z=g.z,this.vertices.push(D)}for(var b=X.length,E=0,R=S;R>E;E++)for(var y=0,u=X.length-1;u>y;y++){var J=y+b*E,O=J,W=J+b,k=J+1+b,P=J+1,m=E*M,o=y*T,w=m+M,a=o+T;this.faces.push(new Sg(O,P,W)),this.faceVertexUvs[0].push([new Cs(m,o),new Cs(m,a),new Cs(w,o)]),this.faces.push(new Sg(W,P,k)),this.faceVertexUvs[0].push([new Cs(w,o),new Cs(m,a),new Cs(w,a)])}this.mergeVertices(),Rl(this),this.computeFaceNormals(),this.computeVertexNormals()};Dh.prototype=Io(Xb);var Ob=function(e,Q){Q=Q||{};var E=Fc.generateShapes(e,Q);Q.amount=Q.height!==Y?Q.height:50,bf.call(this,E,Q)};Ob.prototype=Io(gm);var mg=U.Node=function(){Xc(mg,this)},Mb={X:Yl,Y:Zr,Z:bn},de={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Qj="xzy",Or=function(Z,b,k){if(b){var Q=b[0],o=b[1],H=b[2];"xzy"===k?(Zr(Z,o),bn(Z,H),Yl(Z,Q)):"xyz"===k?(bn(Z,H),Zr(Z,o),Yl(Z,Q)):"yxz"===k?(bn(Z,H),Yl(Z,Q),Zr(Z,o)):"yzx"===k?(Yl(Z,Q),bn(Z,H),Zr(Z,o)):"zxy"===k?(Zr(Z,o),Yl(Z,Q),bn(Z,H)):"zyx"===k?(Yl(Z,Q),Zr(Z,o),bn(Z,H)):(Zr(Z,o),bn(Z,H),Yl(Z,Q))}};Pj("Node",Ql,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Qj,_64O:0,_rotationX:0,_53O:0,_host:L,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return Vo},_22Q:function(){return Co},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(J,w){Yp(J,Eb(L,L,this.r3(),this.getRotationMode())),this.translate3d(J[0]*w,J[1]*w,J[2]*w)},translateFront:function(o){this.translate3dBy([0,0,1],o)},translateBack:function(X){this.translate3dBy([0,0,-1],X)},translateLeft:function(u){this.translate3dBy([-1,0,0],u)},translateRight:function(C){this.translate3dBy([1,0,0],C)},translateTop:function(T){this.translate3dBy([0,1,0],T)},translateBottom:function(h){this.translate3dBy([0,-1,0],h)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(Z,h,N){1===arguments.length&&(h=Z[1],N=Z[2],Z=Z[0]),this.p(Z,N),this.setElevation(h)},translate3d:function(H,D,f){1===arguments.length&&(D=H[1],f=H[2],H=H[0]),this.translate(H,f),this.setElevation(this._54O+D)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(z,k,B){1===arguments.length&&(k=z[1],B=z[2],z=z[0]),this.setSize(z,B),this.setTall(k)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(o,S,X){1===arguments.length&&(S=o[1],X=o[2],o=o[0]),this.setRotationX(o),this.setRotation(-S),this.setRotationZ(X)},setRotationY:function(Y){this.setRotation(-Y)},getRotationY:function(){return-this._64O},lookAt:function(L,q){q=q||Z;var m=this,u=Jo(L,m.p3()),g=Oh(u);q===Z?(m.r3([-y(u[1]/g),-l(u[2],u[0])+d,0]),m.setRotationMode("xzy")):q===a?(m.r3(0,-l(u[2],u[0]),y(u[1]/g)),m.setRotationMode("zyx")):q===X?(m.r3(0,-l(u[2],u[0])+E,-y(u[1]/g)),m.setRotationMode("zyx")):q===Oq?(m.r3([-y(u[1]/g)+d,-l(u[2],u[0])+d,0]),m.setRotationMode("xzy")):q===vm&&(m.r3([-y(u[1]/g)-d,-l(u[2],u[0])+d,0]),m.setRotationMode("xzy")),q===V&&(m.r3([-y(u[1]/g)+E,-l(u[2],u[0])+d,E]),m.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(p){var u=this;if(u!==p&&u._host!==p){var W=u._host;W&&W._removeAttach(u),u._host=p,u._host&&u._host._addAttach(u),u.fp("host",W,p),u.onHostChanged(W,p)}},getAttaches:function(){return this._69O},_addAttach:function(y){var q=this;
q._69O||(q._69O=new Ml),q._69O.add(y),q.fp("attaches",L,y)},_removeAttach:function(f){var h=this;h._69O.remove(f),h._69O.isEmpty()&&delete h._69O,h.fp("attaches",f,L)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(Y){var W=this;W._44I||(W._44I=new Ml),W._42I||(W._42I=new Ml),W._44I.add(Y),W._42I.add(Y),W._20I()},_4I:function(l){var D=this;D._44I||(D._44I=new Ml),D._43I||(D._43I=new Ml),D._44I.add(l),D._43I.add(l),D._20I()},_16I:function(U){var I=this;I._44I.remove(U),I._42I.remove(U),I._44I.isEmpty()&&delete I._44I,I._42I.isEmpty()&&delete I._42I,I._20I()},_18I:function(U){var G=this;G._44I.remove(U),G._43I.remove(U),G._44I.isEmpty()&&delete G._44I,G._43I.isEmpty()&&delete G._43I,G._20I()},_20I:function(){var Q=this;if(delete Q._45I,!Q._44I||Q._44I.isEmpty())return delete Q._70O,void 0;var o;Q._44I.each(function(X){X.isLooped()&&(o||(o={}),o[X._id]||(Q._45I||(Q._45I=new Ml),Q._45I.add(X),o[X._id]=X))}),o?(Q._70O=new Ml,Q._44I.each(function(S){o[S._id]?"A"===o[S._id]||(o[S._id]="A",Q._70O.add(S)):Q._70O.add(S)})):Q._70O=Q._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(I){var S=this;S._46I||(S._46I=new Ml),S._48I||(S._48I=new Ml),S._46I.add(I),S._48I.add(I),S._19I()},_3I:function(p){var C=this;C._47I||(C._47I=new Ml),C._48I||(C._48I=new Ml),C._47I.add(p),C._48I.add(p),C._19I()},_15I:function(W){var H=this;H._46I.remove(W),H._48I.remove(W),H._46I.isEmpty()&&delete H._46I,H._48I.isEmpty()&&delete H._48I,H._19I()},_17I:function(V){var y=this;y._47I.remove(V),y._48I.remove(V),y._47I.isEmpty()&&delete y._47I,y._48I.isEmpty()&&delete y._48I,y._19I()},_19I:function(){var R=this;delete R._49I;var s=R._48I;if(s&&!s.isEmpty()){var x={};s.each(function(M){x[M._id]?R._49I||(R._49I=new Ml):x[M._id]=M}),R._49I?s.each(function($){x[$._id]&&(R._49I.add($),delete x[$._id])}):R._49I=s}},getImage:function(){return this._image},setImage:function(l){var B=this,j=B._image,a=B.getWidth(),y=B.getHeight();B._image=l,B.fp("image",j,l),B.fp(hj,a,B.getWidth()),B.fp(Pp,y,B.getHeight())},getElevation:function(){return this._54O},setElevation:function(Z){var V=this;if(!V._50O){V._50O=1;var e=V._54O;V._54O=Z,V.fp(rl,e,Z),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(O){var M=this;if(!M._49O){M._49O=1;var B=M._64O;M._64O=O,M.fp(ah,B,O),delete M._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(A){var g=this;if(!g._51O){g._51O=1;var m=g._rotationX;g._rotationX=A,g.fp("rotationX",m,A),delete g._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(E){var i=this;if(!i._52O){i._52O=1;var U=i._53O;i._53O=E,i.fp("rotationZ",U,E),delete i._52O}},getPosition:function(){return this._position},setPosition:function(y,b){var g=this;if(!g._50I){g._50I=1;var A;if(A=2===arguments.length?{x:y,y:b}:y,A.x!==g._position.x||A.y!==g._position.y){var s=g._position;g._position=A,g.fp(ue,s,A)}delete g._50I}},translate:function(h,d){var U=this._position;this.p(U.x+h,U.y+d)},getWidth:function(){var w=this;if(w._width>=0)return w._width;var G=tm(w._image);return G?Ge(G,w):20},setWidth:function(N){var T=this,X=T._width;T._width=N,T.fp(hj,X,N)},getHeight:function(){var m=this;if(m._height>=0)return m._height;var F=tm(m._image);return F?Wc(F,m):20},setHeight:function(X){var W=this,T=W._height;W._height=X,W.fp(Pp,T,X)},setSize:function(N,j){var D=this;2===arguments.length?(D.setWidth(N),D.setHeight(j)):(D.setWidth(N.width),D.setHeight(N.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(P,G,R,c){var z=this;1===arguments.length?(z.p(P.x+P.width/2,P.y+P.height/2),z.setWidth(P.width),z.setHeight(P.height)):(z.p(P+R/2,G+c/2),z.setWidth(R),z.setHeight(c))},getRect:function(){var o=this,K=o.getWidth(),b=o.getHeight();return ui({x:o._position.x-K/2,y:o._position.y-b/2,width:K,height:b},o._64O)},getCorners:function(o,H){o==L&&(o=0),H==L&&(H=o);var $=this,r=$._position,I=$.getWidth()/2+o,V=$.getHeight()/2+H,i=new ls($._64O,r.x,r.y);return[i.tf(-I,-V),i.tf(I,-V),i.tf(I,V),i.tf(-I,V)]},rotateAt:function(S,G,f){var p=this,m=p._position,o=p._64O,A=new ls(o,m.x,m.y).tf(S,G),H=N(S*S+G*G),C=l(m.y-A.y,m.x-A.x)+f;p.setRotation(o+f),p.p(A.x+H*e(C),A.y+H*x(C))},onParentChanged:function(){mg.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(A){A._7I()})},onPropertyChanged:function(q){var v=this;mg.superClass.onPropertyChanged.call(v,q),v._69O&&v._69O.each(function(Y){Y.handleHostPropertyChange(q)}),v._49I&&v._49I.each(function(i){i.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(E){this.updateAttach(E)},onStyleChanged:function(B){mg.superClass.onStyleChanged.apply(this,arguments),jm[B]&&this.updateAttach()},updateAttach:function(x){var n=this;n._51I||Sb||(n._51I=1,n._71O(x),delete n._51I)},_71O:function(I){var u,X,P,q,S,V,E=this,c=E._host,B=I?I.property:L,p=I?I.oldValue:L,y=I?I.newValue:L;if(c instanceof Rd){if(B===rl)E.setElevation(E._54O+y-p);else if(!I||Sj[B]){if(u=E.s("attach.row.index"),X=E.s("attach.column.index"),P=c.getCellRect(u,X),!P)return;q=E.s("attach.row.span"),S=E.s("attach.column.span"),(1!==q||1!==S)&&(P=pl(P,c.getCellRect(u+q-1,X+S-1))),eo(P,E,"attach.padding",1),E.setRect(P)}}else if(c instanceof ej&&(V=E.s("attach.index"))>=0&&(!I||Tq[B])){var N=E.s("attach.thickness");N!=L&&E.setHeight(c.getThickness()*N);var k=E.s("attach.offset"),r=c.getPoints(),v=r.size();if(v>V){var U=r.get(V),G=v===V+1?r.get(0):r.get(V+1),g=[G.x-U.x,G.y-U.y],s=Oh(g);if(s){E.s("attach.offset.relative")&&(k*=s),E.s("attach.offset.opposite")&&(k=s-k);var W={x:U.x+g[0]/s*k,y:U.y+g[1]/s*k},z=E.s("attach.gap");z&&(E.s("attach.gap.relative")&&(z*=c.getThickness()),W=al(L,W,G,z)),E.p(W),E.setRotation(l(g[1],g[0]))}}}else I&&(B===ue?E.translate(y.x-p.x,y.y-p.y):B===rl?E.setElevation(E._54O+y-p):Lk[B]&&E._11Q(c,B,y-p))},_11Q:function(h,v,a){var i=this,g=h.p3(),_=Jo(i.p3(),g),A=il(),Z=de[i.getRotationMode()],R=Z[0],l=Z[1],e=Z[2],x=Mb[R],c=Mb[l],n=Mb[e];v===ah&&(v="rotationY",a=-a),v===ah+R?(n(A,h[zs+e]()),c(A,h[zs+l]()),x(A,a),c(A,-h[zs+l]()),n(A,-h[zs+e]()),i[eg+R](i[zs+R]()+a)):v===ah+l?(n(A,h[zs+e]()),c(A,a),n(A,-h[zs+e]()),i[eg+l](i[zs+l]()+a)):v===ah+e&&(n(A,a),i[eg+e](i[zs+e]()+a)),Yp(_,A),i.p3(g[0]+_[0],g[1]+_[1],g[2]+_[2])},isHostOn:function(v){var U=this;if(U._host&&v&&v._69O)for(var o={},A=U._host;A&&A!==U&&!o[A._id];){if(A===v)return!0;o[A._id]=A,A=A._host}return!1},isLoopedHostOn:function(O){return this.isHostOn(O)&&O.isHostOn(this)},getSerializableProperties:function(){var n=mg.superClass.getSerializableProperties.call(this);return tl(n,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),n}});var Di=U.Edge=function(h,s){var b=this;Xc(Di,b),b.setSource(h),b.setTarget(s)};Pj("Edge",Ql,{_icon:"edge_icon",getUIClass:function(){return so},_22Q:function(){return pd},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(L){var K=this;if(K._source!==L){var N=K._source;K._source=L,N&&N._16I(K),L&&L._2I(K),K._7I(),K.fp("source",N,L)}},setTarget:function(N){var u=this;if(u._target!==N){var A=u._target;u._target=N,A&&A._18I(u),N&&N._4I(u),u._7I(),u.fp("target",A,N)}},isLooped:function(){var W=this;return W._source===W._target&&!!W._source&&!!W._target},_7I:function(){var h,W=this,_=Nc(W);W._40I!==_&&(h=this._40I,h&&h._15I(W),W._40I=_,_&&_._1I(W),W.fp("sourceAgent",h,_),Vd(h,W._41I),Vd(_,W._41I));var K=Dq(W);W._41I!==K&&(h=W._41I,h&&h._17I(W),W._41I=K,K&&K._3I(W),W.fp("targetAgent",h,K),Vd(h,W._40I),Vd(K,W._40I))},_22I:function(c){this._52I=c,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var T=this;return T._52I&&T._52I.get(0)!==T&&!T.getStyle(Wh)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var R=this,c=R._52I;return c&&!R.getStyle(Wh)&&c.size()>1&&R===c.get(0)},toggle:function(){var _=this._52I,J=!this.s(Wh);_&&_.size()>1&&(_.each(function(k){k.s(Wh,J)}),_.getSiblings().each(function(j){j!==_&&j.each(function(S){S.fp("edgeGroup",L,j)})}))},setStyle:function(c,U){(c===ij||"edge.segments"===c)&&(U=bk(U)),Di.superClass.setStyle.call(this,c,U)},onStyleChanged:function(H){Di.superClass.onStyleChanged.apply(this,arguments),qb[H]&&Vd(this._41I,this._40I)},getSerializableProperties:function(){var m=Di.superClass.getSerializableProperties.call(this);return tl(m,{source:1,target:1}),m}});var rc=U.Group=function(){Xc(rc,this)};Pj("Group",mg,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Bj},onChildAdded:function(){rc.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){rc.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var R=this;if(!R._54I&&!Sb){var s=R.getChildrenRect();s&&(R._53I=1,R.p(Mp(R.s("group.position"),s,R.getSize())),delete R._53I)}},getChildrenRect:function(){var E,Z=this;return Z.eachChild(function(R){E=pl(E,Z.getChildRect(R))}),E},getChildRect:function(k){var H;return zk(k)&&k.s(ch)&&(Wn(k)&&k.isExpanded()&&k.eachChild(function(X){H=pl(H,k.getChildRect(X))}),!H&&k.getRect&&(H=k.getRect())),H},setPosition:function(B,m){var M=this;if(!M._54I){var Q;Q=2===arguments.length?{x:B,y:m}:B,Sb||M._53I||(M._54I=1,ps(M._children,Q.x-M._position.x,Q.y-M._position.y),delete M._54I),rc.superClass.setPosition.call(this,Q)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(R){var j=this;if(j._57O!==R){var Y=j._57O;j._57O=R,j.fp("expanded",Y,j._57O),j._8I()}},_8I:function(){rc.superClass._8I.call(this),this.eachChild(function(U){zk(U)&&U._8I()})},onStyleChanged:function(Z){rc.superClass.onStyleChanged.apply(this,arguments),"group.position"===Z&&this._81I()},getSerializableProperties:function(){var B=rc.superClass.getSerializableProperties.call(this);return B.expanded=1,B}});var Rd=U.Grid=function(){Xc(Rd,this)};Pj("Grid",mg,{IRotatable:!1,_icon:"grid_icon",_image:L,getUIClass:function(){return $f},setRotation:function(){},getCellRect:function(r,U){var j=this,g=j.s("grid.row.count"),O=j.s("grid.column.count");if(0>=g||0>=O||0>r||r>=g||0>U||U>=O)return L;var i,H,f,$=j.getRect(),B=j.s("grid.row.percents"),k=j.s("grid.column.percents");if(eo($,j,"grid.border",-1),B&&B._as&&(B=B._as),k&&k._as&&(k=k._as),B&&B.length===g){for(f=0,i=0;r>i;i++)f+=$.height*B[i];$.y+=f,$.height=$.height*B[r]}else $.height=$.height/g,$.y+=$.height*r;if(k&&k.length===O){for(H=0,i=0;U>i;i++)H+=$.width*k[i];$.x+=H,$.width=$.width*k[U]}else $.width=$.width/O,$.x+=$.width*U;return oe($,-j.s("grid.gap")),$}});var ej=U.Shape=function(){Xc(ej,this),this._59O=new Ml};ej.__de__=Vf,Pj("Shape",mg,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Rk},_22Q:function(){return gd},getLength:function(z){return cg(ph(this._59O,this._58O,z,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var M=this._58O;return M?new Ml(M._as.slice(0)):M},setSegments:function(r){var O=this._58O;r=r?zc(r)?new Ml(r.slice(0)):new Ml(r._as.slice(0)):new Ml,(O&&r&&O._as.join(",")!==r._as.join(",")||O!==r)&&(this._58O=r,this.fp("segments",O,r))},getPoints:function(){return this._59O},toPoints:function(){var e=this._59O;return new Ml(e._as.slice(0))},setPoints:function(I){var F=this._59O;I=I?zc(I)?new Ml(I.slice(0)):new Ml(I._as.slice(0)):new Ml,(F&&I&&F._as.join(",")!==I._as.join(",")||F!==I)&&(this._59O=I,this.fs(),this.fp("points",F,I))},addPoint:function(f,m){var k=this.toPoints();k.add(f,m),this.setPoints(k)},setPoint:function(H,c){var W=this.toPoints();W.set(H,c),this.setPoints(W)},removePointAt:function(F){var j=this.toPoints();j.removeAt(F),this.setPoints(j)},setWidth:function(o){var c=this;if(1>o&&(o=1),!c._55I&&!Sb&&c.getWidth()){c._55I=1;var K=c._position.x,J=o/c.getWidth(),h=c.toPoints(),B=new Ml;h.each(function(W){B.add({x:(W.x-K)*J+K,y:W.y,e:W.e})}),c.setPoints(B),c.fs(),delete c._55I}ej.superClass.setWidth.call(c,o)},setHeight:function(F){var e=this;if(1>F&&(F=1),!e._55I&&!Sb&&e.getHeight()){e._55I=1;var g=e._position.y,m=F/e.getHeight(),b=e.toPoints(),i=new Ml;b.each(function(y){i.add({x:y.x,y:(y.y-g)*m+g,e:y.e})}),e.setPoints(i),e.fs(),delete e._55I}ej.superClass.setHeight.call(e,F)},setPosition:function(e,W){var V,G=this;if(!G._28Q){if(G._28Q=1,!G._55I&&!Sb){V=2===arguments.length?{x:e,y:W}:e;var c=V.x-G._position.x,F=V.y-G._position.y;if(0===c&&0===F)return delete G._28Q,void 0;G._55I=1;var p=G.toPoints(),P=new Ml;p.each(function(I){P.add({x:I.x+c,y:I.y+F,e:I.e})}),G.setPoints(P),G.fs(),delete G._55I}ej.superClass.setPosition.apply(G,arguments),delete G._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var T=this;if(!T._55I&&!Sb){var x=Aj(T._59O);x&&(T._55I=1,T.setRect(x),delete T._55I)}T.fp(sq,!1,!0)},getSerializableProperties:function(){var N=ej.superClass.getSerializableProperties.call(this);return N.segments=1,N.points=1,N.thickness=1,N.closePath=1,N}});var Jl=U.Polyline=function(){Xc(Jl,this),this.s({"shape.background":null,"shape.border.width":2})};Pj("Polyline",ej,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return hk},getUIClass:function(){return Gd},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(s){var c=this;if(!c._24Q&&!Sb&&c.getTall()){c._24Q=1;var P=c._54O,Y=s/c.getTall();c._59O.each(function(N){N.e=N.e==L?P:(N.e-P)*Y+P}),c.fs(),delete c._24Q}Jl.superClass.setTall.call(c,s)},setElevation:function(l){var d=this;if(!d._24Q&&!Sb){d._24Q=1;var z=l-d._54O;d._59O.each(function(Z){Z.e==L?Z.e=l:Z.e+=z}),d.fs(),delete d._24Q}Jl.superClass.setElevation.apply(d,arguments)},fireShapeChange:function(){var H=this,f=H._59O;if(!H._24Q&&!Sb){var h=f.size();if(h){var k=1,J=f.get(0),e=H._54O;J.e==L&&(J.e=e);for(var A=J.e,s=0;h>k;k++){J=f.get(k),J.e==L&&(J.e=e);var q=C(A,J.e),g=K(A+s,J.e);A=q,s=g-q}H._24Q=1,H.setTall(s),H.setElevation(A+s/2),delete H._24Q}}Jl.superClass.fireShapeChange.apply(H,arguments)}});var Tp=U.SubGraph=function(){Xc(Tp,this)};Pj("SubGraph",mg,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Tp.superClass._8I.call(this),this.eachChild(function(O){zk(O)&&O._8I()})}}),U.EdgeGroup=function(i,Z){this._70O=i,this._siblings=Z;for(var _,E,J=0,F=i.size(),A=u[Wh];F>J;J++)if(_=i.get(J).getStyle(Wh,!1),_!=L){A=_;break}A==L&&(A=!0);var x=h.edgeGroupAgentFunc;for(x&&(E=x(i),E&&E!==i.get(0)&&(i.remove(E),i.add(E,0))),J=0;F>J;J++)i.get(J).s(Wh,A)},Pj("EdgeGroup",b,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(Y){return this._70O.get(Y)},indexOf:function(O){return this._70O.indexOf(O)},each:function(J,Z){this._70O.each(J,Z)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(M,o){this._siblings.each(function(Z){Z._70O.each(M,o)})}});var jr=U.JSONSerializer=function(F,P){this.dm=this._dataModel=F,this._hierarchical=!!P};Pj("JSONSerializer",b,{ms_ac:["hierarchical"],serialize:function(b){return JSON.stringify(this.toJSON(),function(L,N){return _h(N)?Xk(N):N},b==L?2:b)},toJSON:function(){var S=this,J=S.dm,i=J.getRoots(),d=S.json={v:h.getVersion(),d:[],a:{}},B=J.getSerializableAttrs();for(var f in B){var b=J.a(f);b!==Y&&S[Yh](f,b,d.a)}return Cr(d.a)&&delete d.a,S._hierarchical?i.each(S.serializeData,this):J.each(function(l){S.serializeData(l)}),d},isSerializable:function(){return!0},getProperties:function(p){return p.getSerializableProperties()},getStyles:function($){return $.getSerializableStyles()},getAttrs:function(E){return E.getSerializableAttrs()},serializeData:function(O){var h=this;if(h.isSerializable(O)){var Y,k,u,B,z=O.getClass(),c=new z,p={c:O.getClassName(),i:O.getId(),p:{},s:{},a:{}};h.json.d.push(p),Y=h.getProperties(O);for(k in Y)B=Km(k),O[B]&&(u=O[B](),u!==c[B]()&&h[Yh](k,u,p.p));Y=h.getStyles(O);for(k in Y)u=O.s(k),u!==c.s(k)&&h[Yh](k,u,p.s);Y=h.getAttrs(O);for(k in Y)u=O.a(k),u!==c.a(k)&&h[Yh](k,u,p.a);Cr(p.p)&&delete p.p,Cr(p.s)&&delete p.s,Cr(p.a)&&delete p.a}h._hierarchical&&O.getChildren().each(h.serializeData,h)},serializeValue:function(g,W,T){th(W)?W={__a:W._as}:W instanceof Ql&&(W={__i:W.getId()}),T[g]=W},deserialize:function($,a,m){Sb=!0;var f=this;$=f.json=dn($)?JSON.parse($):$,f._82I={};for(var r=f.dm,h=new Ml,q=new Ml,S=0,j=$.d.length;j>S;S++){var v=$.d[S],g=Ke(v.c),N=new g,J=v.i;m&&J!=L&&(N._id=J),f._82I[J]=N,h.add(N),q.add(v)}for(S=0;j>S;S++)f.deserializeData(h.get(S),q.get(S));h.each(function(L){a&&!L.getParent()&&L.setParent(a),r.add(L)});for(var w in $.a)r.a(w,f[gg]($.a[w]));return Sb=!1,h},deserializeData:function(L,H){for(var e in H.p)L[Kg(e)](this[gg](H.p[e]));for(e in H.s)L.s(e,this[gg](H.s[e]));for(e in H.a)L.a(e,this[gg](H.a[e]))},deserializeValue:function(c){if(mi(c)){var k=c.__i;if(k!=L)return this._82I[k];if(k=c.__a,zc(k))return new Ml(k)}return c}}),tl(Ko,{serialize:function(y,w){return new jr(this,w).serialize(y)},toJSON:function(j){return new jr(this,j).toJSON()},deserialize:function(g,a,N){return new jr(this).deserialize(g,a,N)}}),To.GraphView=function(H){var z=this;z._24I={},z._34I=new Ml,z._25I={},z._56I={},z._view=lo(1),z._canvas=Dj(z._view),z.dm(H?H:new Ko),z.setEditable(!1),z.setScrollBarVisible(h.graphViewScrollBarVisible)},jj("GraphView",b,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",dh,li,Re,Vg,"resettable","editInteractor",ie,"pannable","rectSelectable","autoScrollZone",Ab,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:h.graphViewResettable,_pannable:h.graphViewPannable,_rectSelectable:h.graphViewRectSelectable,_autoScrollZone:h.graphViewAutoScrollZone,_rectSelectBackground:h.graphViewRectSelectBackground,_rectSelectBorderColor:h.graphViewRectSelectBorderColor,_editPointSize:h.graphViewEditPointSize,_editPointBorderColor:h.graphViewEditPointBorderColor,_editPointBackground:h.graphViewEditPointBackground,_scrollBarColor:ln,_scrollBarSize:dr,_autoHideScrollBar:nm,_autoMakeVisible:Rc,setEditable:function(G){var n=this,l=To.XEditInteractor;G?n.setInteractors([new vn(n),l?new l(n):new ff(n),new gp(n),new En(n),new Vk(n,{editable:!l})]):n.setInteractors([new vn(n),new gp(n),new En(n),new Vk(n,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function($){var I=$.getUIClass();return I?new I(this,$):L},getDataUI:function(n){var e=this,y=e._25I[n._id];return y===Y&&(y=e._33I(n),e._25I[n._id]=y),y},invalidateAll:function(l){var o=this;if(l){for(var L in o._25I){var B=o._25I[L];B&&B.dispose()}o._25I={},o._56I={},o._24I={},o._34I.clear(),o.redraw()}else o.dm().each(function(S){o.invalidateData(S)})},invalidateSelection:function(){var d=this;d.sm().each(function(t){d.invalidateData(t)})},invalidateData:function(L){var h=this;h._24I[L._id]=L,h._21Q(L),h.iv()},_21Q:function(h){var f=this,q=f._24I;if(Mo(h)&&vb[h.s(Xh)]){var T=h.getSourceAgent();T&&T.getAgentEdges().each(function($){q[$._id]=$}),T=h.getTargetAgent(),T&&T.getAgentEdges().each(function(T){q[T._id]=T}),f.iv()}},redraw:function(m){var q=this;q._32I||(m?q._34I.add(m):(q._32I=1,q._34I.clear()),q.iv())},each:function(D,Z){var d,n,r,f=0,G=this._layers,g=this._dataModel._datas._as,Q=g.length;if(G)for(var C=G.length;C>f;f++){r=G[f];for(var Y=0;Q>Y;Y++)if(d=g[Y],d._layer===r&&(n=Z?D.call(Z,d):D(d),n===!1))return}else for(;Q>f;f++)if(d=g[f],n=Z?D.call(Z,d):D(d),n===!1)return},reverseEach:function(i,g){var a,l,t,h,F=this._layers,r=this._dataModel._datas._as,o=r.length;if(F)for(a=F.length-1;a>=0;a--){h=F[a];for(var u=o-1;u>=0;u--)if(l=r[u],l._layer===h&&(t=g?i.call(g,l):i(l),t===!1))return}else for(a=o-1;a>=0;a--)if(l=r[a],t=g?i.call(g,l):i(l),t===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var V=this,t=V._84I;return t||(V.each(function(A){V.isVisible(A)&&(t=pl(t,V.getDataUIBounds(A)))}),V._84I=t?t:Hp),V._84I},getScrollRect:function(){return pl(this.getContentRect(),this._29I)},fitData:function(v,m,d,B,c){var u=this;if(!u.getWidth()||!u.getHeight())return c||Vj(u.fitData,u,[v,m,d,B,!0],200),void 0;u.makeVisible(v),u.validate();var Y=u.getDataUIBounds(v);Y&&(Y=nb(Y),oe(Y,d==L?20:d),u.fitRect(Y,m,B))},fitContent:function(s,w,Z,x){var H=this;if(!H.getWidth()||!H.getHeight())return x||Vj(H.fitContent,H,[s,w,Z,!0],200),void 0;H.validate();var $=nb(H.getContentRect());oe($,w==L?20:w),H.fitRect($,s,Z)},fitRect:function($,c,A){var i=this,P=i.getWidth(),y=i.getHeight(),Q=$.x+$.width/2,u=$.y+$.height/2,T=C(P/$.width,y/$.height),r=i._zoom,x=-Q*r+P/2,R=-u*r+y/2;0===T||isNaN(T)||(A&&(T=C(1,T)),c?i.setTranslate(x,R,{finishFunc:function(){i.setZoom(T,c)}}):(i.setTranslate(x,R),i.setZoom(T)))},toCanvas:function(l){this.validateImpl();var A=this,I=A.getContentRect(),O=Dj(),d=A._zoom,h=I.x*d,r=I.y*d,f=I.width*d,t=I.height*d;Vc(O,f,t,1);var N=on(O);return l&&kh(N,0,0,f,t,l),mk(N,-h,-r),N.scale(d,d),A._42(N),N.restore(),O},toDataURL:function(J,l){return this.toCanvas(J).toDataURL(l||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(L,_){var o,Z,G=this;G._93db(L,_),G.each(function(E){G._56I[E._id]&&(o=G.getDataUI(E),o&&(Z=o._79o(),U.HtmlNode&&E instanceof U.HtmlNode?o._42(L):(!_||mo(_,Z))&&o._42(L)))}),G._92db(L,_)},validateImpl:function(){var G,P,R,X,y,j=this,b=j.tx(),B=j.ty(),n=j._zoom,h=j._canvas,U=this.getWidth(),S=this.getHeight(),q=j._29I,m={x:-b/n,y:-B/n,width:U/n,height:S/n},T={},p=j._34I,d=j._24I,V=j._32I,r=j._23I;(U!==h.clientWidth||S!==h.clientHeight)&&(Vc(h,U,S),V=1),V||ic(m,q)||(V=1),j._29I=m,j.each(function(i){P=i._id;var p=T[P]=j.isVisible(i);p!==j._56I[P]&&(d[P]=i,R=j.getDataUI(d[P]),R&&R._84o(p),j._84o(i,p))},j);for(P in d)R=j.getDataUI(d[P]),R&&(!V&&j._56I[P]&&(y=R._79o(),y&&p.add(y)),R.invalidate()),j._83I=1;if(j._56I=T,!V)for(P in d)T[P]&&(R=j.getDataUI(d[P]),R&&(y=R._79o(),y&&p.add(y)));if(V?X=m:(p.each(function(u){mo(m,u)&&(X=pl(X,u))}),X&&(oe(X,K(1,1/n)),X.x=F(X.x*n)/n,X.y=F(X.y*n)/n,X.width=k(X.width*n)/n,X.height=k(X.height*n)/n,X=rd(m,X))),j._74O=X,X&&(G=on(h),fd(G,b,B,n),G.beginPath(),G.rect(X.x,X.y,X.width,X.height),G.clip(),G.clearRect(X.x,X.y,X.width,X.height),j._42(G,X),G.restore(),delete j._74O),j._24I={},p.clear(),delete j._32I,r&&U>0&&S>0){var R=j.getDataUI(r);if(R){var y=R._79o(),x=j._29I,g=x.x,a=x.y,C=x.width,v=x.height,n=j._zoom;y&&!mo(y,x)&&(y.x+y.width<g&&j.tx(-y.x*n),y.x>g+C&&j.tx(-(y.x+y.width-C)*n),y.y+y.height<a&&j.ty(-y.y*n),y.y>a+v&&j.ty(-(y.y+y.height-v)*n))}delete j._23I}j._83I&&(delete j._83I,delete j._84I),j._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(O){var b=this;O!==b.isScrollBarVisible()&&(O?(Dg(b._view,b._79O=lo()),Dg(b._79O,b._27I=lo()),Dg(b._79O,b._28I=lo())):(db(b._79O),delete b._79O,delete b._27I,delete b._28I),b.fp("scrollBarVisible",!O,O))},showScrollBar:function(){var k=this;k._79O&&(k._85I||(P(function(){k._86I()},Ok),k.iv()),k._85I=new Date)},_86I:function(){var J=this;if(J._85I){var u=new Date,p=u.getTime();p-J._85I.getTime()>=Ok?(delete J._85I,J.iv()):P(function(){J._86I()},Ok)}},_98O:function(){var J=this,x=this._27I,d=this._28I;if(J._79O){if(J._autoHideScrollBar&&!J._85I)return x.style.visibility=Tl,d.style.visibility=Tl,void 0;var P=J.getScrollBarColor(),p=J._zoom,M=J.getScrollBarSize(),h=J.getViewRect(),I=J.getScrollRect(),X=h.height*p,Y=I.height*p,u=h.width*p-M-2,Z=X*((h.y-I.y)*p/Y),A=X*(X/Y),i=x.style;Y-.5>X?(Cf>A&&(Z=Z+A/2-Cf/2,0>Z&&(Z=0),Z+Cf>X&&(Z=X-Cf),A=Cf),kl(x,u,Z,M,A),i.visibility=Gp,i.background=P,i.borderRadius=M/2+Wk):i.visibility=Tl;var w=h.width*p,m=I.width*p,Z=h.height*p-M-2,u=w*((h.x-I.x)*p/m),f=w*(w/m),i=d.style;m-.5>w?(Cf>f&&(u=u+f/2-Cf/2,0>u&&(u=0),u+Cf>w&&(u=w-Cf),f=Cf),kl(d,u,Z,f,M),i.visibility=Gp,i.background=P,i.borderRadius=M/2+Wk):i.visibility=Tl}},setDataModel:function(w){var E=this,I=E._dataModel,M=E._3o;I!==w&&(I&&(I.umm(E.handleDataModelChange,E),I.umd(E.handleDataPropertyChange,E),I.removeIndexChangeListener(E._75O,E),M||I.sm().ums(E._16o,E)),E._dataModel=w,w.mm(E.handleDataModelChange,E),w.md(E.handleDataPropertyChange,E),w.addIndexChangeListener(E._75O,E),M?M._21I(w):w.sm().ms(E._16o,E),E.invalidateAll(!0),E.fp(Ki,I,w))},handleDataPropertyChange:function(D){this.invalidateData(D.data)},onPropertyChanged:function(r){var j=this,Z=r.property;j.redraw(),Ch[Z]?j.showScrollBar():Z===ie&&j.onCurrentSubGraphChanged(r)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(A){var d=this,X=A.kind,n=A.data;if(d._83I=1,"add"===X)d.invalidateData(n),Mo(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(d.invalidateData,d);else if(X===lp){d._21Q(n);var x=n._id,Q=d._25I[x];if(Q){if(d._56I[x]){var E=Q._79o();E&&d.redraw(E)}Q.dispose(),delete d._25I[x],delete d._24I[x],delete d._56I[x]}n===d._currentSubGraph&&d.setCurrentSubGraph(L)}else X===Ne&&(d.invalidateAll(!0),d.setCurrentSubGraph(L))},_75O:function(U){this.invalidateData(U.data)},_76O:function(t){var M=this;if(M.isVisible(t)){for(var J=t;J._parent&&M.isVisible(J._parent);)J=J._parent;J&&J!==t&&M._dataModel._76O(J),M._dataModel._76O(t)}},isMovable:function(M){var D=this;return Mo(M)&&M.getStyle(Xh)!==Yk?!1:M.s("2d.movable")?D._movableFunc?D._movableFunc(M):!0:!1},isSelectable:function(C){return C.s("2d.selectable")&&this.sm().isSelectable(C)},isEditable:function(a){var v=this;if(!v._editInteractor||!v.isSelected(a))return!1;if(Wn(a)){var I=v.getDataUI(a);if(!I||I._88I)return!1}return Mo(a)&&a.getStyle(Xh)!==Yk?!1:a.s("2d.editable")?v._editableFunc?v._editableFunc(a):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(j){return zk(j)&&0!==j.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(j):!0},isRectEditable:function(s){return zk(s)&&0!==s.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(s):!0},isRotationEditable:function(R){return R.setRotation&&R.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(R):!0:!1},getRotationPoint:function(c){var U=cs(c.getRotation(),0,-c.getHeight()/2-(S?32:16)),v=c.p();return U.x+=v.x,U.y+=v.y,U},getLogicalPoint:function(A){var f=this;return lm(A,f._canvas,f.tx(),f.ty(),f._zoom,f._zoom)},getSelectedDataAt:function(r){var g=this;return this.getDataAt(r,function(q){return g.isSelected(q)})},getDataAt:function(i,M,E){i.target&&(i=this.lp(i));var G;return this.reverseEach(function(u){return(M?M(u):this.isSelectable(u))&&this.rectIntersects(u,zi(i.x,i.y,E))?(G=u,!1):void 0},this),G},getIconInfoAt:function(v,A){var y=this;if(v.target&&(v=y.lp(v)),A||(A=y.getDataAt(v)),A){var j=y.getDataUI(A);if(j&&j._38o){var s,i=j._38o,h=new Ml;for(s in i.icons)h.add(s);for(var B=h.size()-1;B>=0;B--){s=h.get(B);for(var C=i.rects[s],D=C.rotation,Z=C.length-1;Z>=0;Z--){var N=C[Z],d=N.width,E=N.height,e={x:v.x-N.x-d/2,y:v.y-N.y-E/2};D!=L&&(e=cs(-D,e.x,e.y));var N={x:-d/2,y:-E/2,width:d,height:E};if(lc(N,e))return{key:s,index:Z,name:i.icons[s].names[Z],rect:C[Z],point:v,rotation:D,relativeRect:N,relativePoint:e,data:A}}}}}return L},getDatasInRect:function(n,X,q){q===Y&&(q=1);var i=this,I=new Ml;return i.reverseEach(function(s){q&&!i.isSelectable(s)||(X?i.rectIntersects(s,n):i.rectContains(s,n))&&I.add(s)}),I},moveSelection:function(y,b){var G,O=this,h=O.dm();h&&(G=h.getHistoryManager()),G&&G.beginInteraction(),ps(O.sm().toSelection(O.isMovable,O),y,b),G&&G.endInteraction()},getDataUIBounds:function(u){var g=this.getDataUI(u);return g?g._79o():L},getBoundsForGroup:function(s){return s.s(ch)?this.getDataUIBounds(s):L},rectIntersects:function(S,c){this.validate();var F=L;if(this._56I[S._id]){var z=this._25I[S._id];if(z){var E=z._79o();if(Yb(c,E))F=!0;else if((c=rd(c,E))&&(z.rectIntersects&&(F=z.rectIntersects(c)),F==L)){if(!S.s("pixelPerfect"))return!0;var M=c.x,B=c.y,W=c.width,t=c.height,Z=1,q=h.hitMaxArea,Y=W*t;Y>q&&(Z=q/Y);var s=_k(W*Z,t*Z);mk(s,-M*Z,-B*Z),s.scale(Z,Z),z._42(s);try{for(var D=0,K=s.getImageData(0,0,W*Z,t*Z).data;D<K.length;D+=4)if(0!==K[D+3]){F=!0;break}s.restore()}catch(Q){If=L,F=!0}}}}return F?!0:!1},rectContains:function(U,m){if(this._56I[U._id]){var X=this._25I[U._id];if(X)return Yb(m,X._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(S){var J=this,$=J._focusData,m=$&&J._25I[$._id],T=0,H=J._dataModel._datas;$&&$._enabled&&$._editable&&m&&m.onKeyDown&&m.onKeyDown(S)===!0||(9===S.keyCode&&($&&(T=H.indexOf($),Cd(S)?-1===--T&&(T=0):++T===H.size()&&(T=0)),J._focusData=$=H.get(T),J.sm().setSelection($)),Ei(S)?J.selectAll():Dk(S)&&J.isResettable()&&J.reset(),J.sm().isEmpty()||($g(S)&&J.handleDelete(S),bc(S)&&(J.moveSelection(-1,0),J.fi({kind:"moveLeft"})),Xd(S)&&(J.moveSelection(0,-1),J.fi({kind:"moveUp"})),Zf(S)&&(J.moveSelection(1,0),J.fi({kind:"moveRight"})),Cp(S)&&(J.moveSelection(0,1),J.fi({kind:"moveDown"}))))},handleScroll:function(I,w){ir(I);var i=this.lp(I);w>0?this.scrollZoomIn(i):0>w&&this.scrollZoomOut(i)},handlePinch:function(E,m,s){m>s?this.pinchZoomIn(E):this.pinchZoomOut(E)},checkDoubleClickOnNote:function(c,z){var b=this,l=b.lp(c),H=b.getDataUI(z),U=H.note2Info;return U&&z.s("note2.toggleable")&&lc(U.clickRect,l)?(z.s(Yn,!z.s(Yn)),b.fi({kind:"toggleNote2",event:c,data:z}),!0):(U=H.noteInfo,U&&z.s("note.toggleable")&&lc(U.clickRect,l)?(z.s(Dl,!z.s(Dl)),b.fi({kind:"toggleNote",event:c,data:z}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(h,m){var N=this,G=N.getAutoScrollZone(),M=G/N.getZoom(),n=G/4,D=N._29I,$=N.lp(h),T={x:N.tx(),y:N.ty()};return $&&G>0&&D&&($.x-D.x<M?N.translate(n,0):D.x+D.width-$.x<M&&N.translate(-n,0),$.y-D.y<M?N.translate(0,n):D.y+D.height-$.y<M&&N.translate(0,-n)),T.x=N.tx()-T.x,T.y=N.ty()-T.y,m&&(m.x+=T.x,m.y+=T.y),T},getMoveMode:function(j,h){var f=h.s("2d.move.mode");return f?f:wj["88"]?"x":wj["89"]?"y":"xy"}});var eb=function(o,z){var j=this;j.gv=o,j.s=function(x){return z.getStyle(x)},j._data=z,j._87I=new Ml};jf(eb,b,{_6I:L,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var E=this,X=E.gv.isSelected(E._data);return!X||E.isShadowed()?0:this.s("select.width")},getBodyColor:function(b){var p=this._data,J=this.gv.getBodyColor(p);return J?J:b?p.getStyle(b):L},_2Q:function(t){return this.s(t)},_1Q:function(X,Y,n,p){var M=this.s,f=M(Y+".dash.color");X.strokeStyle=f,X.lineWidth=n,X.stroke(),M(Y+".dash.3d")&&Gc(X,f,M(Y+".dash.3d.color"),n,this.gv._zoom,M(Y+".dash.3d.accuracy")),hh(X,p)},invalidate:function(){this._6I=L},_79o:function(){var t=this;if(!t._6I){t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=L,t._87I.clear(),t._3O();var I=t._data,Z=t.gv;t._55O=Z.isEditable(I)?{_42O:Z.isRectEditable(I),_43O:Z.isPointEditable(I),_56O:Z.isRotationEditable(I)}:L,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return Hp},_68o:function(R,L){R&&this._87I.add(ui(R,L))},_81o:function(){var w=this,g=w.s;w._24O(jk,"getLabel"),w._24O(ab,"getLabel2"),w._26O(nj,"getNote"),w._26O(ag,"getNote2"),w._15O(),w._55O&&w._48O();var k;if(w._87I.each(function(i){k=pl(k,i)}),k&&w.isShadowed()){var N=nb(k);N.x+=g("shadow.offset.x"),N.y+=g("shadow.offset.y"),oe(N,g("shadow.blur")),k=pl(k,N)}return w._87I.clear(),k},_42:function(h){var b=this,z=b._data,M=b.gv,t=b.s,p=t("opacity"),X=this.isShadowed();if(X){var u=h.shadowOffsetX,G=h.shadowOffsetY,r=h.shadowBlur,C=h.shadowColor;
h.shadowOffsetX=t("shadow.offset.x"),h.shadowOffsetY=t("shadow.offset.y"),h.shadowBlur=t("shadow.blur"),h.shadowColor=t("shadow.color")}if(p!=L){var x=h.globalAlpha;h.globalAlpha=p}b._80o(h),M.isLabelVisible(z)&&(_b(h,b.labelInfo),_b(h,b.label2Info)),M.isNoteVisible(z)&&(rh(h,b.noteInfo),rh(h,b.note2Info)),b._99O(h),p!=L&&(h.globalAlpha=x),X&&(h.shadowOffsetX=u,h.shadowOffsetY=G,h.shadowBlur=r,h.shadowColor=C),b._55O&&M.isEditVisible(z)&&b._47O(h)},_80o:function(){},_47O:function(){},_24O:function(u,r){var $=this,h=$._data,i=$.gv,z=$.s,k=i[r](h);if(k!=L){var W=z(u+".scale"),m=z(u+".max"),_=z(u+".position"),M=$[u+"Info"]={label:k,scale:W,color:i[r+"Color"](h),font:z(u+".font"),opacity:z(u+".opacity"),align:z(u+".align"),rotation:$.getRotation(z(u+".rotation"),!1,_),background:i[r+"Background"](h)},g=Wo(M,k);m>0&&m<g.width&&(M.labelWidth=g.width,g.width=m),1!==W&&(g.width*=W,g.height*=W);var e=$.getPosition(_,z(u+".offset.x"),z(u+".offset.y"),g,z(u+".position.fixed"));if(g.x=e.x-g.width/2,g.y=e.y-g.height/2,$._68o(M.rect=g,M.rotation),1!==W){var S=g.width/W,n=g.height/W;M.rect={x:e.x-S/2,y:e.y-n/2,width:S,height:n}}}},_26O:function(V,D){var E=this,W=E.gv,Y=E._data,v=E.s,z=W[D](Y);if(z!=L){var n,I,l=v(V+".scale"),x=E[V+"Info"]={note:z,scale:l,expanded:v(V+".expanded"),font:v(V+".font"),color:v(V+".color"),opacity:v(V+".opacity"),align:v(V+".align"),borderWidth:v(V+".border.width"),borderColor:v(V+".border.color"),background:W[D+"Background"](Y)},Z=E.getPosition(v(V+".position"),v(V+".offset.x"),v(V+".offset.y")),u=Z.x,S=Z.y;if(x.expanded){var r=v(V+".max"),c=Wo(x,z);c.width+=6,c.height+=2,r>0&&r<c.width&&(x.labelWidth=c.width,c.width=r),n=c.width,I=c.height+8,x.clickRect={x:u-n*l/2,y:S-I*l,width:n*l,height:I*l*c.height/I}}else n=12,I=18,x.clickRect={x:u-n*l/2,y:S-I*l,width:n*l,height:I*l};x.rect={x:u-n/2,y:S-I*l/2-I/2,width:n,height:I};var q=k(x.borderWidth/2)*l;E._68o({x:u-n*l/2-q,y:S-I*l-q,width:n*l+2*q,height:I*l+2*q})}},_48O:function(){},_99O:function(c){var s=this,m=s._38o;if(m){var O=s.gv,v=s._data,Q=m.icons;for(var i in Q){var G=Q[i],u=m.rects[i];if(u){var b=Ek(G.opacity,v,O),o=Ek(G.names,v,O),a=o?o.length:0,l=u.rotation;if(b!=L){var T=c.globalAlpha;c.globalAlpha*=b}for(var D=0;a>D;D++){var I=o[D],e=tm(I),A=u[D];if(l){var $=A.x+A.width/2,f=A.y+A.height/2;c.save(),mk(c,$,f),en(c,l),mk(c,-$,-f)}rj(c,e,Ek(G.stretch,v,O),A.x,A.y,A.width,A.height,s._data,s.gv),l&&c.restore()}b!=L&&(c.globalAlpha=T)}}}}});var Vo=function(U,r){Xc(Vo,this,[U,r])};jf(Vo,eb,{_40O:function(u,B){var f=this,e=f.s,w=u.rect;(u.borderColor=f.gv.getBorderColor(f._data))&&(u.borderType=e("border.type"),u.borderWidth=e("border.width"),u.borderPadding=e("border.padding"),B=K(B,u.borderPadding+u.borderWidth/2)),(u.selectWidth=f._2o())&&(u.selectType=e("select.type"),u._97o=e("select.color"),u.selectPadding=e("select.padding"),B=K(B,u.selectPadding+u.selectWidth/2)),B>0&&(w=nb(w),oe(w,B)),f._68o(w)},_39O:function(P,W){var v=W.rect;if(W.borderWidth>0){var E=W.borderPadding;P.strokeStyle=W.borderColor,P.lineWidth=W.borderWidth,kj(P,W.borderType,{x:v.x-E,y:v.y-E,width:v.width+2*E,height:v.height+2*E}),P.stroke()}W.selectWidth>0&&(E=W.selectPadding,P.strokeStyle=W._97o,P.lineWidth=W.selectWidth,kj(P,W.selectType,{x:v.x-E,y:v.y-E,width:v.width+2*E,height:v.height+2*E}),P.stroke())},_3O:function(){var c=this,C=c.s,S=c._data,h=S.getStyle(sq),Q=c.getBodyColor(),k=c._83o=h?{shape:h,_53o:c.getBodyColor("shape.background"),_27Q:tm(C("shape.repeat.image"),Q),_54o:C("shape.border.width"),_55o:C("shape.border.color"),_56o:C("shape.border.3d"),_57o:C("shape.border.3d.color"),_58o:C("shape.border.3d.accuracy"),shapeGradient:C("shape.gradient"),_59o:C("shape.gradient.color"),_60o:C("shape.border.pattern"),_61o:C("shape.border.cap"),_62o:C("shape.border.join")}:{img:tm(S.getImage(),Q),bodyColor:Q,stretch:C("image.stretch")};k.rect=S.getRect(),k.position=S.p(),k.rotation=S.getRotation(),h===Fo&&(k._63o=C("shape.depth")),c._40O(k,h?ki(L,k._54o/2,k._62o):0)},getPosition:function(E,A,P,Y){var a=Mp(E,this._83o.rect,Y);return a.x+=A,a.y+=P,a},_80o:function(Z){var P=this,d=P.s,E=P.gv,v=P._data,x=P._83o,w=x.rect,N=w,u=x.position,g=x.rotation,B=x.shape;if(w.width>0&&w.height>0){if(g&&(Z.save(),mk(Z,u.x,u.y),en(Z,g),mk(Z,-u.x,-u.y),N=v.getSize(),N.x=u.x-N.width/2,N.y=u.y-N.height/2),P.freeDraw)P.freeDraw(Z,N,x);else if(B){var $,k,Y,J,o=x._60o,r=Zg(Z,o),b=x._53o,K=x._27Q,y=x._54o,p=x._55o,H=Z.lineJoin,n=Z.lineCap;if("roundRect"===B?$=d("shape.corner.radius"):"polygon"===B?$=d("shape.polygon.side"):"arc"===B&&($=d("shape.arc.from"),k=d("shape.arc.to"),Y=d("shape.arc.close"),J=d("shape.arc.oval")),Z.lineJoin=x._62o,Z.lineCap=x._61o,b||K?(K?Ue(Z,K):Fg(Z,b,x.shapeGradient,x._59o,N),kj(Z,B,N,$,k,Y,J),Z.fill(),Z!==r&&kj(r,B,N,$,k,Y,J)):kj(r,B,N,$,k,Y,J),y>0&&(Z.lineWidth=y,Z.strokeStyle=p,Z.stroke(),x._56o&&Gc(Z,p,x._57o,y,E._zoom,x._58o)),hh(Z,o),d("shape.dash")){var M=d("shape.dash.width")||y;if(M>0){o=d("shape.dash.pattern");var r=Zg(Z,o,P._2Q("shape.dash.offset"));r!==Z&&kj(r,B,N,$,k,Y,J),P._1Q(Z,"shape",M,o)}}yi(Z,b,x._63o,N),Z.lineJoin=H,Z.lineCap=n}else rj(Z,x.img,x.stretch,N.x,N.y,N.width,N.height,v,E,x.bodyColor);g&&Z.restore()}P._39O(Z,x)},_48O:function(){var e,A=this,h=A._data,B=A.gv,x=A._55O,q=B.getEditPointSize()/2+2;if(x._42O&&(e=h.getRect(),oe(e,q)),x._56O){var g=x._98o=B.getRotationPoint(h);e=pl(e,{x:g.x-q,y:g.y-q,width:2*q,height:2*q})}A._68o(e)},_47O:function(n){var l=this,O=l.gv,g=l._55O,V=l._data.getRect(),D=O.getEditPointSize(),z=g._98o;g._42O&&(n.fillStyle=O.getEditPointBackground(),n.strokeStyle=O.getEditPointBorderColor(),n.lineWidth=1,[{x:V.x,y:V.y},{x:V.x+V.width/2,y:V.y},{x:V.x+V.width,y:V.y},{x:V.x,y:V.y+V.height/2},{x:V.x+V.width,y:V.y+V.height/2},{x:V.x,y:V.y+V.height},{x:V.x+V.width/2,y:V.y+V.height},{x:V.x+V.width,y:V.y+V.height}].forEach(function(I){kh(n,I.x-D/2,I.y-D/2,D,D),n.stroke()})),g._56O&&(n.fillStyle=O.getEditPointBorderColor(),n.strokeStyle=O.getEditPointBackground(),n.lineWidth=1,n.beginPath(),n.arc(z.x,z.y,D/2,0,B,!0),n.fill(),n.stroke())}});var so=function(Y,i){Xc(so,this,[Y,i])},Nq=function(c,e,L,E){var w=Oh(c,e);return L=E?C(L,w):Tk(L,w),w?L/=w:L=0,{x:c.x+(e.x-c.x)*L,y:c.y+(e.y-c.y)*L}};jf(so,eb,{_3O:function(){var X,U=this,w=U._data,S=U.gv,J=U.s,t=J(Xh),C=w.isLooped(),o=J("edge.width"),H=J("edge.center"),m=J("edge.offset"),p=S.getBorderColor(w),k=p?J("border.width"):0,x=U._2o(),M=w._40I,e=w._41I,Q=U._78o=M&&e?{looped:C,type:t,width:o,center:H,color:U.getBodyColor("edge.color"),borderColor:p,borderWidth:k,_97o:x?J("select.color"):L,selectWidth:x,pattern:J("edge.pattern"),cap:J("edge.cap"),join:J("edge.join"),is3d:J("edge.3d"),_67o:J("edge.3d.color"),_66o:J("edge.3d.accuracy")}:L;if(Q){var s=h.getEdgeType(t);if(s){var P=s(w,jc(U,S,w,C,t),S,U._19Q);P.points&&P.points.size()>1&&(Q._4O=P,X=Aj(Q._4O.points))}else{var A=Wm(S,M,J("edge.source.position"),J("edge.source.offset.x"),J("edge.source.offset.y")),T=Wm(S,e,J("edge.target.position"),J("edge.target.offset.x"),J("edge.target.offset.y"));if(t===Yk){var W=Q.points=J(ij)||rk,D=W.size();if(Q.segments=J("edge.segments"),!H)if(m){var r=Nq(A,D?W.get(0):T,m,D),u=Nq(T,D?W.get(D-1):A,m,D);A=r,T=u}else{var z=Bf(S,M),c=Bf(S,e),b=cq(A,D?W.get(0):T,z);b&&(A={x:b[0],y:b[1]}),b=cq(D?W.get(D-1):A,T,c),b&&(T={x:b[0],y:b[1]})}X=pl(Aj(Q.points),Aj(A,T))}else{var i=jc(U,S,w,C,t);if(U._19Q||(i=-i),C)A=nb(A),A.x-=M.getWidth()/2,Q.radius=i,X={x:A.x-i,y:A.y-i,width:2*i,height:2*i};else{var y=Oh(A,T),Y=Tk(m,y),r={x:Y,y:i},u={x:y-Y,y:i},n=l(T.y-A.y,T.x-A.x),$=Q.mat=new ls(n);if(Q.orienAngle=n,Q.angle=T.x<A.x?n+E:n,Q.rect={x:r.x,y:r.y,width:u.x-r.x,height:0},Q.origin=A,r=$.tf(r),r.x+=A.x,r.y+=A.y,u=$.tf(u),u.x+=A.x,u.y+=A.y,H){var R={x:y,y:0};R=$.tf(R),R.x+=A.x,R.y+=A.y,X=Aj([A,r,u,R]),Q.c1=A,Q.c2=R}else X=Aj(r,u);A=r,T=u}}Q._69o=A,Q._70o=T}ki(X,o/2+k+x,Q.join),U._68o(X)}},getRotation:function(u,l,D){u=u||0;var c=this._78o;if(c){var Q,I=c.angle,p=c.points,Y=c._4O;if(I!=L)return l?c.orienAngle+u:I+u;if(Y){var t=Y.points;return Q=t.size(),wb[D]?Q&&0===Q%2?el(t.get(Q/2-1),t.get(Q/2),l,u):u:Zo[D]?el(t.get(0),t.get(1),l,u):el(t.get(Q-2),t.get(Q-1),l,u)}if(p)return Q=p.size(),wb[D]?Q&&0===Q%2?el(p.get(Q/2-1),p.get(Q/2),l,u):u:Zo[D]?el(c._69o,Q?p.get(0):c._70o,l,u):el(Q?p.get(Q-1):c._69o,c._70o,l,u)}return u},getPosition:function(A,s,B,K,W){var f=this._78o;if(f){var y,z=f.type,t=f.points,j=f._4O,e=f._69o,o=f._70o;if(!z)return f.looped?{x:e.x-f.radius+s,y:e.y+B}:(W&&e&&o&&(e.x>o.x||e.x===o.x&&e.y>o.y)&&(A=ur[A],B=-B),y=Mp(A,f.rect,K),y.x+=s,y.y+=B,y=f.mat.tf(y),y.x+=f.origin.x,y.y+=f.origin.y,y);if(t){var y,b=t.size();if(wb[A]){if(b){var R=b%2;if(0===R)return Gf(t.get(b/2-1),t.get(b/2),A,s,B,K,W);y=t.get((b-R)/2)}else y={x:(e.x+o.x)/2,y:(e.y+o.y)/2};return y=Mp(A,{x:y.x,y:y.y,width:0,height:0},K),y.x+=s,y.y+=B,y}return Zo[A]?Gf(e,b?t.get(0):o,A,s,B,K,W):Gf(b?t.get(b-1):e,o,A,s,B,K,W)}if(j){var G=j.points,b=G.size();if(wb[A]){var R=b%2;return 0===R?Gf(G.get(b/2-1),G.get(b/2),A,s,B,K,W):(y=G.get((b-R)/2),y=Mp(A,{x:y.x,y:y.y,width:0,height:0},K),y.x+=s,y.y+=B,y)}return Zo[A]?Gf(G.get(0),G.get(1),A,s,B,K,W):Gf(G.get(b-2),G.get(b-1),A,s,B,K,W)}}return Hp},_42:function(D){this._78o&&so.superClass._42.call(this,D)},drawPath:function(u,U){u.beginPath();var o=U.type,a=U.points,_=U.segments,N=U._4O;if(!o||a){var H=U._69o,Y=H.x,d=H.y,x=U._70o,R=x.x,k=x.y;if(o)if(_){var P=new Ml({x:Y,y:d});P.addAll(a),P.add({x:R,y:k}),Fp(u,P,_)}else u.moveTo(Y,d),a.each(function(C){u.lineTo(C.x,C.y)}),u.lineTo(R,k);else U.looped?u.arc(Y,d,U.radius,0,B,!0):U.center?(u.moveTo(U.c1.x,U.c1.y),u.lineTo(Y,d),u.lineTo(R,k),u.lineTo(U.c2.x,U.c2.y)):(u.moveTo(Y,d),u.lineTo(R,k))}else N&&Fp(u,N.points,N.segments)},_80o:function(y){var A=this,D=A.s,r=A._78o,I=r.width,j=r.selectWidth,u=r.borderWidth,w=r.color,F=y.lineJoin,E=y.lineCap,U=r.pattern;if(y.lineJoin=r.join,y.lineCap=r.cap,A.drawPath(Zg(y,U),r),j&&(y.strokeStyle=r._97o,y.lineWidth=I+2*(u+j),y.stroke()),u&&(y.strokeStyle=r.borderColor,y.lineWidth=I+2*u,y.stroke()),y.strokeStyle=w,y.lineWidth=I,y.stroke(),r.is3d&&Gc(y,w,r._67o,I,A.gv._zoom,r._66o),hh(y,U),D("edge.dash")){U=D("edge.dash.pattern");var b=Zg(y,U,A._2Q("edge.dash.offset"));b!==y&&A.drawPath(b,r),A._1Q(y,"edge",D("edge.dash.width")||I,U)}y.lineJoin=F,y.lineCap=E},_48O:function(){var w=this,j=w._78o;if(w._55O._43O&&j&&j.points){var Z=Aj(j.points);Z&&(oe(Z,w.gv.getEditPointSize()/2+2),w._68o(Z))}},_47O:function(o){var N=this,K=N.gv,D=N._78o;if(N._55O._43O&&D&&D.points){var l=K.getEditPointSize()/2;o.fillStyle=K.getEditPointBackground(),o.strokeStyle=K.getEditPointBorderColor(),o.lineWidth=1,D.points.each(function(E){o.beginPath(),o.arc(E.x,E.y,l,0,B,!0),o.fill(),o.stroke()})}},_71o:function(r,X){var z=this,O=z._data;if(z._19Q=!0,!O.getEdgeGroup())return r?O.s("edge.gap"):0;var Z,A=0,T=0,I=0;if(O.getEdgeGroup().getSiblings().each(function(U){U.each(function(K){if(z.gv.isVisible(K)&&K.s(Xh)==X){var v=K.s("edge.gap");Z?(T+=I/2+v/2,I=v):(Z=K,I=v),K===O&&(A=T)}})}),r)return T-A+I;var S=A-T/2;return Z&&O._40I!==Z._40I&&(z._19Q=!1),S}});var Bj=function(X,c){Xc(Bj,this,[X,c])};jf(Bj,Vo,{_3O:function(){var P,Y,W=this,g=W.s,k=W._data,i=W.gv;if(W._88I=L,k.isExpanded()&&k.eachChild(function(y){var X=i.getBoundsForGroup(y);X&&(Y||(Y=[]),Y.push(X),P=pl(P,X))}),P){var u=i.getLabel(k),w=g("group.type");P=ei(w,Y,P),eo(P,k,"group.padding",1);var z=W._88I={type:w,rect:P,_64o:P};if(!w&&u!=L){var o,f=W.labelInfo={label:u,color:g("group.title.color"),font:g("group.title.font")},A=Wo(f,u),T=A.width,G=A.height,j=g("group.title.align");T>P.width&&(P.width=T),f.rect={y:P.y-G,width:A.width,height:G},o=j===X?P.x:j===a?P.x+P.width-T:P.x+P.width/2-T/2,f.rect.x=o,z.titleRect={x:P.x,y:P.y-G,width:P.width,height:G+1},z.rect={x:P.x,y:P.y-G,width:P.width,height:P.height+G}}W._40O(z,g("group.border.width")/2)}else Bj.superClass._3O.call(W)},getPosition:function(c,v,Q,L){var C=this._88I;if(C){var m=Mp(c,C.rect,L);return m.x+=v,m.y+=Q,m}return Bj.superClass.getPosition.apply(this,arguments)},_24O:function(k,z){var i=this._88I;(!i||i.type||"label2"===k)&&Bj.superClass._24O.call(this,k,z)},_80o:function(m){var o=this,l=o._88I;if(l){var K=o._data,P=o.s,$=o.gv,e=l.type,O=l.rect,E=l._64o,n=l.titleRect,b=o.getBodyColor(),j=tm(P("group.image"),b),Y=P("group.image.stretch"),y=o.getBodyColor("group.background"),v=tm(P("group.repeat.image"),b),M=P("group.gradient"),A=P("group.gradient.color"),H=P("group.depth");if(e){var V=P("group.border.pattern"),W=P("group.border.width"),I=m.lineJoin,Z=m.lineCap;if(m.lineJoin=P("group.border.join"),m.lineCap=P("group.border.cap"),j){if(m.save(),kj(m,e,O),m.clip(),rj(m,j,Y,O.x,O.y,O.width,O.height,K,$,b),m.restore(),W>0){var w=Zg(m,V);kj(w,e,O),m.lineWidth=W,m.strokeStyle=P("group.border.color"),m.stroke(),hh(m,V)}}else{var w=Zg(m,V);y||v?(v?Ue(m,v):Fg(m,y,M,A,O),kj(m,e,O),m.fill(),m!==w&&kj(w,e,O)):kj(w,e,O),W>0&&(m.lineWidth=W,m.strokeStyle=P("group.border.color"),m.stroke()),hh(m,V),e===Fo&&yi(m,y,H,O)}m.lineJoin=I,m.lineCap=Z}else if(j?rj(m,j,Y,E.x,E.y,E.width,E.height,K,$,o.getBodyColor()):(y||v)&&(v?Ue(m,v):Fg(m,y,M,A,E),kj(m,Fo,E),m.fill(),yi(m,y,H,E)),n){var B=P("group.title.background");kh(m,n.x,n.y,n.width,n.height,B),yi(m,B,H,n)}o._39O(m,l)}else Bj.superClass._80o.call(o,m)}});var Rk=function(T,r){Xc(Rk,this,[T,r])};jf(Rk,Vo,{_3O:function(){var v=this,K=v._data,w=v.s,o=v.gv,Y=K.getPoints(),N=o.getBorderColor(K),B=N?w("border.width"):0,A=v._2o(),e=w("shape.border.width"),E=K.getRect(),c=o.getBodyColor(K),H=v._99o=Y.isEmpty()?L:{rect:E,rotation:K.getRotation(),position:K.p(),points:Y,segments:K.getSegments(),bodyColor:c,borderColor:N,borderWidth:B,_94o:w("shape.border.3d"),_95o:w("shape.border.3d.color"),_96o:w("shape.border.3d.accuracy"),_97o:A?w("select.color"):L,selectWidth:A,_53o:w("shape.background"),_27Q:tm(w("shape.repeat.image"),c),_54o:e,_55o:w("shape.border.color"),shapeGradient:w("shape.gradient"),_59o:w("shape.gradient.color"),_60o:w("shape.border.pattern"),_61o:w("shape.border.cap"),_62o:w("shape.border.join")};if(H){var Z=e/2+B+A;Z&&(E=nb(E),ki(E,Z,H._62o)),v._68o(E)}},getPosition:function(X,t,h,r){var I=this._99o;if(I){var Y=Mp(X,I.rect,r);return Y.x+=t,Y.y+=h,Y}return Hp},_42:function(i){this._99o&&Rk.superClass._42.call(this,i)},_80o:function(Q){var H,V=this,W=V.s,C=V._99o,n=C.position,o=C.rotation,e=C.bodyColor,U=C.borderWidth,P=C.selectWidth,g=C._53o,r=C._27Q,u=C._54o,t=C.points,Z=C.segments,X=V._data.isClosePath();o&&(Q.save(),mk(Q,n.x,n.y),en(Q,o),mk(Q,-n.x,-n.y));var f=C._60o,G=Zg(Q,f),x=Q.lineJoin,d=Q.lineCap;if(Q.lineJoin=C._62o,Q.lineCap=C._61o,g||r?(r?Ue(Q,r):(H=e?e:g,Fg(Q,H,C.shapeGradient,C._59o,C.rect)),Fp(Q,t,Z,X),Q.fill(),G!==Q&&Fp(G,t,Z,X)):Fp(G,t,Z,X),P&&(Q.strokeStyle=C._97o,Q.lineWidth=u+2*(U+P),Q.stroke()),U&&(Q.strokeStyle=C.borderColor,Q.lineWidth=u+2*U,Q.stroke()),u&&(H=C._55o,!g&&e&&(H=e),Q.strokeStyle=H,Q.lineWidth=u,Q.stroke(),C._94o&&Gc(Q,H,C._95o,u,V.gv._zoom,C._96o)),hh(Q,f),W("shape.dash")){var v=W("shape.dash.width")||u;if(v>0){f=W("shape.dash.pattern");var G=Zg(Q,f,V._2Q("shape.dash.offset"));G!==Q&&Fp(G,t,Z,X),V._1Q(Q,"shape",v,f)}}Q.lineJoin=x,Q.lineCap=d,o&&Q.restore()},_48O:function(){var E=this;if(Rk.superClass._48O.call(E),E._55O._43O){var _=E._data.getRect();oe(_,E.gv.getEditPointSize()/2+2),E._68o(_)}},_47O:function(g){var d=this;if(Rk.superClass._47O.call(d,g),d._55O._43O){var E=d.gv,Q=E.getEditPointSize()/2;g.fillStyle=E.getEditPointBackground(),g.strokeStyle=E.getEditPointBorderColor(),g.lineWidth=1,d._data.getPoints().each(function(u){g.beginPath(),g.arc(u.x,u.y,Q,0,B,!0),g.fill(),g.stroke()})}}});var Gd=function(G,x){Xc(Gd,this,[G,x])};jf(Gd,Rk,{getRotation:function(B,j,O){B=B||0;var A=this._data.getPoints(),E=A.size();return E>1?wb[O]?E&&0===E%2?el(A.get(E/2-1),A.get(E/2),j,B):B:Zo[O]?el(A.get(0),A.get(1),j,B):el(A.get(E-2),A.get(E-1),j,B):B},getPosition:function(U,R,x,B,V){var g=this._data.getPoints(),I=g.size();if(I>1){if(wb[U]){var Z=I%2;if(0===Z)return Gf(g.get(I/2-1),g.get(I/2),U,R,x,B,V);var b=g.get((I-Z)/2),j={x:b.x,y:b.y,width:0,height:0};return b=Mp(U,j,B),b.x+=R,b.y+=x,b}return Zo[U]?Gf(g.get(0),g.get(1),U,R,x,B,V):Gf(g.get(I-2),g.get(I-1),U,R,x,B,V)}return Hp}});var $f=function(N,F){Xc($f,this,[N,F])};jf($f,Vo,{_3O:function(){var u=this;$f.superClass._3O.call(u);var U=u.s,$=u._83o;u._82o=$.img||$.shape?L:{background:u.getBodyColor("grid.background"),depth:U("grid.depth"),rect:$.rect,_88o:U("grid.cell.depth"),cellBorderColor:U("grid.cell.border.color"),_89o:U("grid.row.count"),_90o:U("grid.column.count"),block:U("grid.block"),_91o:U("grid.block.color"),_92o:U("grid.block.padding"),_93o:U("grid.block.width")}},_80o:function(o){var J=this,d=J._82o;if(!d)return $f.superClass._80o.call(J,o),void 0;var A,C,z=J._data,r=d.background,G=d.rect,s=d.block,f=d._91o,w=d._92o,W=d._93o,R=d._88o,L=d.cellBorderColor,U=d._89o,g=d._90o;if(r)if(kh(o,G.x,G.y,G.width,G.height,r),yi(o,r,d.depth,G),R)for(A=0;U>A;A++)for(C=0;g>C;C++)G=z.getCellRect(A,C),G&&yi(o,r,R,G);else if(L){for(o.beginPath(),A=0;U>A;A++)for(C=0;g>C;C++)G=z.getCellRect(A,C),G&&o.rect(G.x,G.y,G.width,G.height);o.strokeStyle=L,o.lineWidth=1,o.stroke()}if("h"===s)for(A=0;U>A;A++)G=pl(z.getCellRect(A,0),z.getCellRect(A,g-1)),oe(G,w),ai(o,f,G.x,G.y,G.width,G.height,W);else if("v"===s)for(C=0;g>C;C++)G=pl(z.getCellRect(0,C),z.getCellRect(U-1,C)),oe(G,w),ai(o,f,G.x,G.y,G.width,G.height,W);J._39O(o,J._83o)}});var xs=To.Interactor=function(j){this.gv=this._graphView=j};jj("Interactor",b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(B){this.gv.fi(B)},setCursor:function(x){S||(this.getView().style.cursor=x)},startDragging:function(U){var a=this;a._lastClientPoint=vo(U),a._lastLogicalPoint=a.gv.lp(U),dc(a,U)},clearDragging:function(){var N=this;N._lastClientPoint=N._lastLogicalPoint=N._logicalPoint=L},autoScroll:function(Y){return this.gv.autoScroll(Y,this._lastClientPoint)}});var En=To.DefaultInteractor=function(F){Xc(En,this,[F])};jj("DefaultInteractor",xs,{handle_mousedown:function(G){ir(G);var N=this,e=N.gv,X=e.getDataAt(G);e.setFocus(G)&&!e._editing&&(_e(G)?e.handleDoubleClick(G,X):e.handleClick(G,X),e.isPannable()&&!X&&Gg(G)&&!Yq(G)&&(N._tx=e.tx(),N._ty=e.ty(),N.startDragging(G)))},handleWindowMouseUp:function(B){var D=this,s=D.gv;s._panning&&(delete s._panning,s.onPanEnded(),D.fi({kind:"endPan",event:B})),delete D._tx,delete D._ty,D.clearDragging()},handle_mousemove:function(E){var I=this,D=I.gv;I._hoverTimer&&(W(I._hoverTimer),delete I._hoverTimer),I._hoverTimer=P(function(){I.fi({kind:"hover",event:E}),W(I._hoverTimer),delete I._hoverTimer},D.getHoverDelay()||800)},handle_touchmove:function(B){this.handle_mousemove(B)},handleWindowMouseMove:function(G){var U=this,K=U.gv,c=U._lastClientPoint;U.fi({kind:K._panning?"betweenPan":"beginPan",event:G}),K._panning=1,K.setTranslate(U._tx+G.clientX-c.x,U._ty+G.clientY-c.y)},handle_mousewheel:function(b){this.gv.handleScroll(b,b.wheelDelta)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(S){this.gv.handleKeyDown(S)}});var vn=To.SelectInteractor=function(E){Xc(vn,this,[E])};jj("SelectInteractor",xs,{_42:function(){var Y=this,B=Y.gv,J=B.getZoom(),z=Y.mark,s=Y.div;s||(s=Y.div=lo(),Dg(Y.getView(),s));var W={};W.x=z.x*J+B.tx(),W.y=z.y*J+B.ty(),W.width=z.width*J,W.height=z.height*J,kl(s,W),this.intersects()?(s.style.border="",s.style.background=B.getRectSelectBackground()):(s.style.background="",s.style.border="1px solid "+B.getRectSelectBorderColor())},handle_mousedown:function(O){var r=this,u=r.gv;if(r._57I=L,!u._editing){var Q=u.getDataAt(O),S=u.sm();Q?Yq(O)?S.co(Q)?S.rs(Q):S.as(Q):S.co(Q)||S.ss(Q):Yq(O)||!u.isPannable()?Gg(O)&&(Yq(O)||S.cs(),u.isRectSelectable()&&(r.startDragging(O),u._77O=1)):r._57I=vo(O)}},handle_mouseup:function(u){var $=this,e=$._57I;e&&(Oh(e,vo(u))<=1&&$.gv.sm().cs(),$._57I=L)},handleWindowMouseUp:function(L){this.clear(L)},handleWindowMouseMove:function(q){var W=this,n=W.gv;W._logicalPoint=n.lp(q),W.mark?(W.fi({kind:"betweenRectSelect",event:q}),W.autoScroll(q),W.redraw()):W.fi({kind:"beginRectSelect",event:q}),W.mark=Aj(W._lastLogicalPoint,W._logicalPoint),W.redraw()},intersects:function(){var K=this,B=K._lastLogicalPoint,w=K._logicalPoint;return B.x>w.x||B.y>w.y},clear:function(j){var I=this,C=I.gv,Q=I.mark;if(I._57I=L,I._lastLogicalPoint){if(Q){if(0!==Q.width&&0!==Q.height){var w=C.getDatasInRect(Q,I.intersects());if(!w.isEmpty()){var T=C.sm(),s=T.toSelection();w.each(function(t){T.co(t)?s.remove(t):s.add(t)}),T.ss(s)}}db(I.div),delete I.div,delete I.mark,I.redraw(),I.fi({kind:"endRectSelect",event:j}),C.onRectSelectEnded()}I.clearDragging(),delete C._77O}},redraw:function(){var o=this;o._draw||(o._draw=1,P(function(){o.mark&&o._42(),delete o._draw},16))}});var gp=To.MoveInteractor=function(B){Xc(gp,this,[B])};jj("MoveInteractor",xs,{handle_mousedown:function(r){var Y=this,Z=Y.gv;if(Gg(r)&&!Z._editing){var C=Z.getSelectedDataAt(r);C?(Y._data=C,Z.handleMouseDown&&Z.handleMouseDown(r,C),Y.startDragging(r),Z.isMovable(C)&&(Z._moving=1)):Z._focusData=L}},handleWindowMouseUp:function(V){var B=this,R=B.gv;R.handleMouseUp&&R.handleMouseUp(V,B._data),B.clear(V)},handleWindowMouseMove:function(L){var g=this,N=g.gv,H=g._data,J=N.getDataModel(),i=J.getHistoryManager();if((!N._93O||!N._93O(L,H))&&N._moving){var K=g._logicalPoint?"betweenMove":"beginMove",U={kind:K,event:L},r=g._logicalPoint=N.lp(L);i&&"beginMove"===K&&i.beginInteraction();var s=r.x-g._lastLogicalPoint.x,f=r.y-g._lastLogicalPoint.y,O=N.getMoveMode(L,H);O&&("x"===O?f=0:"y"===O?s=0:"xy"!==O&&(s=f=0)),N.moveSelection(s,f),g._lastLogicalPoint=r,g.autoScroll(L),g.fi(U)}},clear:function(p){var o=this,a=o.gv,m=a.getDataModel(),Y=m.getHistoryManager();o._lastLogicalPoint&&(o._lastLogicalPoint=o._data=a._moving=L,o._logicalPoint&&(o.fi({kind:"endMove",event:p}),a.onMoveEnded(),Y&&Y.endInteraction()),o.clearDragging())}});var ff=To.EditInteractor=function(v){Xc(ff,this,[v])};jj("EditInteractor",xs,{ms_edit:1,setUp:function(){var e=this;ff.superClass.setUp.call(e),S||e.gv.setEditInteractor(e)},tearDown:function(){ff.superClass.tearDown.call(this),S||this.gv.setEditInteractor(L)},clear:function(){var d=this,g=d.gv;g._editing&&(g._editing=d._77I=d._node=d._edge=d._shape=d._rect=d._89I=d._index=L,d.clearDragging(),d.setCursor(z))},handle_mousedown:function(g){var q=this,h=q.gv.dm(),$=h.getHistoryManager(),A=q._index,C=q._node,X=q._shape,Y=q._edge,d=q._77I,V=q._89I;Gg(g)&&q.gv._editing&&(C&&V?(q._rect=C.getRect(),q.startDragging(g),$&&$.beginInteraction(),q.fi({kind:"beginEditRect",event:g,data:C,direction:V})):X&&A>=0?(q.startDragging(g),$&&$.beginInteraction(),q.fi({kind:"beginEditPoint",event:g,data:X,index:A})):Y&&A>=0?(q.startDragging(g),$&&$.beginInteraction(),q.fi({kind:"beginEditPoint",event:g,data:Y,index:A})):d&&(q.startDragging(g),$&&$.beginInteraction(),q.fi({kind:"beginEditRotation",event:g,data:d})))},handleWindowMouseUp:function(k){this._46O(k),this.clear()},handleWindowMouseMove:function(A){this._78I(A)},handle_mousemove:function($){if(!rp){var j=this,M=j.gv;j._79I($,M.getSelectedDataAt($))?M._editing=1:j.clear()}}});var Vk=To.TouchInteractor=function(W,Z){Z=Z||{},Z.selectable===Y&&(Z.selectable=!0),Z.movable===Y&&(Z.movable=!0),Z.pannable===Y&&(Z.pannable=!0),Z.pinchable===Y&&(Z.pinchable=!0),Z.editable===Y&&(Z.editable=!0),this.params=Z,Xc(Vk,this,[W])};jj("TouchInteractor",xs,{ms_edit:1,setUp:function(){var z=this;Vk.superClass.setUp.call(z),S&&z.params.editable&&z.gv.setEditInteractor(z)},tearDown:function(){var y=this;Vk.superClass.tearDown.call(y),S&&y.params.editable&&y.gv.setEditInteractor(L)},clear:function(P){var F=this,r=F.gv,B=r.dm().getHistoryManager();r._moving&&(F.fi({kind:"endMove",event:P}),delete r._moving,r.onMoveEnded(),B&&B.endInteraction()),r._panning&&(F.fi({kind:"endPan",event:P}),delete r._panning,r.onPanEnded()),r._pinching&&(F.fi({kind:"endPinch",event:P}),delete r._pinching,r.onPinchEnded()),r._editing&&(F._46O(P),F._77I=F._node=F._edge=F._shape=F._rect=F._89I=F._index=r._editing=L),F._moving=F._panning=F._pinching=F._editing=F._57I=F._data=F._beginHistory=L,F.clearDragging()},handle_touchstart:function(b){var J=this;if(!J.gv._editing){ir(b),J._57I=L;var h=J.params,S=J.gv,d=S.sm(),p=S.getDataAt(b),P=mh(b);if(1===P)_e(b)?S.handleDoubleClick(b,p):(S.handleClick(b,p),p&&(S.handleMouseDown&&S.handleMouseDown(b,p),J._data=p)),h.selectable||(p=L),p?(d.co(p)||d.ss(p),h.editable&&S.isEditable(p)&&J._79I(b,p,!0)?(J._editing=1,J.startDragging(b)):h.movable&&S.isMovable(p)&&(J._moving=1,J.startDragging(b))):(J._57I=vo(b),h.pannable&&S.isPannable()&&(J._panning=1,J.startDragging(b),J._translate={x:S.tx(),y:S.ty()}));else if(h.pinchable&&2===P){J._pinching=1,J.startDragging(b);var a=S.getView(),v=S.getZoom(),g=a.getBoundingClientRect(),F=b.touches[0],I=b.touches[1],q={x:(F.clientX+I.clientX)/2-g.left,y:(F.clientY+I.clientY)/2-g.top};q.x-=S.tx(),q.y-=S.ty(),q.x/=v,q.y/=v,J._p=q,J._d=Qq(b)}}},handle_touchend:function(d){var n=this,P=n.gv,J=n._57I,G=n._data;J&&(Oh(J,vo(d))<=1&&P.sm().cs(),n._57I=L),G&&P.handleMouseUp&&P.handleMouseUp(d,G)},handleWindowTouchEnd:function(S){this.clear(S)},handleWindowTouchMove:function(f){var U=this,M=U.gv,S=M.dm().getHistoryManager(),G=mh(f);if(1===G){if(U._editing&&(S&&!U._beginHistory&&(U._beginHistory=1,S.beginInteraction()),M._editing=1,U._78I(f)),U._moving)S&&!U._beginHistory&&(U._beginHistory=1,S.beginInteraction()),U.handleMove(f);else if(U._panning){var Y=vo(f);M.setTranslate(U._translate.x+Y.x-U._lastClientPoint.x,U._translate.y+Y.y-U._lastClientPoint.y),U.fi({kind:M._panning?"betweenPan":"beginPan",event:f}),M._panning=1}}else if(2===G&&U._pinching){var r=Qq(f);M.handlePinch(U._p,r,U._d),U._d=r,U.fi({kind:M._pinching?"betweenPinch":"beginPinch",event:f}),M._pinching=1}},handleMove:function(j){var T=this,D=T.gv,M=D.lp(j);D._93O&&D._93O(j,T._data)||(D.moveSelection(M.x-T._lastLogicalPoint.x,M.y-T._lastLogicalPoint.y),T._lastLogicalPoint=M,T.autoScroll(j),T.fi({kind:D._moving?"betweenMove":"beginMove",event:j}),D._moving=1)}});var Fd="directional",Gb="point",eq="spot",zj="light.color";tl(h,{graph3dViewAttributes:L,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:E/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Bh,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:E/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(Z,O){Hl[Z]=O},getShape3dModel:function(O){return Hl[O]},createMatrix:function(J,L){zc(J)||(J=[J]);for(var V=J.length-1;V>=0;V--){var P=J[V];L=Eb(P.mat,P.s3,P.r3,P.rotationMode,P.t3,L)}return L},transformVec:function(q,P){return Yp(q,P)},createBoxModel:function(){return{vs:Ln,ns:As,uv:pb,is:Df}},createRoundRectModel:function(i,X){return El.roundRect(i,X)},createStarModel:function(b,w){return El.star(b,w)},createRectModel:function(S,O){return El.rect(S,O)},createTriangleModel:function(P,y){return El.triangle(P,y)},createRightTriangleModel:function(r,Z){return El.rightTriangle(r,Z)},createParallelogramModel:function(J,D){return El.parallelogram(J,D)},createTrapezoidModel:function(y,Z){return El.trapezoid(y,Z)},createSmoothSphereModel:function(L,l,r,_,f,u,G){return ws(new Xi(L,l,r,_,f,u,G))},createSphereModel:function(S,R,r,M,U,t){return S?ml(S,R,r,M,U,t):h.createSmoothSphereModel()},createSmoothConeModel:function(J,U,j,Y,e){return vg(J,U,j,Y,e)},createConeModel:function(z,u,H,n,R,v){return z?jq(z,u,H,n,R,v):vg(v)},createSmoothCylinderModel:function(Q,X,t,A,L,J,d,U){return ws(new wh(Q,X,t,A,L,J,d,U))},createCylinderModel:function(R,f,X,P,T,b,x){return R?_p(R,f,X,P,T,b,x):fn(b,x)},createSmoothTorusModel:function(G,k,E,Y,f,J){return ws(new Xe(G,k,E,Y,f,J))},createTorusModel:function(i,Z,Q,E,u,P,J){return i?Hg(i,Z,Q,E,u,P,J):Qe(P,J)},createExtrusionModel:function(l,C,k,p,x,I,U,f){return Mr(l,C,k,p,x,I,U,f)},createSmoothRingModel:function(z,j,b,U,B,p){for(var N=[],f=0;f<z.length-1;f+=2)N.push({x:z[f],y:z[f+1]});for(z=ph(N,j,b)[0],N=[],f=0;f<z.length;f++){var K=z[f];N.push(new Ir(K.x,0,K.y))}return ws(new Dh(N,p,U,B))},createRingModel:function(N,v,F,y,s,Y,J,C,f,m){for(var A=[],$=0;$<N.length-1;$+=2)A.push({x:N[$],y:N[$+1]});Y=Y||h.shapeSide,J=J||0,C=C||Y;var U,R,b,E,P,W,Z,I,g,B,$,X,i,j,G,o,T,a,O=[],M=[],u=f?[]:L,H=f?[]:L,k=m?[]:L,q=m?[]:L,l=y?[]:L,r=y?[]:L,K=s?[]:L,n=s?[]:L,N=ph(A,v,F),z=cg(N),p=0,D=2*Math.PI/Y;return N.forEach(function(S){if(b=S.length,b>1){if(E=S[0],y)for(W=E.x,I=E.y,$=J;C>$;$++)X=$+1,i=$*D,j=X*D,G=e(i),o=x(i),T=e(j),a=x(j),l.push(G*W,I,-o*W,T*W,I,-a*W,0,I,0),r.push(.5-.5*G,.5-.5*o,.5-.5*T,.5-.5*a,.5,.5);for(B=0;b>B;B++){for(P=S[B],W=E.x,Z=P.x,I=E.y,g=P.y,U=p/z,p+=Oh(E,P),R=p/z,$=J;C>$;$++)X=$+1,i=$*D,j=X*D,G=e(i),o=x(i),T=e(j),a=x(j),O.push(G*Z,g,-o*Z,T*Z,g,-a*Z,G*W,I,-o*W,T*Z,g,-a*Z,T*W,I,-a*W,G*W,I,-o*W),M.push($/Y,R,X/Y,R,$/Y,U,X/Y,R,X/Y,U,$/Y,U),f&&$===J&&(u.push(0,I,0,0,g,0,G*Z,g,-o*Z,G*Z,g,-o*Z,G*W,I,-o*W,0,I,0),H.push(0,.5-I,0,.5-g,2*Z,.5-g,2*Z,.5-g,2*W,.5-I,0,.5-I)),m&&X===C&&(k.push(0,I,0,T*Z,g,-a*Z,0,g,0,T*Z,g,-a*Z,0,I,0,T*W,I,-a*W),q.push(1,.5-I,1-2*Z,.5-g,1,.5-g,1-2*Z,.5-g,1,.5-I,1-2*W,.5-I));E=P}if(s)for(W=E.x,I=E.y,$=J;C>$;$++)X=$+1,i=$*D,j=X*D,G=e(i),o=x(i),T=e(j),a=x(j),K.push(T*W,I,-a*W,G*W,I,-o*W,0,I,0),n.push(.5-.5*T,.5+.5*a,.5-.5*G,.5+.5*o,.5,.5)}}),{vs:O,uv:M,bottom_vs:K,bottom_uv:n,top_vs:l,top_uv:r,from_vs:u,from_uv:H,to_vs:k,to_uv:q}}},!0),tl(u,{"3d.move.mode":Y,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":Y,"edge.gradient.color":Y,"edge.source.t3":Y,"edge.target.t3":Y,"light.type":Gb,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":E/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Oe,"wf.short":!1,"wf.mat":Y,batch:Y,"transparent.mask":!1,brightness:Y,"select.brightness":.7,"repeat.uv.length":Y,"label.face":Z,"label.t3":Y,"label.r3":Y,"label.texture.scale":2,"label.rotationMode":Qj,"label.light":!1,"label.blend":Y,"label.reverse.flip":!1,"label.reverse.color":Kd,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Z,"label2.t3":Y,"label2.r3":Y,"label2.texture.scale":2,"label2.rotationMode":Qj,"label2.light":!1,"label2.blend":Y,"label2.reverse.flip":!1,"label2.reverse.color":Kd,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Z,"note.t3":Y,"note.r3":Y,"note.texture.scale":2,"note.rotationMode":Qj,"note.light":!1,"note.blend":Y,"note.reverse.flip":!1,"note.reverse.color":Kd,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Z,"note2.t3":Y,"note2.r3":Y,"note2.texture.scale":2,"note2.rotationMode":Qj,"note2.light":!1,"note2.blend":Y,"note2.reverse.flip":!1,"note2.reverse.color":Kd,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:Y,"shape3d.color":wo,"shape3d.top.color":Y,"shape3d.bottom.color":Y,"shape3d.from.color":Y,"shape3d.to.color":Y,"shape3d.image":Y,"shape3d.top.image":Y,"shape3d.bottom.image":Y,"shape3d.from.image":Y,"shape3d.to.image":Y,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":Y,"shape3d.side.to":Y,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":Y,"shape3d.opacity":Y,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Kd,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":Y,"shape3d.uv.scale":Y,"shape3d.top.uv.offset":Y,"shape3d.top.uv.scale":Y,"shape3d.bottom.uv.offset":Y,"shape3d.bottom.uv.scale":Y,"shape3d.from.uv.offset":Y,"shape3d.from.uv.scale":Y,"shape3d.to.uv.offset":Y,"shape3d.to.uv.scale":Y,"shape3d.top.cap":Y,"shape3d.bottom.cap":Y,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":wo,"all.image":Y,"all.blend":Y,"all.opacity":Y,"all.reverse.flip":!1,"all.reverse.color":Kd,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":Y,"all.uv.offset":Y,"all.uv.scale":Y,"all.discard.selectable":!0,mat:Y,"left.mat":Y,"right.mat":Y,"top.mat":Y,"bottom.mat":Y,"front.mat":Y,"back.mat":Y},!0);
var zr,Sd=!1,Bq=[0,0,0,1/255],Tg={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:X,2:a,3:Oq,4:vm,5:Z,6:V}},Bp=function(S,D,P,W){if(D.getFaceVisible(S,P)){hm(D,hn(S,D.getFaceMat(S,P)||D.getMat(S)));var M=D._26I;D.getFaceReverseCull(S,P)?M.enable(M.CULL_FACE):M.disable(M.CULL_FACE),Wp(M,D._prg.uFixPickReverseColor,Tg[P]),Wj(M,W,6),sj(D)}},Pl=function(A){return A instanceof Kj},bs=function(P){return[P.x,P.e||0,P.y]},cp=function(T,f,G){for(var f=xf(f),w=f[0],i=f[1],N=f[2];G--;)T.push(w,i,N)},xd=function(Q,O,R){for(var O=xf(O),b=O[0],l=O[1],_=O[2],H=O[3];R--;)Q.push(b,l,_,H)},sf=function(y,e,c){if(e)for(var R,O,x,n=e[0],p=e[1],w=e[2],Z=e[4],t=e[5],B=e[6],H=e[8],S=e[9],W=e[10],G=e[12],b=e[13],N=e[14],Y=c.length,d=0,d=0;Y>d;d+=3)R=c[d],O=c[d+1],x=c[d+2],y.push(n*R+Z*O+H*x+G,p*R+t*O+S*x+b,w*R+B*O+W*x+N);else Bk(y,c)},Vl=function(n,Y){var X=Y.s("light.intensity"),W=xf(Y.s(zj)),U=W[0],M=W[1],J=W[2];1!==X&&(U*=X,M*=X,J*=X),n.push(U,M,J,Y.s("light.disabled")?1:0)},Ph=function(i,t,U){Wp(t,U.uHeadlightRange,i._headlightRange);var v=i._headlightIntensity,q=xf(i._headlightColor);1!==v&&(q=[q[0]*v,q[1]*v,q[2]*v]),Wp(t,U.uHeadlightColor,[q[0],q[1],q[2],i._headlightDisabled?1:0]);var y=i._59O,z=i._spots,u=i._dirs;if(y.length){var B=[],n=[],N=[];y.forEach(function(g){Vl(B,g),Bk(n,g.p3()),N.push(g.s("light.range"))}),t.uniform4fv(U.uPointColor,B),t.uniform1fv(U.uPointRange,N),t.uniform3fv(U.uPointPosition,n)}if(z.length){var D=[],S=[],C=[],c=[],w=[],l=[];z.forEach(function(_){Vl(D,_),Bk(S,_.p3()),Bk(C,_.s("light.center")),c.push(_.s("light.range")),w.push(e(_.s("light.angle")/2)),l.push(_.s("light.exponent"))}),t.uniform4fv(U.uSpotColor,D),t.uniform1fv(U.uSpotRange,c),t.uniform1fv(U.uSpotAngle,w),t.uniform1fv(U.uSpotExponent,l),t.uniform3fv(U.uSpotPosition,S),t.uniform3fv(U.uSpotCenter,C)}if(u.length){var m=[],x=[];u.forEach(function(Z){Vl(m,Z),Bk(x,Z.p3())}),t.uniform4fv(U.uDirColor,m),t.uniform3fv(U.uDirPosition,x)}},lb=function(f){return f>0&&0===(f-1&f)},Nb=function(k){return k=K(0,C(E,k)),k=K(Ni,C(E-Ni,k))},Th=function(){return.05+Q()/2},_i=function(o,z,s,B){var D,S=o.getEye();return o.isOrtho()?(D=Jo(o.getCenter(),S),D[0]+=B[0],D[1]+=B[1],D[2]+=B[2]):D=S,Em(z,s,B,D)},Em=function(c,m,x,B){var E=hl(c,m),a=Jo(B,x,!0),J=hl(a,m);if(M(J)<Ni)return L;var F=(E-hl(x,m))/J;return[x[0]+a[0]*F,x[1]+a[1]*F,x[2]+a[2]*F]},fg=function(x,o){return{x:2*x.x-o.x,y:2*x.y-o.y}},al=function(P,$,f,k){var z,T;if(!P)return z=l($.y-f.y,f.x-$.x),{x:$.x+k*x(z),y:$.y+k*e(z)};if(!f)return z=l(P.y-$.y,$.x-P.x),{x:$.x+k*x(z),y:$.y+k*e(z)};var n=Jo([P.x,P.y,0],[$.x,$.y,0],!0),B=Jo([f.x,f.y,0],[$.x,$.y,0],!0),C=-(n[0]+B[0])/2,G=-(n[1]+B[1])/2,m=N(C*C+G*G);return Ni>m?(z=l(P.y-$.y,$.x-P.x),{x:$.x+k*x(z),y:$.y+k*e(z)}):(z=w(hl(n,B))/2,T=n[1]*B[0]-n[0]*B[1]>0?-1:1,C/=m,G/=m,m=k/x(z),{x:$.x+T*m*C,y:$.y+T*m*G})},Um=function(r){var i=r[1],b=r[2],F=r[3],z=r[6],e=r[7],p=r[11];r[1]=r[4],r[2]=r[8],r[3]=r[12],r[4]=i,r[6]=r[9],r[7]=r[13],r[8]=b,r[9]=z,r[11]=r[14],r[12]=F,r[13]=e,r[14]=p},$m=function(I){var N=I[0],g=I[1],S=I[2],C=I[3],O=I[4],d=I[5],X=I[6],Q=I[7],R=I[8],l=I[9],m=I[10],w=I[11],Y=I[12],H=I[13],q=I[14],P=I[15],$=N*d-g*O,f=N*X-S*O,G=N*Q-C*O,W=g*X-S*d,p=g*Q-C*d,Z=S*Q-C*X,i=R*H-l*Y,U=R*q-m*Y,F=R*P-w*Y,j=l*q-m*H,t=l*P-w*H,v=m*P-w*q,V=$*v-f*t+G*j+W*F-p*U+Z*i;return V?(V=1/V,I[0]=(d*v-X*t+Q*j)*V,I[1]=(S*t-g*v-C*j)*V,I[2]=(H*Z-q*p+P*W)*V,I[3]=(m*p-l*Z-w*W)*V,I[4]=(X*F-O*v-Q*U)*V,I[5]=(N*v-S*F+C*U)*V,I[6]=(q*G-Y*Z-P*f)*V,I[7]=(R*Z-m*G+w*f)*V,I[8]=(O*t-d*F+Q*i)*V,I[9]=(g*F-N*t-C*i)*V,I[10]=(Y*p-H*G+P*$)*V,I[11]=(l*G-R*p-w*$)*V,I[12]=(d*U-O*j-X*i)*V,I[13]=(N*j-g*U+S*i)*V,I[14]=(H*f-Y*W-q*$)*V,I[15]=(R*W-l*f+m*$)*V,void 0):L},Fr=function(u,i){if(i){var B=i[0],j=i[1],c=i[2];u[12]=u[0]*B+u[4]*j+u[8]*c+u[12],u[13]=u[1]*B+u[5]*j+u[9]*c+u[13],u[14]=u[2]*B+u[6]*j+u[10]*c+u[14],u[15]=u[3]*B+u[7]*j+u[11]*c+u[15]}},ee=function(q,e){if(e){var b=e[0],p=e[1],v=e[2];q[0]=q[0]*b,q[1]=q[1]*b,q[2]=q[2]*b,q[3]=q[3]*b,q[4]=q[4]*p,q[5]=q[5]*p,q[6]=q[6]*p,q[7]=q[7]*p,q[8]=q[8]*v,q[9]=q[9]*v,q[10]=q[10]*v,q[11]=q[11]*v}},Lc=function(N,O,Z){var c=O[0],W=O[1],m=O[2],K=O[3],b=O[4],A=O[5],g=O[6],w=O[7],t=O[8],h=O[9],r=O[10],T=O[11],H=O[12],z=O[13],p=O[14],P=O[15],I=Z[0],d=Z[1],x=Z[2],V=Z[3];return N[0]=I*c+d*b+x*t+V*H,N[1]=I*W+d*A+x*h+V*z,N[2]=I*m+d*g+x*r+V*p,N[3]=I*K+d*w+x*T+V*P,I=Z[4],d=Z[5],x=Z[6],V=Z[7],N[4]=I*c+d*b+x*t+V*H,N[5]=I*W+d*A+x*h+V*z,N[6]=I*m+d*g+x*r+V*p,N[7]=I*K+d*w+x*T+V*P,I=Z[8],d=Z[9],x=Z[10],V=Z[11],N[8]=I*c+d*b+x*t+V*H,N[9]=I*W+d*A+x*h+V*z,N[10]=I*m+d*g+x*r+V*p,N[11]=I*K+d*w+x*T+V*P,I=Z[12],d=Z[13],x=Z[14],V=Z[15],N[12]=I*c+d*b+x*t+V*H,N[13]=I*W+d*A+x*h+V*z,N[14]=I*m+d*g+x*r+V*p,N[15]=I*K+d*w+x*T+V*P,N},se=function(Z,B,u,p){var R,l,D,V,S,y,$,n,i,U,Q=B[0],e=B[1],f=B[2],F=p[0],d=p[1],a=p[2],q=u[0],J=u[1],v=u[2];return M(Q-q)<Ni&&M(e-J)<Ni&&M(f-v)<Ni?or(Z):($=Q-q,n=e-J,i=f-v,U=1/N($*$+n*n+i*i),$*=U,n*=U,i*=U,R=d*i-a*n,l=a*$-F*i,D=F*n-d*$,U=N(R*R+l*l+D*D),U?(U=1/U,R*=U,l*=U,D*=U):(R=0,l=0,D=0),V=n*D-i*l,S=i*R-$*D,y=$*l-n*R,U=N(V*V+S*S+y*y),U?(U=1/U,V*=U,S*=U,y*=U):(V=0,S=0,y=0),Z[0]=R,Z[1]=V,Z[2]=$,Z[3]=0,Z[4]=l,Z[5]=S,Z[6]=n,Z[7]=0,Z[8]=D,Z[9]=y,Z[10]=i,Z[11]=0,Z[12]=-(R*Q+l*e+D*f),Z[13]=-(V*Q+S*e+y*f),Z[14]=-($*Q+n*e+i*f),Z[15]=1,Z)},hi=function(T,l,W,Y,P){var i=1/o(l/2),A=1/(Y-P);return T[0]=i/W,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=i,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=(P+Y)*A,T[11]=-1,T[12]=0,T[13]=0,T[14]=2*P*Y*A,T[15]=0,T},wf=function(X,o,l,$,e,b,j){var T=1/(o-l),P=1/($-e),A=1/(b-j);return X[0]=-2*T,X[1]=0,X[2]=0,X[3]=0,X[4]=0,X[5]=-2*P,X[6]=0,X[7]=0,X[8]=0,X[9]=0,X[10]=2*A,X[11]=0,X[12]=(o+l)*T,X[13]=(e+$)*P,X[14]=(j+b)*A,X[15]=1,X},Vm=function(V,M){return se(M?M:il(),V._eye,V._center,V._up)},$d=function(S){var f=S.getAspect(),p=S._near,$=S._far,t=il();if(S._ortho){var Q=S._orthoWidth/2,k=Q/f;wf(t,-Q,Q,-k,k,p,$)}else hi(t,S._fovy,f,p,$);return t},ri=function(l,n){if(!l)return L;var J=0,s=1,y=2,w=[],j=0,D=l.length,e=D/3;if(n){for(;D>j;j++)w[j]=0;for(j=0;j<n.length;j+=3){var Y=[],W=[],B=[];Y[J]=l[3*n[j+1]+J]-l[3*n[j]+J],Y[s]=l[3*n[j+1]+s]-l[3*n[j]+s],Y[y]=l[3*n[j+1]+y]-l[3*n[j]+y],W[J]=l[3*n[j+2]+J]-l[3*n[j+1]+J],W[s]=l[3*n[j+2]+s]-l[3*n[j+1]+s],W[y]=l[3*n[j+2]+y]-l[3*n[j+1]+y],B[J]=Y[s]*W[y]-Y[y]*W[s],B[s]=Y[y]*W[J]-Y[J]*W[y],B[y]=Y[J]*W[s]-Y[s]*W[J];for(var $=0;3>$;$++)w[3*n[j+$]+J]+=B[J],w[3*n[j+$]+s]+=B[s],w[3*n[j+$]+y]+=B[y]}}else for(j=0;e>j;j+=3){var Y=[],W=[],B=[];Y[J]=l[3*(j+1)+J]-l[3*j+J],Y[s]=l[3*(j+1)+s]-l[3*j+s],Y[y]=l[3*(j+1)+y]-l[3*j+y],W[J]=l[3*(j+2)+J]-l[3*(j+1)+J],W[s]=l[3*(j+2)+s]-l[3*(j+1)+s],W[y]=l[3*(j+2)+y]-l[3*(j+1)+y],B[J]=Y[s]*W[y]-Y[y]*W[s],B[s]=Y[y]*W[J]-Y[J]*W[y],B[y]=Y[J]*W[s]-Y[s]*W[J];for(var $=0;3>$;$++)w[3*(j+$)+J]=B[J],w[3*(j+$)+s]=B[s],w[3*(j+$)+y]=B[y]}for(j=0;D>j;j+=3){var d=[];d[J]=w[j+J],d[s]=w[j+s],d[y]=w[j+y];var M=N(d[J]*d[J]+d[s]*d[s]+d[y]*d[y]);0===M&&(M=Ni),d[J]=d[J]/M,d[s]=d[s]/M,d[y]=d[y]/M,w[j+J]=d[J],w[j+s]=d[s],w[j+y]=d[y]}return new Kq(w)},mb=function(k,U,o){if(o||(o=k.createTexture()),U){var g=k.TEXTURE_2D,c=k.LINEAR,D=k.REPEAT,j=k.CLAMP_TO_EDGE,H=k.TEXTURE_MIN_FILTER;Sp(k,o),k.texImage2D(g,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,U),Nk(k,k.TEXTURE_MAG_FILTER,c),lb(U.width)&&lb(U.height)?(Nk(k,k.TEXTURE_WRAP_S,D),Nk(k,k.TEXTURE_WRAP_T,D),Nk(k,H,k.LINEAR_MIPMAP_LINEAR),k.generateMipmap(g)):(Nk(k,k.TEXTURE_WRAP_S,j),Nk(k,k.TEXTURE_WRAP_T,j),Nk(k,H,c)),Sp(k,L)}return o},ng=function(A){A._26I&&A._prg&&(A._26I.deleteProgram(A._prg),A._prg=L)},Qg=function(y,n,X,I){var W=y.createShader(X);return y.shaderSource(W,I),y.compileShader(W),y.attachShader(n,W),W},In=function(l){return l.createBuffer()},Sp=function(J,k){J.bindTexture(J.TEXTURE_2D,k)},Kf=function(N,R){N.bindFramebuffer(N.FRAMEBUFFER,R)},Nk=function(b,y,p){b.texParameteri(b.TEXTURE_2D,y,p)},nf=function(Q,P){if(P){var P=xf(P);Q.clearColor(P[0],P[1],P[2],P[3])}},Wb=function(n,r){Wp(n,r.uFix,!0),Ii(n,r.aNormal)},Pc=function(i,N){Wp(i,N.uFix,!1),Dn(i,N.aNormal)},An=function(o,O,_,G,E,Y,m,r){o._picking||(_?(Wp(o,O.uBlend,!0),Wp(o,O.uBlendColor,_)):Wp(o,O.uBlend,!1),Wp(o,O.uLight,G==L?!0:G),_h(E)&&1!==E&&Wp(o,O.uPartOpacity,E),Wp(o,O.uReverseFlip,Y==L?!1:Y),Wp(o,O.uFixPickReverseColor,m||Kd)),r?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE)},xp=function(s,U){s._picking||Wp(s,U.uPartOpacity,1)},be=function(n,R,H,t,s,C,B,I){if(H){Wp(n,R.uTexture,!0),Wp(n,R.uDiscardSelectable,io(t)?t:!0),Dn(n,R.aUv),Jj(n,s,C,R.aUv,2),n.activeTexture(n.TEXTURE0),Sp(n,H),n.uniform1i(R.uSampler,0);var m=[0,0,1,1];B&&(m[0]=B[0],m[1]=B[1]),I&&(m[2]=I[0],m[3]=I[1]),Wp(n,R.uOffsetScale,m)}},hb=function(x,k,R){R&&(Sp(x,L),Ii(x,k.aUv),Wp(x,k.uTexture,!1))},Oo=function(Y,E,_,X,R,v){_&&!I&&Y.lineWidth(_),X&&!Y._picking&&Wp(Y,E.uFixPickReverseColor,X),R&&Jj(Y,R,v,E.aPosition)},Se=function(R,_,r,K){zr&&(K=R[zr]),R.drawArrays(K==L?R.TRIANGLES:K,_,r)},Wj=function(i,O,h,V){zr&&(V=i[zr]),i.drawElements(V==L?i.TRIANGLES:V,h,i.UNSIGNED_SHORT,O==L?0:2*O)},Jj=function(N,V,D,$,f){var R=N.ARRAY_BUFFER;N.bindBuffer(R,V),D&&N.bufferData(R,D,N.STATIC_DRAW),$!=L&&N.vertexAttribPointer($,f?f:3,N.FLOAT,!1,0,0)},$n=function(r,D,B){var h=r.ELEMENT_ARRAY_BUFFER;r.bindBuffer(h,D),B&&r.bufferData(h,B,r.STATIC_DRAW)},Wp=function(K,c,v){if(v!=L&&c!=L){v=xf(v);var w=v.length;3===w?K.uniform3fv(c,v):4===w?K.uniform4fv(c,v):16===w?K.uniformMatrix4fv(c,!1,v):io(v)?K.uniform1i(c,v?1:0):2===w?K.uniform2fv(c,v):K.uniform1f(c,v)}},Dn=function(v,V){V!=L&&V>=0&&v.enableVertexAttribArray(V)},Ii=function($,M){M!=L&&M>=0&&$.disableVertexAttribArray(M)},sj=function(A,r){var i=A.getGL(),$=A._prg;A._7O=A._8O.pop(),r&&(Wp(i,$.uMVMatrix,A._7O),A._6O=r,Wp(i,$.uNMatrix,r))},Uj=function(E,O){return O||(O=il()),Ve(O,E),$m(O),Um(O),O},hm=function(f,P){var S=f.getGL(),c=f._prg,N=f._7O;P&&(f._8O.push(ye(N)),Lc(N,N,P)),Wp(S,c.uMVMatrix,N),Wp(S,c.uNMatrix,Uj(N,f._6O))},aj=function(x,V,M,A,h,k){if(M){if(A){var K=M.value++,t=[(255&K>>24)/255,(255&K>>16)/255,(255&K>>8)/255,(255&K)/255];M[K]={data:h,part:k}}else t=Bq;return Wp(x,V.uFixPickReverseColor,t),t}},no=function(){var L={center:function(x,j,q,N,c){var f=j[1]/2,y={x:-j[0]/2,y:f,width:j[0],height:j[1]},L=Mp(x,y,q);return[L.x+N,2*f-L.y-c,Th()]},front:function(K,w,p,G,d){var k=w[1]/2,_={x:-w[0]/2,y:k,width:w[0],height:w[1]},W=Mp(K,_,p);return[W.x+G,2*k-W.y-d,w[2]/2+Th()]},back:function(j,p,F,t,L){var u=p[0]/2,m=p[1]/2,q={x:u,y:m,width:p[0],height:p[1]},E=Mp(j,q,F);return[2*u-E.x-t,2*m-E.y-L,-p[2]/2-Th()]},left:function(H,O,P,G,V){var p=O[1]/2,M={x:-O[2]/2,y:p,width:O[2],height:O[1]},q=Mp(H,M,P);return[-O[0]/2-Th(),2*p-q.y-V,q.x+G]},right:function(U,g,Q,l,z){var j=g[2]/2,O=g[1]/2,t={x:j,y:O,width:g[2],height:g[1]},w=Mp(U,t,Q);return[g[0]/2+Th(),2*O-w.y-z,2*j-w.x-l]},top:function(S,a,i,j,Z){var f={x:-a[0]/2,y:-a[2]/2,width:a[0],height:a[2]},O=Mp(S,f,i);return[O.x+j,a[1]/2+Th(),O.y+Z]},bottom:function(t,J,C,q,K){var P=J[2]/2,H={x:-J[0]/2,y:P,width:J[0],height:J[2]},U=Mp(t,H,C);return[U.x+q,-J[1]/2-Th(),2*P-U.y-K]}};return function(j,t,d,J,m,W){return L[J](j,t,d,m||0,W||0)}}(),Qm=function(r,D,C,b,Q,u,m,w,l,T){if(Q&&(D[0]+=Q[0],D[1]+=Q[1],D[2]+=Q[2]),Fr(r,C),w){var c=il();if(Or(c,l,T),Yp(D,c),Fr(r,D),r.auto=w,r.pos=Yp([0,0,0],r),u){var P=r.mat2=il();Or(P,u,m)}}else Or(r,l,T),Fr(r,D),b===X?Zr(r,-d):b===a?Zr(r,d):b===Oq?Yl(r,-d):b===vm?Yl(r,d):b===V&&Zr(r,E),Or(r,u,m);return r},lq=function(s,f){var H=f.auto,F=f.mat2,J=s.gv;if(H){var _=Jo(s.gv.getEye(),f.pos),Z=il();Zr(Z,E/2+l(-_[2],_[0])),"y"!==H&&Yl(Z,-l(_[1],N(_[2]*_[2]+_[0]*_[0]))),F&&Lc(Z,Z,F),Z=Lc(il(),f,Z),hm(J,Z)}else hm(J,f)},wl=function(g,p,P,n,x){var _=g.s,I=g.gv,m=I.getGL(),d=I._prg,G=I._buffer,T=I._1O;mb(m,If,T),lq(g,P),An(m,d,_(p+".blend"),_(p+".light"),_(p+".opacity"),_(p+".reverse.flip"),_(p+".reverse.color"),_(p+".reverse.cull")),be(m,d,T,x,G.uv,Qp),Jj(m,G.vs,n,d.aPosition),Jj(m,G.ns,Hi,d.aNormal),$n(m,G.is,nk),Wj(m,0,nk.length),hb(m,d,T),xp(m,d),sj(I)},cc=function(J,n,I){var N=J.gv,E=J.data,m=J[n]={blend:N.getBodyColor(E)||N.getFaceBlend(E,n),light:N.getFaceLight(E,n),color:N.getFaceColor(E,n),opacity:N.getFaceOpacity(E,n),transparent:N.getFaceTransparent(E,n),reverseFlip:N.getFaceReverseFlip(E,n),reverseColor:N.getFaceReverseColor(E,n),reverseCull:N.getFaceReverseCull(E,n),texture:N.getFaceImage(E,n),discardSelectable:N.getFaceDiscardSelectable(E,n)};if("csg"!==n){m.uv=N.getFaceUv(E,n)||I&&I[n+"Uv"],m.uvScale=N.getFaceUvScale(E,n)||I&&I[n+"UvScale"],m.uvOffset=N.getFaceUvOffset(E,n)||I&&I[n+"UvOffset"];var b=N.getFaceMat(E,n);b&&(m.mat=hn(E,b))}return m},df=function(C,V,F,J,l){if(J){if(!l(J.transparent))return;var c=C.data,v=C.gv,I=v._buffer,L=v.getTexture(J.texture,c);be(V,F,L,J.discardSelectable,I.uv,J.tuv,J.uvOffset,J.uvScale),An(V,F,J.blend,J.light,J.opacity,J.reverseFlip,J.reverseColor,J.reverseCull),Wp(V,F.uDiffuse,J.color),Jj(V,I.vs,J.vs,F.aPosition),Jj(V,I.ns,J.ns,F.aNormal),Se(V,0,J.vs.length/3),xp(V,F),hb(V,F,L)}},tg=function(B,v,P,d,j,K){var F,D,$,u,O,W,e,G,p,k,w,R=[d-v,j-P],o=B?B.length:0;for($=0;o>$;$++){for(u=2,F=B[$],O=F[0],W=F[1];u+1<F.length;){if(e=F[u],G=F[u+1],D=Tr(v,P,d,j,O,W,e,G,!0)){p=[e-O,G-W],k=Oh(p),p[0]/=k,p[1]/=k,k=hl(R,p),k=k>0?K:-K,w=[p[0]*k,p[1]*k];break}O=e,W=G,u+=2}if(w)break}if(w)for(d=v+w[0],j=P+w[1],$=0;o>$;$++)for(u=2,F=B[$],O=F[0],W=F[1];u+1<F.length;){if(e=F[u],G=F[u+1],D=Tr(v,P,d,j,O,W,e,G,!0))return[0,0];O=e,W=G,u+=2}return w?w:[d-v,j-P]},gr=U.graph3d={},Rr=function(Q,M,U){jf(T+".graph3d."+Q,M,U)},he="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Yr="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";tl(h,{setBatchInfo:function(w,v){hr[w]=v},getBatchInfo:function(S){return hr[S]}},!0);var Nm=[1,1,1],re=[1,0,0,0,0,1,0,1,1,1,1,0],Kh=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],vq=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],vd=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Ar=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],yb=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],qf=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Vr=function(r,I){Pb(r,I),Mg(r,I,"_wireframeModelMap","_wireframeIndexMap"),Mg(r,I,"_polylineModelMap","_polylineIndexMap")},Pb=function(C,l){if(l){var r,i,X=l._id,F=C._33O,G=C._34O,e=G[X];if(e){i=e.batch,r=F[i];var D=e.begin,h=e.size,E=3*D,B=3*h,Z=4*D,n=4*h,s=r.vs,_=r.uv,z=r.cs,P=r.bs,S=r.rs,q=r.ds,t=e.index;if(r.invalidate=!0,delete G[X],q.splice(t,1),wi(q))delete F[i];else{for(;t<q.length;t++)e=G[q[t]._id],e.index--,e.begin-=h;s.splice(E,B),r.ns.splice(E,B),r.ps.splice(Z,n),_&&_.splice(2*D,2*h),z&&z.splice(Z,n),P&&P.splice(E,B),S&&S.splice(D,h)}}}else C._34O={},C._33O={}},Mg=function(P,f,x,Z){if(f){var T,a,w=f._id,y=P[x],g=P[Z],p=g[w];if(p){a=p.batch,T=y[a];var $=p.begin,k=p.size,J=3*$,M=3*k,i=4*$,e=4*k,c=T.ds,U=p.index;if(T.invalidate=!0,delete g[w],c.splice(U,1),wi(c))delete y[a];else{for(;U<c.length;U++)p=g[c[U]._id],p.index--,p.begin-=k;T.vs.splice(J,M),T.cs.splice(i,e),T.ps.splice(i,e),T.ls&&T.ls.splice($,k)}}}else P[x]={},P[Z]={}},ip=function(Z,I,J,u){if(!u)return L;var q=I[u];if(!q){var n=hr[u]||ko,P=n.image?[]:L;q=I[u]={vs:[],ns:[],uv:P,cs:P?L:n.color?L:[],bs:n.blend?[]:L,ps:[],rs:n.brightness?[]:L,ds:[]}}return q.invalidate=!0,Z[J._id]={index:q.ds.length,begin:q.vs.length/3,batch:u},q.ds.push(J),q},Xg=function(s,r){return r!=L&&1!==r?[s[0]*r,s[1]*r,s[2]*r,s[3]]:s},Ib=function(T,X,r){var t=T.getBrightness(X),b=xf(r.color||"white"),Y=b[3]<1,v=Math.ceil(r.width)||1,U=(Y?"T":"O")+v,K=T._wireframeIndexMap,M=T._wireframeModelMap,J=M[U];J||(J=M[U]={vs:[],cs:[],ps:[],ds:[],T:Y,W:v}),J.invalidate=!0;var P=J.vs,j=J.cs,n=J.ds,s=K[X._id]={index:n.length,begin:P.length/3,batch:U};n.push(X),sf(P,hn(X,r.mat),r.short?Ui:Xn);var q=s.size=P.length/3-s.begin;xd(j,Xg(b,t),q)},Kr=function(C,q,_,h,j,l,e,$,P){var y=C.getBrightness(q);y==L&&(y=1);var t=Xg(xf(h),y),b=t[3]<1;l=Math.ceil(l)||1;var R=(b?"T":"O")+l;if(e){var U=e[0],W=(e[1]||U)+U;R+="-"+U+"-"+W,P&&(R+="-"+gj(P)+"-"+y,P=Xg(xf(P),y))}var f=C._polylineIndexMap,A=C._polylineModelMap,z=A[R];z||(z=A[R]={vs:[],cs:[],ps:[],ds:[],ls:e?[]:L,T:b,W:l},e&&(z.D=U,z.G=W,z.A=P)),z.invalidate=!0;var I,k=z.vs,x=z.cs,g=z.ds,T=z.ls,B=f[q._id]={index:g.length,begin:k.length/3,batch:R};g.push(q),Bk(k,_);var w,D=B.size=k.length/3-B.begin,Y=_.length,c=0,E=[];if(e||j)for(I=0;Y>I;I+=6)w=Oh([_[I],_[I+1],_[I+2]],[_[I+3],_[I+4],_[I+5]]),E.push(w),c+=w;if(c&&j){var V,N=Xg(xf(j),y),m=[N[0]-t[0],N[1]-t[1],N[2]-t[2],N[3]-t[3]],u=0;for(I=0;Y>I;I+=6)V=u/c,xd(x,[t[0]+m[0]*V,t[1]+m[1]*V,t[2]+m[2]*V,t[3]+m[3]*V],1),u+=E[I/6],V=u/c,xd(x,[t[0]+m[0]*V,t[1]+m[1]*V,t[2]+m[2]*V,t[3]+m[3]*V],1)}else xd(x,t,D);if(e)for(u=$||0,I=0;Y>I;I+=6)T.push(u),u+=E[I/6],T.push(u)},Fb=function(Y,s,G){if(s)for(var S=4*s.begin,C=G[s.batch].ps,k=0;k<s.size;k++)C[S++]=Y[0],C[S++]=Y[1],C[S++]=Y[2],C[S++]=Y[3]},Od=function(P,c){var J=c+["32"],N=P[c],y=P[J];N?y&&y.length===N.length?y.set(N):P[J]=new Kq(N):delete P[J]},qk=function(U,O,k,r,x,y,b,N,_){if(zc(k))k.forEach(function(n){qk(U,O,n,r,x,y,b,N,_)});else if(dn(k))qk(U,O,Jn(r,k),r,x,y,b,N,_);else if(mi(k)){var o,X=Ek(k.mat,O,U),T=Ek(k.s3,O,U),B=Ek(k.t3,O,U),E=Ek(k.r3,O,U);if((T||E||B||X)&&(o=Eb(X,T,E,Ek(k.rotationMode,O,U),B),y.push(o)),k.shape3d)qk(U,O,k.shape3d,r,x,y,b,N,k);else{_=_||ko;var c=y[0],L=y.length,Z=r("shape3d.color",k.color,_.color);if(x||(x=r("shape3d.blend",k.blend,_.blend)),L>1){c=ye(c);for(var f=1;L>f;f++)Lc(c,c,y[f])}k.vs&&r(Er,k.visible,_.visible)&&rr(c,b,N,k.vs,k.uv,k.is,x,Z),k.top_vs&&r(Mf,k.topVisible,_.topVisible)&&rr(c,b,N,k.top_vs,k.top_uv,k.top_is,x,r("shape3d.top.color",k.topColor,_.topColor)||Z),k.bottom_vs&&r(uq,k.bottomVisible,_.bottomVisible)&&rr(c,b,N,k.bottom_vs,k.bottom_uv,k.bottom_is,x,r("shape3d.bottom.color",k.bottomColor,_.bottomColor)||Z),k.from_vs&&r(_j,k.fromVisible,_.fromVisible)&&rr(c,b,N,k.from_vs,k.from_uv,k.from_is,x,r("shape3d.from.color",k.fromColor,_.fromColor)||Z),k.to_vs&&r(ho,k.toVisible,_.toVisible)&&rr(c,b,N,k.to_vs,k.to_uv,k.to_is,x,r("shape3d.to.color",k.toColor,_.toColor)||Z)}o&&y.pop()}},rr=function(R,V,u,D,k,S,G,c){var o,l=V.cs,E=V.uv,Q=V.bs;if(S){o=S.length;for(var p=0;o>p;p++){var s=S[p];sf(u,R,[D[3*s],D[3*s+1],D[3*s+2]]),E&&Bk(E,[k[2*s],k[2*s+1]])}}else o=D.length/3,sf(u,R,D),E&&Bk(E,k);l&&xd(l,c,o),Q&&(G?cp(Q,G,o):Bk(Q,Nm,o))},ks=function(v,T,o,F){var x=[];F?qk(v.gv,v.data,F,v.s,v.getBodyColor(),[T],o,x):(Xo(v,X,T,o,x),Xo(v,a,T,o,x),Xo(v,Z,T,o,x),Xo(v,V,T,o,x),Xo(v,Oq,T,o,x),Xo(v,vm,T,o,x),Xo(v,"csg",T,o,x)),x.length&&(Bk(o.vs,x),Bk(o.ns,ri(x)))},Xo=function(g,F,a,K,E){var d=g[F];if(d){var z=d.tuv;if(z){var p,r,f,P,B=d.uvScale,G=d.uvOffset;if(B)for(p=z.length,r=B[0],f=B[1],P=0;p>P;P+=2)z[P]*=r,z[P+1]*=f;if(G)for(p=z.length,r=G[0],f=G[1],P=0;p>P;P+=2)z[P]+=r,z[P+1]+=f}rr(a,K,E,d.vs,z,L,d.blend,d.color)}},ig=function(X,Y,f,p,W,$,u,N){var x,R=f.cs,U=f.uv,h=f.bs;if(X.getFaceVisible(Y,$)){var d=X.getFaceMat(Y,$);if(d&&(W=hn(Y,d)),sf(u,W,N),R&&xd(R,X.getFaceColor(Y,$),6),U){var k=X.getFaceUv(Y,$)||p[$+"Uv"],v=X.getFaceUvScale(Y,$)||p[$+"UvScale"],O=X.getFaceUvOffset(Y,$)||p[$+"UvOffset"];k=k?[k[6],k[7],k[0],k[1],k[2],k[3],k[2],k[3],k[4],k[5],k[6],k[7]]:re;var J=k[0],E=k[1],g=k[2],r=k[3],H=k[4],Z=k[5],S=k[6],P=k[7],M=k[8],B=k[9],K=k[10],G=k[11];if(v){var l=v[0],Q=v[1];J*=l,E*=Q,g*=l,r*=Q,H*=l,Z*=Q,S*=l,P*=Q,M*=l,B*=Q,K*=l,G*=Q}if(O){var T=O[0],y=O[1];J+=T,E+=y,g+=T,r+=y,H+=T,Z+=y,S+=T,P+=y,M+=T,B+=y,K+=T,G+=y}U.push(J,E,g,r,H,Z,S,P,M,B,K,G)}h&&(x=X.getBodyColor(Y)||X.getFaceBlend(Y,$),x?cp(h,x,6):Bk(h,Nm,6))}},Ig=function(T,c,v,y){var l=T.getGL(),x=T._prg,U=T._buffer;if(!Cr(c)){hm(T),Wb(l,x);for(var W in c){var s=c[W];if(!(y&&!s.T||!y&&s.T)){s.invalidate?(s.invalidate=!1,Od(s,"vs"),Od(s,"cs"),Od(s,"ls"),Od(s,"ps")):v&&Od(s,"ps");var f=s.vs32,R=v?s.ps32:s.cs32;Oo(l,x,s.W,L,U.vs,f);var b=s.D,u=!T._dashDisabled&&b;u&&(Wp(l,x.uDash,!0),Wp(l,x.uDashDistance,b),Wp(l,x.uDashGapDistance,s.G),Dn(l,x.aLineDistance),Jj(l,U.lineDistance,s.ls32,x.aLineDistance,1),Wp(l,x.uDiffuse,s.A||rn));var F=!T._batchColorDisabled;F&&(Wp(l,x.uBatchColor,!0),Dn(l,x.aBatchColor),Jj(l,U.batchColor,R,x.aBatchColor,4)),Se(l,0,f.length/3,l.LINES),F&&(Wp(l,x.uBatchColor,!1),Ii(l,x.aBatchColor)),u&&(Wp(l,x.uDash,!1),Ii(l,x.aLineDistance))}}Pc(l,x)}},Bg=function(j,M,P){var p,_,X,c,Z,i,N,V,l,h,n,F=j.getGL(),$=j._prg,W=j._buffer,d=j._33O;if(!Cr(d)){hm(j);for(p in d)if(_=hr[p]||ko,!(P&&!_.transparent||!P&&_.transparent)&&(X=d[p],M||!_.transparentMask)){var y=P&&_.autoSort!==!1&&(j._33Q||X.invalidate);if(X.invalidate?(X.invalidate=!1,Od(X,"vs"),Od(X,"ns"),Od(X,"cs"),Od(X,"rs"),Od(X,"ps"),Od(X,"bs"),Od(X,"uv")):M&&Od(X,"ps"),Z=X.vs32,i=M?X.ps32:X.cs32,l=X.uv32,N=X.bs32,V=X.rs32,n=Z.length/3,y&&(X.is=zd(Z,j.getEye())),n){c=_.light,h=j.getTexture(_.image),An(F,$,L,_.light,_.opacity,_.reverseFlip,_.reverseColor,_.reverseCull),i?j._batchColorDisabled||(Wp(F,$.uBatchColor,!0),Dn(F,$.aBatchColor),Jj(F,W.batchColor,i,$.aBatchColor,4)):Wp(F,$.uDiffuse,_.color);var O=N&&!j._batchBlendDisabled;O&&(Wp(F,$.uBatchBlend,!0),Dn(F,$.aBatchBlend),Jj(F,W.batchBlend,N,$.aBatchBlend));var v=V&&!j._batchBrightnessDisabled;v&&(Wp(F,$.uBatchBrightness,!0),Dn(F,$.aBatchBrightness),Jj(F,W.batchBrightness,V,$.aBatchBrightness,1)),l&&be(F,$,h,_.discardSelectable,W.uv,l,_.uvOffset,_.uvScale),Jj(F,W.vs,Z,$.aPosition),Jj(F,W.ns,X.ns32,$.aNormal),X.is?($n(F,W.is,X.is),Wj(F,0,n)):Se(F,0,n),l&&hb(F,$,h),i&&!j._batchColorDisabled&&(Wp(F,$.uBatchColor,!1),Ii(F,$.aBatchColor)),O&&(Wp(F,$.uBatchBlend,!1),Ii(F,$.aBatchBlend)),v&&(Wp(F,$.uBatchBrightness,!1),Ii(F,$.aBatchBrightness)),xp(F,$)}}}},zd=function(c,m){for(var L=c.length/3,i=new Array(L),N=L/3,F=new Array(N),n=0;N>n;n++)F[n]=n;F.sort(function(f,z){var Z=9*f,k=[(c[Z]+c[Z+3]+2*c[Z+6])/4,(c[Z+1]+c[Z+4]+2*c[Z+7])/4,(c[Z+2]+c[Z+5]+2*c[Z+8])/4];Z=9*z;var s=[(c[Z]+c[Z+3]+2*c[Z+6])/4,(c[Z+1]+c[Z+4]+2*c[Z+7])/4,(c[Z+2]+c[Z+5]+2*c[Z+8])/4],O=Oh(m,k)-Oh(m,s);return O>0?-1:0>O?1:0});for(var n=0;N>n;n++){var t=3*n,C=3*F[n];i[t]=C,i[t+1]=C+1,i[t+2]=C+2}return new Sn(i)},Qp=new Kq([0,0,0,1,1,1,1,0]),Hi=new Kq([0,0,1,0,0,1,0,0,1,0,0,1]),nk=new Sn([0,1,2,2,3,0]),Ln=new Kq([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Df=new Sn([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),pb=new Kq([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),dm=new Kq([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),As=ri(Ln,Df),Xn=(new Kq([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Sn([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Ui=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],ml=function(D,Y,Z,s,I,J){J=J||16,D=D||16,Y=Y||0,Z=Z||D;var $,g,r,f,l,n,d,K,v=.5,O=[],M=[],h=B/D,z=E/J;for($=0;J>$;$++)for(l=$+1,f=$*z,K=l*z,g=Y;Z>g;g++)n=g+1,r=g*h,d=n*h,O.push(v*x(f)*e(r),v*e(f),-v*x(f)*x(r),v*x(K)*e(d),v*e(K),-v*x(K)*x(d),v*x(f)*e(d),v*e(f),-v*x(f)*x(d),v*x(f)*e(r),v*e(f),-v*x(f)*x(r),v*x(K)*e(r),v*e(K),-v*x(K)*x(r),v*x(K)*e(d),v*e(K),-v*x(K)*x(d)),M.push(g/D,$/J,n/D,l/J,n/D,$/J,g/D,$/J,g/D,l/J,n/D,l/J);if(s)for(r=Y*h,$=0;J>$;$++)l=$+1,f=$*z,K=l*z,O.push(0,0,0,v*x(K)*e(r),v*e(K),-v*x(K)*x(r),v*x(f)*e(r),v*e(f),-v*x(f)*x(r)),M.push(0,.5,Y/D,l/J,Y/D,$/J);if(I)for(r=Z*h,$=0;J>$;$++)l=$+1,f=$*z,K=l*z,O.push(0,0,0,v*x(f)*e(r),v*e(f),-v*x(f)*x(r),v*x(K)*e(r),v*e(K),-v*x(K)*x(r)),M.push(1,.5,Z/D,$/J,Z/D,l/J);return{vs:O,uv:M}},Qe=function(l,v,p){l=l||.17,v=v||12,p=p||18,0>l?l=0:l>.25&&(l=.25);var $,t,X,L,P,R,i,D=.5,O=[],k=[],M=[],I=B/p,N=B/v,h=D-l;for(t=0;v>=t;t++)for(L=-E+t*N,R=e(L),P=x(L),$=0;p>=$;$++)X=$*I,i=h+l*R,O.push(e(X)*i,P*l,-x(X)*i),k.push($/p,1-t/v);for(t=0;v>t;t++){var q=t*(p+1),o=(t+1)*(p+1);for($=0;p>$;$++)M.push(q+$,o+$+1,o+$,q+$,q+$+1,o+$+1)}return{vs:O,uv:k,is:M}},Hg=function(b,h,$,v,T,t,P){P=P||12,b=b||18,h=h||0,$=$||b,t=t||.17,0>t?t=0:t>.25&&(t=.25);var l,A,r,Z,u,U,Y,M,C,j,I=.5,d=[],n=[],k=B/b,G=B/P,_=I-t;for(r=0;P>r;r++)for(Z=r+1,Y=-E+r*G,M=-E+Z*G,l=h;$>l;l++)A=l+1,u=l*k,U=A*k,C=_+t*e(Y),j=_+t*e(M),d.push(e(u)*C,x(Y)*t,-x(u)*C,e(U)*C,x(Y)*t,-x(U)*C,e(U)*j,x(M)*t,-x(U)*j,e(u)*C,x(Y)*t,-x(u)*C,e(U)*j,x(M)*t,-x(U)*j,e(u)*j,x(M)*t,-x(u)*j),n.push(l/b,1-r/P,A/b,1-r/P,A/b,1-Z/P,l/b,1-r/P,A/b,1-Z/P,l/b,1-Z/P);
if(v){var w=[],p=[];for(r=0;P>r;r++)Z=r+1,Y=-E+r*G,M=-E+Z*G,u=h*k,C=_+t*e(Y),j=_+t*e(M),w.push(e(u)*C,x(Y)*t,-x(u)*C,e(u)*j,x(M)*t,-x(u)*j,e(u)*_,0,-x(u)*_),p.push(.5+.5*e(Y),.5-.5*x(Y),.5+.5*e(M),.5-.5*x(M),.5,.5)}if(T){var V=[],R=[];for(r=0;P>r;r++)Z=r+1,Y=-E+r*G,M=-E+Z*G,u=$*k,C=_+t*e(Y),j=_+t*e(M),V.push(e(u)*C,x(Y)*t,-x(u)*C,e(u)*_,0,-x(u)*_,e(u)*j,x(M)*t,-x(u)*j),R.push(.5-.5*e(Y),.5-.5*x(Y),.5,.5,.5-.5*e(M),.5-.5*x(M))}return{vs:d,uv:n,from_vs:w,from_uv:p,to_vs:V,to_uv:R}},fn=function(P,O){for(var Z,D,E,t=.5,o=16,k=[],G=[],a=[],h=B/o,m=0;o>=m;m++)Z=m*h,D=e(Z)*t,E=x(Z)*t,k.push(D,-t,E,D,t,E),G.push(1-m/o,1,1-m/o,0);for(m=0;o>m;m++)a.push(2*m,2*m+1,2*m+3,2*m,2*m+3,2*m+2);if(O){var N=[],X=[],y=[];for(N.push(0,-t,0),X.push(.5,.5),m=0;o>=m;m++)Z=m*h,D=e(Z),E=x(Z),N.push(D*t,-t,-E*t),X.push(.5+.5*D,.5+.5*E);for(m=0;o>m;m++)y.push(0,m+2,m+1)}if(P){var J=[],d=[],Y=[];for(J.push(0,t,0),d.push(.5,.5),m=0;o>=m;m++)Z=m*h,D=e(Z),E=x(Z),J.push(D*t,t,-E*t),d.push(.5+.5*D,.5-.5*E);for(m=0;o>m;m++)Y.push(0,m+1,m+2)}return{vs:k,uv:G,is:a,bottom_vs:N,bottom_uv:X,bottom_is:y,top_vs:J,top_uv:d,top_is:Y}},_p=function(j,D,Z,M,C,N,v){j=j||12,D=D||0,Z=Z||j;for(var d,m,z,q,K,n,I,i,Q=.5,J=[],y=[],_=B/j,b=D;Z>b;b++)d=b+1,m=b*_,z=d*_,q=e(m)*Q,K=x(m)*Q,n=e(z)*Q,I=x(z)*Q,J.push(q,-Q,-K,n,-Q,-I,q,Q,-K,n,-Q,-I,n,Q,-I,q,Q,-K),y.push(b/j,1,d/j,1,b/j,0,d/j,1,d/j,0,b/j,0);if(v){var V=[],r=[];for(b=D;Z>b;b++)m=_*b,z=_*(b+1),q=e(m),K=x(m),n=e(z),I=x(z),V.push(q*Q,-Q,-K*Q,0,-Q,0,n*Q,-Q,-I*Q),r.push(.5+.5*q,.5+.5*K,.5,.5,.5+.5*n,.5+.5*I)}if(N){var Y=[],w=[];for(b=D;Z>b;b++)m=_*b,z=_*(b+1),q=e(m),K=x(m),n=e(z),I=x(z),Y.push(q*Q,Q,-K*Q,n*Q,Q,-I*Q,0,Q,0),w.push(.5+.5*q,.5-.5*K,.5+.5*n,.5-.5*I,.5,.5)}return M&&(m=_*D,q=e(m)*Q,K=x(m)*Q,i=D/j,J.push(0,Q,0,0,-Q,0,q,-Q,-K,q,-Q,-K,q,Q,-K,0,Q,0),y.push(0,0,0,1,i,1,i,1,i,0,0,0)),C&&(m=_*Z,q=e(m)*Q,K=x(m)*Q,i=Z/j,J.push(0,-Q,0,0,Q,0,q,Q,-K,q,Q,-K,q,-Q,-K,0,-Q,0),y.push(1,1,1,0,i,0,i,0,i,1,1,1)),{vs:J,uv:y,bottom_vs:V,bottom_uv:r,top_vs:Y,top_uv:w}},vg=function(K,S,w,k,n){S=S||18,w=w||0,k=k==L?B:k,n=n==L?.5:n;for(var A,O,C,t,T,Q,h=[0,.5,.75,.875,.9375],I=[],_=[],J=[],q=k/S,G=0;G<h.length;G++){var u=0===G%2?0:.5;for(A=0;S>=A;A++)O=(A+u)*q+w,C=1-h[G],I.push(e(O)*n*C,-n+2*h[G]*n,-x(O)*n*C),_.push((A+u)/S,C)}for(G=0;G<h.length-1;G++){var H=G*(S+1),b=(G+1)*(S+1);for(A=0;S>A;A++)J.push(H+A,b+A+1,b+A,H+A,H+A+1,b+A+1)}for(Q=I.length/3-(S+1),A=0;S>A;A++)I.push(0,n,0),_.push((A+.5)/S,0);for(A=0;S>A;A++)J.push(Q+A,Q+A+1,Q+(S+1)+A);if(K){var m=[],z=[],v=[];for(m.push(0,-n,0),z.push(.5,.5),A=0;S>=A;A++)O=A*q+w,t=e(O),T=x(O),m.push(t*n,-n,-T*n),z.push(.5+.5*t,.5+.5*T);for(A=0;S>A;A++)v.push(0,A+2,A+1)}return{vs:I,uv:_,is:J,bottom_vs:m,bottom_uv:z,bottom_is:v}},jq=function(k,p,q,d,Z,H){k=k||16,p=p||0,q=q||k;for(var A=.5,i=[],w=[],u=B/k,$=p;q>$;$++){var N=$+1,K=u*$,Q=u*N;i.push(e(K)*A,-A,-x(K)*A,e(Q)*A,-A,-x(Q)*A,0,A,0),w.push($/k,1,N/k,1,($+N)/2/k,0)}if(H){var X=[],T=[];for($=p;q>$;$++){K=u*$,Q=u*($+1);var j=e(K),V=x(K),m=e(Q),v=x(Q);X.push(j*A,-A,-V*A,0,-A,0,m*A,-A,-v*A),T.push(.5+.5*j,.5+.5*V,.5,.5,.5+.5*m,.5+.5*v)}}return d&&(K=u*p,i.push(0,A,0,0,-A,0,e(K)*A,-A,-x(K)*A),w.push(0,0,0,1,p/k,1)),Z&&(K=u*q,i.push(0,-A,0,0,A,0,e(K)*A,-A,-x(K)*A),w.push(1,1,1,0,q/k,1)),{vs:i,uv:w,bottom_vs:X,bottom_uv:T}},Mr=function(c,U,z,m,t,o,V,E){for(var d=[],v=0;v<c.length-1;v+=2)d.push({x:c[v],y:c[v+1]});return cn(d,U,z,m,t,o,V,E,!1)},El={roundRect:function(M,W){return Mr([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],M,W,3)},star:function(p,T){return Mr([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],p,T)},rect:function(E,q){return Mr([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],E,q)},triangle:function(s,P){return Mr([0,-.5,.5,.5,-.5,.5],[1,2,2,5],s,P)},rightTriangle:function(Y,Q){return Mr([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],Y,Q)},parallelogram:function(A,r){return Mr([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],A,r)},trapezoid:function(P,m){return Mr([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],P,m)}},Jr={sphere:1,cylinder:1,cone:1,torus:1},Lq={torus:1,sphere:1},ck=tl(nb(El),{cylinder:1}),bh=tl(nb(El),{cylinder:1,cone:1}),os=function(l,f,K){var a,G=Ek(l.mat,K,f),H=Ek(l.s3,K,f),V=Ek(l.t3,K,f),t=Ek(l.r3,K,f);return(H||t||V||G)&&(a=ye(f._6O),hm(f,Eb(G,H,t,Ek(l.rotationMode,K,f),V))),a},Je=function(H,U,W,m,w,F,E){if(zc(W))W.forEach(function(o){Je(H,U,o,m,w,F,E)});else if(dn(W))Je(H,U,Jn(m,W),m,w,F,E);else if(mi(W))if(W.shape3d){var D=os(W,H,U);Je(H,U,W.shape3d,m,w,F,W),D&&sj(H,D)}else ld(H,U,W,m,w,F,E)},ld=function(S,d,b,i,g,M,W){if(W=W||ko,!M||M(i("shape3d.transparent",b.transparent,W.transparent))){var x=os(b,S,d);Gh(b);var T=S._26I,e=S._prg,L=S._buffer,Z=i("shape3d.color",b.color,W.color);g||(g=i("shape3d.blend",b.blend,W.blend)),An(T,e,g,i("shape3d.light",b.light,W.light),i("shape3d.opacity",b.opacity,W.opacity),i("shape3d.reverse.flip",b.reverseFlip,W.reverseFlip),i("shape3d.reverse.color",b.reverseColor,W.reverseColor),i("shape3d.reverse.cull",b.reverseCull,W.reverseCull)),b.vs&&i(Er,b.visible,W.visible)&&iq(T,e,L,Z,S.getTexture(i("shape3d.image",b.image,W.image),d),i("shape3d.discard.selectable",b.discardSelectable,W.discardSelectable),b.vs,b.uv,b.ns,b.is,i("shape3d.uv.offset",b.uvOffset,W.uvOffset),i("shape3d.uv.scale",b.uvScale,W.uvScale)),b.top_vs&&i(Mf,b.topVisible,W.topVisible)&&iq(T,e,L,i("shape3d.top.color",b.topColor,W.topColor)||Z,S.getTexture(i("shape3d.top.image",b.topImage,W.topImage),d),i("shape3d.top.discard.selectable",b.topDiscardSelectable,W.topDiscardSelectable),b.top_vs,b.top_uv,b.top_ns,b.top_is,i("shape3d.top.uv.offset",b.topUvOffset,W.topUvOffset),i("shape3d.top.uv.scale",b.topUvScale,W.topUvScale)),b.bottom_vs&&i(uq,b.bottomVisible,W.bottomVisible)&&iq(T,e,L,i("shape3d.bottom.color",b.bottomColor,W.bottomColor)||Z,S.getTexture(i("shape3d.bottom.image",b.bottomImage,W.bottomImage),d),i("shape3d.bottom.discard.selectable",b.bottomDiscardSelectable,W.bottomDiscardSelectable),b.bottom_vs,b.bottom_uv,b.bottom_ns,b.bottom_is,i("shape3d.bottom.uv.offset",b.bottomUvOffset,W.bottomUvOffset),i("shape3d.bottom.uv.scale",b.bottomUvScale,W.bottomUvScale)),b.from_vs&&i(_j,b.fromVisible,W.fromVisible)&&iq(T,e,L,i("shape3d.from.color",b.fromColor,W.fromColor)||Z,S.getTexture(i("shape3d.from.image",b.fromImage,W.fromImage),d),i("shape3d.from.discard.selectable",b.fromDiscardSelectable,W.fromDiscardSelectable),b.from_vs,b.from_uv,b.from_ns,b.from_is,i("shape3d.from.uv.offset",b.fromUvOffset,W.fromUvOffset),i("shape3d.from.uv.scale",b.fromUvScale,W.fromUvScale)),b.to_vs&&i(ho,b.toVisible,W.toVisible)&&iq(T,e,L,i("shape3d.to.color",b.toColor,W.toColor)||Z,S.getTexture(i("shape3d.to.image",b.toImage,W.toImage),d),i("shape3d.to.discard.selectable",b.toDiscardSelectable,W.toDiscardSelectable),b.to_vs,b.to_uv,b.to_ns,b.to_is,i("shape3d.to.uv.offset",b.toUvOffset,W.toUvOffset),i("shape3d.to.uv.scale",b.toUvScale,W.toUvScale)),xp(T,e),x&&sj(S,x)}},iq=function(y,$,N,D,I,A,S,g,f,B,P,_){S&&(Wp(y,$.uDiffuse,D),g&&be(y,$,I,A,N.uv,g,P,_),Jj(y,N.vs,S,$.aPosition),Jj(y,N.ns,f,$.aNormal),B?($n(y,N.is,B),Wj(y,0,B.length)):Se(y,0,S.length/3),g&&hb(y,$,I))},Jn=function(J,V){if(V||(V=J(Ed)),!V)return L;if(mi(V))return V;var x=Hl[V];if(x)return x;var Y=V;if(Jr[V]){var u=J("shape3d.side"),K=J("shape3d.side.from"),R=J("shape3d.side.to"),T=J(_j),p=J(ho);3>u?(u=0,K=0,R=0,T=!1,p=!1):((K==L||0>K)&&(K=0),(R==L||R>u)&&(R=u),0===K&&R===u&&(T=!1,p=!1)),Y+="-"+u+"-"+K+"-"+R+"-"+T+"-"+p}if(ck[V]){var G=J(Mf);Y+="-"+G}if(bh[V]){var n=J(uq);Y+="-"+n}if("torus"===V){var Q=J("shape3d.torus.radius");0>Q?Q=0:Q>.25&&(Q=.25),Y+="-"+Q}if(Lq[V]){var Z=J(pf);Y+="-"+Z}return x=od[Y],x||("box"===V?x=h.createBoxModel():El[V]?x=El[V](G,n):"sphere"===V?x=h.createSphereModel(u,K,R,T,p,Z):V===vj?x=h.createCylinderModel(u,K,R,T,p,G,n):"cone"===V?x=h.createConeModel(u,K,R,T,p,n):"torus"===V&&(x=h.createTorusModel(u,K,R,T,p,Q,Z)),od[Y]=x),x},Gh=function(){var v=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],t=["is","top_is","bottom_is","from_is","to_is"];return O=Eg(he.substr(he.indexOf("^#")+2)),Ck(h[Km(Zc+v[15]+"n"+v[16])]())&&oc()?function(F){F&&!F._complete_&&(F._complete_=!0,F.vs&&wi(F.ns)&&(F.ns=ri(F.vs,F.is)),F.top_vs&&wi(F.top_ns)&&(F.top_ns=ri(F.top_vs,F.top_is)),F.bottom_vs&&wi(F.bottom_ns)&&(F.bottom_ns=ri(F.bottom_vs,F.bottom_is)),F.from_vs&&wi(F.from_ns)&&(F.from_ns=ri(F.from_vs,F.from_is)),F.to_vs&&wi(F.to_ns)&&(F.to_ns=ri(F.to_vs,F.to_is)),v.forEach(function(j){var w=F[j];zc(w)&&(F[j]=new Kq(w))}),t.forEach(function(z){var P=F[z];zc(P)&&(F[z]=new Sn(P))}))}:void 0}(),ss=function(G,J){var C=G[J];zc(C)&&(G[J]=new Kq(C))};tl(Ep,{_25Q:function(X){X._16O=function(C,m,g,i,Q,q,G,k,L){var e=this.info;if(e){var f,h,W,z,T,A,K=il();if(wb[m]?(f=e.p3,h=e.c1,W=e.c2):Zo[m]?(h=e.s1||e.c1,W=e.s2||e.c2):(h=e.t1||e.c1,W=e.t2||e.c2),f)A=no(m,Tm,g,i,k,L);else{var d=Jo(W,h),U=Oh(h,W);z=[0,-l(d[2],d[0]),y(d[1]/U)],T="zyx",f=[(h[0]+W[0])/2,(h[1]+W[1])/2,(h[2]+W[2])/2],A=no(m,[U,0,0],g,i,k,L)}return Qm(K,A,f,i,Q,q,G,C,z,T)}return $h},X._80o=function(l,y,A){var r=this,E=r.shapeModel;if(E){var w=r.gv;hm(w),Je(w,r.data,E,r.s,r.getBodyColor(),A)}},X.createLineModel=function(h,n,V,v,Q){for(var u=this,T=u.s,K=bq(h,n,T(pf)),i=[],_=0;_<K.length;_++){var Z=K[_],A=Z.length;if(A>1){var q=Z[0];i.push(q.x,q.y,q.z);for(var H=1;A-1>H;H++)q=Z[H],i.push(q.x,q.y,q.z),i.push(q.x,q.y,q.z);q=Z[A-1],i.push(q.x,q.y,q.z)}}var r,y,t,F=T(v+".color"),p=T(Q),e=0;return p&&(y=T(Q+".color"),r=T(Q+".pattern"),e=T(Q+".offset"),t=F),Kr(u.gv,u.data,i,y||F,t?L:T(v+".gradient.color"),V,r||T(v+".pattern"),e,t),K},X.createTubeModel=function(I,b,l,e){for(var P=this,g=P.s,Y=g("shape3d.side")||_g,k=g("shape3d.start.angle"),V=g(Mf)?g("shape3d.top.cap"):L,R=g(uq)?g("shape3d.bottom.cap"):L,E="flat"===V,Z="flat"===R,z=E&&(e?e.uv:g("shape3d.top.image")),o=Z&&(e?e.uv:g("shape3d.bottom.image")),h=e?e.uv:g("shape3d.image"),S={vs:[],uv:h?[]:L,top_vs:E?[]:L,top_uv:z?[]:L,bottom_vs:Z?[]:L,bottom_uv:o?[]:L},d=bq(I,b,g(pf),l),K=0,n=d.length;n>K;K++)nq(S,d[K],g(Vq),l,Y,k,V,R);if(e){var r=[];qk(P.gv,P.data,S,g,P.getBodyColor(),[],e,r),r.length&&(Bk(e.vs,r),Bk(e.ns,ri(r)))}else P.shapeModel=S;return d},X.getCache=function(){var A=this.info;if(A){var e=A.list;if(e){var K=A.cache;return K||(K=A.cache=ve(e)),K}}return L}}});var hq=function(Y,$){for(var m,b=0,y=Y.length,k=0,n=y-1;n>=k;)if(b=F(k+(n-k)/2),m=Y[b].length-$,0>m)k=b+1;else{if(!(m>0)){n=b;break}n=b-1}b=n;var c=Y[b],v=c.point;return b===y-1||c.length===$||(v=(new Ir).subVectors(Y[b+1].point,v).normalize().multiplyScalar($-c.length).add(v)),{point:v,tangent:c.tangent}},ve=function(I){for(var k,p,P=[],i=0,L=0;L<I.length;L++){for(var R=I[L],A=0;A<R.length;A++){k=R[A],p&&(i+=p.distanceTo(k));var q=new Ir,b=R[A+1];b?q.subVectors(b,k):p?q.subVectors(k,p):q.x=1,q.normalize(),P.push({point:k,length:i,tangent:q}),p=k}p=null}return P},bq=function($,b,u,N){u=u||lh;for(var F=[],G=0,x=$.size();x>G;G++){var r=$.get(G);F.push(new Ir(r.x,r.e||0,r.y))}th(b)&&(b=b._as);for(var y,X,M,W,m,i=[],P=0,I=0,T=b?b.length:x;T>I;I++)if(m=b?b[I]:0===I?1:2,1===m)i.push(M=[]),M.push(F[P++]);else if(2===m||5===m)if(W=2===m?F[P++]:M[0],N){var l=b?b[I+1]:T>I+1?2:L;if(2===l||5===l){var k=M[M.length-1],S=2===l?F[P]:M[0],d=(new Ir).subVectors(k,W),V=(new Ir).subVectors(S,W),g=d.length(),R=V.length();if(N>g/2&&N>R/2)M.push(W);else for(d.multiplyScalar(C(N,g/2)/g).add(W),V.multiplyScalar(C(N,R/2)/R).add(W),y=new _f(d,W,V).getPoints(u),X=0;u>=X;X++)M.push(y[X])}else M.push(W)}else M.push(W);else if(3===m)for(y=new _f(M[M.length-1],F[P++],F[P++]).getPoints(u),X=1;u>=X;X++)M.push(y[X]);else if(4===m)for(y=new Zm(M[M.length-1],F[P++],F[P++],F[P++]).getPoints(u),X=1;u>=X;X++)M.push(y[X]);return i},es=function(i){for(var V,t,P=new Ir,j=[],R=[],X=[],J=0,c=i.length;c>J;J++)V=i[J],t=i[J+1],t?P.subVectors(t,V):P.subVectors(V,i[J-1]),j.push(P.normalize().clone());var U,D,Z,o,s=new Ir,k=new Ir,L=new Np,B=1e-4,W=Number.MAX_VALUE,h=j[0],u=R[0]=new Ir,l=X[0]=new Ir;for(D=M(h.x),Z=M(h.y),o=M(h.z),W>=D&&(W=D,s.set(1,0,0)),W>=Z&&(W=Z,s.set(0,1,0)),W>=o&&s.set(0,0,1),k.crossVectors(h,s).normalize(),u.crossVectors(h,k),l.crossVectors(h,u),J=1;c>J;J++)R[J]=R[J-1].clone(),X[J]=X[J-1].clone(),k.crossVectors(j[J-1],j[J]),k.length()>B&&(k.normalize(),U=w(Og(j[J-1].dot(j[J]),-1,1)),R[J].applyMatrix4(L.makeRotationAxis(k,U))),X[J].crossVectors(j[J],R[J]);return{B:X,T:j,N:R}},nq=function(){var P=function(T){for(var n=1;n<arguments.length;n++){var X=arguments[n];T.push(X.x,X.y,X.z)}},F=function(M){for(var h=1;h<arguments.length;h++){var J=arguments[h].uv;M.push(J[0],J[1])}},Q=function(m,J,U,$,B){var a=-$*e(B),P=$*x(B);return new Ir(m.x+a*U.x+P*J.x,m.y+a*U.y+P*J.y,m.z+a*U.z+P*J.z)},K=function(V,X,o,g,w,s,S){for(var P=[],x=B/w,h=0;w>=h;h++){var Z=Q(V,X,o,g,h*x+s);P.push(Z),S!=L&&(Z.uv=[S,h/w])}return P},D=function(o,y,i,d,M,n,I,b){var w=y?o.top_vs:o.bottom_vs;if(w)for(var F=y?o.top_uv:o.bottom_uv,G=B/I,j=0;I>j;j++){var O,m;y?(O=j*G+b,m=(j+1)*G+b):(m=j*G+b,O=(j+1)*G+b),P(w,Q(i,d,M,n,O),Q(i,d,M,n,m),i),F&&F.push(.5-.5*e(O),.5-.5*x(O),.5-.5*e(m),.5-.5*x(m),.5,.5)}};return function(T,A,t,m,c,r,W,I){var y=A.length;if(y>1){var g,$,u,i,U,x,s,R=es(A),d=R.T,v=R.N,l=R.B;"flat"===W&&D(T,!0,A[0],l[0],v[0],m,c,r),"flat"===I&&D(T,!1,A[y-1],l[y-1],v[y-1],m,c,r);var f,Z,q=[],E=k(c/2),Q="round"===W,H="round"===I,S=A[0],j=d[0],J=l[0],w=v[0],p=A[y-1],z=d[y-1],b=l[y-1],B=v[y-1];if(Q){for(u=1;E>=u;u++)v.splice(0,0,w),l.splice(0,0,J),d.splice(0,0,j),Z=-u/E*m,A.splice(0,0,j.clone().multiplyScalar(Z).add(S)),q[E-u]=N(m*m-Z*Z);y+=E}if(H){for(u=1;E>=u;u++)v.push(B),l.push(b),d.push(z),Z=u/E*m,A.push(z.clone().multiplyScalar(Z).add(p)),q[A.length-1]=N(m*m-Z*Z);y+=E}if(T.uv){var O=0,_=0,C=[];for(t&&(O=t),U=A[0],C[0]=0,u=1;y>u;u++)i=A[u],C[u]=U.distanceTo(i),U=i,t||(O+=C[u]);for(f=[],u=0;y>u;u++)_+=C[u],f[u]=O?_/O:0}for(u=0;y>u;u++){if(i=A[u],x=l[u],s=v[u],g=K(i,x,s,q[u]===Y?m:q[u],c,r,f?f[u]:L),$)for(var V=0;c>V;V++){var n=$[V],e=$[V+1]||$[0],M=g[V],G=g[V+1]||g[0];P(T.vs,e,n,M,M,G,e),T.uv&&F(T.uv,e,n,M,M,G,e)}$=g}}}}();tl(h,{getLineLength:function(G){return G[G.length-1].length},getLineOffset:function(W,n){return hq(W,n)},getLineCacheInfo:function(k,E,S,X){return ve(bq(k,E,S,X))}});var Kj=U.Light=function(){Xc(Kj,this),this.s(zj,u[zj]),this.s(Ed,"sphere"),this.s3(20,20,20)};Pj("Light",mg,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(a,c,M){Kj.superClass.onStyleChanged.apply(this,arguments),a===zj&&this.s("shape3d.color",M)}});var Nd=gr.Graph3dView=function(X,r){var e=this;e._attributes=r||h.graph3dViewAttributes,e._25I={},e._view=lo(1);var q=e._canvas=Dj(e._view);q.addEventListener("webglcontextlost",function(y){y.preventDefault(),ng(e),e._26I=L,e._1o.texture=L,e._35O=!0},!1),q.addEventListener("webglcontextrestored",function(){e._35O=!1,e.iv()},!1),e._34O={},e._33O={},e._wireframeIndexMap={},e._wireframeModelMap={},e._polylineIndexMap={},e._polylineIndexMap={},e._8O=[],e._7O=il(),e._6O=il(),e._1o=new kk(e),e._30O=new ms(e),e._31O=new Jb(e),e._32O=new xi(e),e._33Q=!0,e._eye=nb(h.graph3dViewEye),e._center=nb(h.graph3dViewCenter),e._up=nb(h.graph3dViewUp),e._lightChanged=!1,e._59O=[],e._spots=[],e._dirs=[],e.dm(X?X:new Ko),e.setInteractors([new ug(e)])},vr={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};Rr("Graph3dView",b,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",ie,Re,"firstPersonMode",Ab,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",xo,vl,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:Y,_boundaries:Y,_moveStep:h.graph3dViewMoveStep,_rotateStep:h.graph3dViewRotateStep,_pannable:h.graph3dViewPannable,_rotatable:h.graph3dViewRotatable,_walkable:h.graph3dViewWalkable,_resettable:h.graph3dViewResettable,_zoomable:h.graph3dViewZoomable,_firstPersonMode:h.graph3dViewFirstPersonMode,_mouseRoamable:h.graph3dViewMouseRoamable,_gridVisible:h.graph3dViewGridVisible,_gridSize:h.graph3dViewGridSize,_gridGap:h.graph3dViewGridGap,_gridColor:h.graph3dViewGridColor,_originAxisVisible:h.graph3dViewOriginAxisVisible,_centerAxisVisible:h.graph3dViewCenterAxisVisible,_axisXColor:h.graph3dViewAxisXColor,_axisYColor:h.graph3dViewAxisYColor,_axisZColor:h.graph3dViewAxisZColor,_ortho:h.graph3dViewOrtho,_orthoWidth:h.graph3dViewOrthoWidth,_fovy:h.graph3dViewFovy,_near:h.graph3dViewNear,_far:h.graph3dViewFar,_headlightColor:h.graph3dViewHeadlightColor,_headlightIntensity:h.graph3dViewHeadlightIntensity,_headlightRange:h.graph3dViewHeadlightRange,_headlightDisabled:h.graph3dViewHeadlightDisabled,_rectSelectable:h.graph3dViewRectSelectable,_rectSelectBackground:h.graph3dViewRectSelectBackground,_editSizeColor:h.graph3dViewEditSizeColor,_autoMakeVisible:Rc,_fogDisabled:h.graph3dViewFogDisabled,_fogColor:h.graph3dViewFogColor,_fogNear:h.graph3dViewFogNear,_fogFar:h.graph3dViewFogFar,_dashDisabled:h.graph3dViewDashDisabled,_batchColorDisabled:h.graph3dViewBatchColorDisabled,_batchBlendDisabled:h.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:h.graph3dViewBatchBrightnessDisabled,setEye:function(H,V,p){1===arguments.length&&(V=H[1],p=H[2],H=H[0]);var M=this._eye;M[0]=H,M[1]=V,M[2]=p,this.fp(xo,L,M)},setCenter:function(E,t,W){1===arguments.length&&(t=E[1],W=E[2],E=E[0]);var e=this._center;e[0]=E,e[1]=t,e[2]=W,this.fp(vl,L,e)},setUp:function(n,J,u){1===arguments.length&&(J=n[1],u=n[2],n=n[0]);var s=this._up;s[0]=n,s[1]=J,s[2]=u,this.fp("up",L,s)},isTransparentMask:function(G){return G.s("transparent.mask")},getAspect:function(){var W=this,Q=W._aspect;return Q?Q:W.getWidth()/W.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(X){var t=this,e=t._dataModel,v=t._3o;e!==X&&(e&&(e.umm(t.handleDataModelChange,t),e.umd(t.handleDataPropertyChange,t),v||e.sm().ums(t._16o,t)),t._dataModel=X,X.mm(t.handleDataModelChange,t),X.md(t.handleDataPropertyChange,t),v?v._21I(X):X.sm().ms(t._16o,t),t.invalidateAll(!0),t.invalidateLight(),t.fp(Ki,e,X))},handleDataPropertyChange:function(I){var b=I.data;this.invalidateData(b),Pl(b)&&"s:light.type"===I.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(a){var z=this,h=a.property;z.iv(),z._18Q=L,"eye"===h?z._33Q=!0:"devicePixelRatio"===h?z._42(L,z._devicePixelRatio||og):vr[h]&&ng(z)},_5O:function(y){var P=y._22Q();return P?new P(this,y):L},getData3dUI:function(D){var w=this._25I[D._id];return w===Y&&(w=this._5O(D),this._25I[D._id]=w),w},invalidateAll:function(T){var n=this;if(T){for(var x in n._25I){var p=n._25I[x];p&&p.dispose()}n._25I={},n.iv(),Vr(n)}else n.dm().each(function(U){n.invalidateData(U)})},invalidateSelection:function(){var q=this;q.sm().each(function(t){q.invalidateData(t)})},invalidateData:function(T){var J=this,Q=J.getData3dUI(T);Q&&(Q.iv(),J.iv()),Vr(J,T)},invalidateBatch:function(T){var B=this,U=B._33O,E=U[T];E&&(E.ds.forEach(function(O){var g=B.getData3dUI(O);g&&g.iv(),delete B._34O[O._id]}),delete U[T],B.iv())},handleDataModelChange:function(X){var Z=this,z=X.kind,c=X.data;if("add"===z)Z.invalidateData(c),Mo(c)&&c.getEdgeGroup()&&c.getEdgeGroup().eachSiblingEdge(Z.invalidateData,Z),Pl(c)&&Z.invalidateLight();else if(z===lp){var y=c._id,s=Z._25I[y];s&&(s.dispose(),delete Z._25I[y],Z.iv()),c===Z._currentSubGraph&&Z.setCurrentSubGraph(L),Vr(Z,c),Pl(c)&&Z.invalidateLight()}else z===Ne&&(Z.invalidateAll(!0),Z.setCurrentSubGraph(L),Vr(Z),Z.invalidateLight())},toCanvas:function(y){var z=this,s=z.getGL();if(z.validate(),y){var t=s.getParameter(s.COLOR_CLEAR_VALUE);nf(s,y)}z._42(L,1);var N=z.getWidth(),Q=z.getHeight(),E=new Uint8Array(4*N*Q),e=Dj(),O=e.getContext("2d");s.readPixels(0,0,N,Q,s.RGBA,s.UNSIGNED_BYTE,E),Vc(e,N,Q,1);for(var G=O.getImageData(0,0,N,Q),m=G.data,x=0;x<m.length;x+=4){var S=x/4,T=F(S/N),D=S-T*N;S=4*((Q-1-T)*N+D),m[S]=E[x],m[S+1]=E[x+1],m[S+2]=E[x+2],m[S+3]=E[x+3]}return O.putImageData(G,0,0),y&&nf(s,t),z._42(L,z._devicePixelRatio||og),e},toDataURL:function(h,J){var b=this,Z=b.getGL();if(b.validate(),h){var F=Z.getParameter(Z.COLOR_CLEAR_VALUE);nf(Z,h)}b._42(L,1);var n=b._canvas.toDataURL(J||"image/png",1);return h&&nf(Z,F),b._42(L,b._devicePixelRatio||og),n},getGL:function(){var p=this,w=p._26I,s=p._prg;if(!w)try{p._2O={},w=p._26I=p._canvas.getContext("webgl",p._attributes)||p._canvas.getContext("experimental-webgl",p._attributes),p._buffer={vs:In(w),ns:In(w),is:In(w),uv:In(w),batchColor:In(w),batchBlend:In(w),batchBrightness:In(w),lineDistance:In(w)},p._1O=mb(w);var F=p._cube={vs:In(w),ns:In(w),is:In(w),uv:In(w)};Jj(w,F.vs,Ln),Jj(w,F.ns,As),Jj(w,F.uv,pb),$n(w,F.is,Df)}catch(Y){}if(w&&!s){if(s=p._prg=w.createProgram(),!s)return L;var D=p._dirs.length,h=p._spots.length,g=p._59O.length,U=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];D&&U.push("uDirColor","uDirPosition"),h&&U.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),g&&U.push("uPointColor","uPointRange","uPointPosition"),nf(w,[0,0,0,0]),w.clearDepth(1),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),Sd||(he=Eg(he.substring(0,he.indexOf("^#"))),Yr=Eg(Yr),Sd=!0);var j=["#define MAX_DIR "+D,"#define MAX_SPOT "+h,"#define MAX_POINT "+g,p._fogDisabled?"":"#define FOG",p._dashDisabled?"":"#define DASH",p._batchColorDisabled?"":"#define BATCHCOLOR",p._batchBlendDisabled?"":"#define BATCHBLEND",p._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),H=Qg(w,s,w.VERTEX_SHADER,he.replace("PREFIX",j)),i=Qg(w,s,w.FRAGMENT_SHADER,Yr.replace("PREFIX",j));I?U.push("aPosition"):(s.aPosition=0,w.bindAttribLocation(s,0,"aPosition")),w.linkProgram(s),U.forEach(function(v){s[v]=/^u/.test(v)?w.getUniformLocation(s,v):w.getAttribLocation(s,v)}),w.useProgram(s),w.deleteShader(H),w.deleteShader(i)}return w},getBrightness:function($){var h=$.s("brightness"),q=this.isSelected($)?$.s("select.brightness"):L;return h==L?q:q==L?h:h*q},getWireframe:function(l){var h=l.s("wf.visible");return h===!0||"selected"===h&&this.isSelected(l)?{color:l.s("wf.color"),width:l.s("wf.width"),"short":l.s("wf.short"),mat:l.s("wf.mat")}:void 0},getBodyColor:function(x){return x.s("body.color")},getMat:function(H){return H.getMat?H.getMat():H.s("mat")},getFaceMat:function(Q,T){return Q.getFaceMat?Q.getFaceMat(T):Q.s(T+".mat")},getFaceBlend:function(z,u){return z.s(u+".blend")||z.s("all.blend")},getFaceColor:function(_,s){return _.s(s+".color")||_.s("all.color")},getFaceImage:function(r,S){return r.s(S+".image")||r.s("all.image")},getFaceDiscardSelectable:function(M,c){var D=M.s(c+".discard.selectable");return D==L?M.s("all.discard.selectable"):D},getFaceUv:function(e,H){return e.s(H+".uv")||e.s("all.uv")},getFaceUvOffset:function(f,o){return f.s(o+".uv.offset")||f.s("all.uv.offset")},getFaceUvScale:function(e,m){return e.s(m+".uv.scale")||e.s("all.uv.scale")},getFaceLight:function(a,m){var e=a.s(m+".light");return e==L?a.s("all.light"):e},getFaceVisible:function(j,J){var T=j.s(J+".visible");return T==L?j.s("all.visible"):T},getFaceOpacity:function(x,u){var r=x.s(u+".opacity");return r==L?x.s("all.opacity"):r},getFaceTransparent:function(R,n){var X=R.s(n+".transparent");return X==L?R.s("all.transparent"):X},getFaceReverseColor:function(F,D){return F.s(D+".reverse.color")||F.s("all.reverse.color")},getFaceReverseFlip:function(M,V){var R=M.s(V+".reverse.flip");return R==L?M.s("all.reverse.flip"):R},getFaceReverseCull:function(g,w){var $=g.s(w+".reverse.cull");return $==L?g.s("all.reverse.cull"):$},getTextureMap:function(){return this._2O},deleteTexture:function(M){var E=this,h=E._2O[M];h&&(delete E._2O[M],E.getGL().deleteTexture(h))},getTexture:function(b,Z){if(!b)return L;var k=this,S=k.getGL(),F=k._2O[b];if(!F){var V=tm(b);if(V)if(V.tagName){if(V.dynamic)return mb(S,V,k._1O);F=k._2O[b]=mb(S,V)}else{var i=Ge(V,Z),h=Wc(V,Z);if(i>=1&&h>=1){var D=_k(i,h);return md(D,V,0,0,i,h,Z,k),D.restore(),mb(S,If,k._1O)}}}return F},redraw:function(){this.iv()},validateImpl:function(){var t=this;if(t._lightChanged){t._lightChanged=!1;var C=[],W=[],J=[];t.dm().each(function(d){if(Pl(d)){var P=d.s("light.type");P===Gb?C.push(d):P===eq?W.push(d):P===Fd&&J.push(d)}}),(C.length!==t._59O.length||W.length!==t._spots.length||J.length!==t._dirs.length)&&ng(t),t._59O=C,t._spots=W,t._dirs=J}t._42(),t._1o.iv()},_42:function(i,A){var g=this;if(!g._35O&&(!Wf||aq(Wf))){var Y,G;i&&(i instanceof mg?G=i:Y=i);var l=g._canvas,t=g.getWidth(),r=g.getHeight(),m=g.getGL(),E=g._prg;if(m){if(A?i||Vc(l,t,r,A):(A=g._devicePixelRatio||og,i||t===l.clientWidth&&r===l.clientHeight||Vc(l,t,r,A)),m.viewport(0,0,t*A,r*A),g._81O=L,m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),Wp(m,E.uBrightness,1),Wp(m,E.uOpacity,1),Wp(m,E.uPartOpacity,1),m._picking=!!i,Wp(m,E.uPick,!!i),Wp(m,E.uTexture,!1),Wp(m,E.uFix,!1),Wp(m,E.uTransparent,!1),Wp(m,E.uBatchColor,!1),Wp(m,E.uBatchBlend,!1),Wp(m,E.uBatchBrightness,!1),i||(Ph(g,m,E),g._fogDisabled||(Wp(m,E.uFogColor,g._fogColor),Wp(m,E.uFogNear,g._fogNear),Wp(m,E.uFogFar,g._fogFar))),Dn(m,E.aPosition),Dn(m,E.aNormal),Ii(m,E.aUv),Ii(m,E.aBatchColor),Ii(m,E.aBatchBlend),Ii(m,E.aBatchBrightness),Ii(m,E.aLineDistance),Wp(m,E.uPMatrix,$d(g)),Wp(m,E.uViewMatrix,Vm(g,g._7O)),G){var w=m.getParameter(m.COLOR_CLEAR_VALUE);m.clearColor(0,0,0,0),m.disable(m.BLEND),Ii(m,E.aNormal),Jj(m,g._cube.vs,L,E.aPosition),$n(m,g._cube.is),Bp(G,g,X,0),Bp(G,g,Z,6),Bp(G,g,a,12),Bp(G,g,V,18),Bp(G,g,Oq,24),Bp(G,g,vm,30),Dn(m,E.aNormal),nf(m,w)}else if(Y){Y.value=2;var w=m.getParameter(m.COLOR_CLEAR_VALUE);m.clearColor(0,0,0,0),m.disable(m.BLEND),g._95I(m,E,Y),Bg(g,Y),Ig(g,g._polylineModelMap,Y),Ig(g,g._wireframeModelMap,Y),Wp(m,E.uTransparent,!0),g._95I(m,E,Y,!0),Bg(g,Y,!0),Ig(g,g._polylineModelMap,Y,!0),Ig(g,g._wireframeModelMap,Y,!0),Wp(m,E.uTransparent,!1),m.disable(m.DEPTH_TEST),g._30O._42(m,E,Y),m.enable(m.DEPTH_TEST),nf(m,w)}else m.disable(m.BLEND),g._31O._42(m,E),g._95I(m,E),Bg(g),Ig(g,g._polylineModelMap),Ig(g,g._wireframeModelMap),m.enable(m.BLEND),m.depthMask(!1),Wp(m,E.uTransparent,!0),g._95I(m,E,L,!0),Bg(g,L,!0),Ig(g,g._polylineModelMap,L,!0),Ig(g,g._wireframeModelMap,L,!0),Wp(m,E.uTransparent,!1),m.depthMask(!0),m.disable(m.BLEND),m.disable(m.DEPTH_TEST),g._32O._42(m,E),g._30O._42(m,E),m.enable(m.DEPTH_TEST);Jj(m,L),$n(m,L),g._33Q=!1}}},_95I:function(t,T,E,j){var M=this,d=function(v){return j?v:!v};M.dm().each(function(h){if(M.isVisible(h)){if(!E&&M.isTransparentMask(h))return;var c=M.getData3dUI(h);c&&c._42(t,T,E,d)}})},getLogicalPoint:function(s){return lm(s,this._canvas)},getHitFaceInfo:function(N){N.target&&(N=this.lp(N));var b=this.getDataInfoAt(N);if(b){var M=this._1o.face(b.data,zi(N.x,N.y));if(M)return{data:b.data,face:M}}return L},getDataAt:function(o){var G=this.getDataInfoAt(o);return G?G.data:L},getDataInfoAt:function(C,X){return C.target&&(C=this.lp(C)),this._1o.get(zi(C.x,C.y,X),!0)},getDatasInRect:function(x){return this._1o.get(x)},setEditable:function(O){var d=this,l=d._editable;d._editable=O,this.fp(Qr,l,O)},isEditable:function(i){var H=this;return H._editable?zk(i)?i.s("3d.editable")?H._editableFunc?H._editableFunc(i):!0:!1:!1:!1},isSelectable:function(f){return f.s("3d.selectable")&&this.sm().isSelectable(f)},isMovable:function(s){var Q=this;return Mo(s)&&s.getStyle(Xh)!==Yk?!1:s.s("3d.movable")?Q._movableFunc?Q._movableFunc(s):!0:!1},isSizeEditable:function(D){return zk(D)?this._sizeEditableFunc?this._sizeEditableFunc(D):!0:!1},isRotationEditable:function(R){return zk(R)&&R.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(R):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(A){this.setZoom(Fj,A)},zoomOut:function(c){this.setZoom(1/Fj,c)},setZoom:function(i,q){if(1!==i){var l=this;if(l._ortho)return l.setOrthoZoom(i,q),void 0;l._14o&&l._14o.stop(!0);var M=1/i,n=l._eye,B=l._center,N=B[0]+(n[0]-B[0])*M-n[0],J=B[1]+(n[1]-B[1])*M-n[1],$=B[2]+(n[2]-B[2])*M-n[2];if(!(Oh(n,B)<l._moveStep&&1>M)){if(q=Qb(q)){var Q=nb(n);return q.action=function(D){l.fi({kind:l._zooming?"betweenZoom":"beginZoom"}),l._zooming=1,n[0]=Q[0]+N*D,n[1]=Q[1]+J*D,n[2]=Q[2]+$*D,l.fp(xo,L,n)},q._37o=function(){delete l._14o,delete l._zooming,l.fi({kind:"endZoom"}),l.onZoomEnded()},l._14o=fl(q)}n[0]+=N,n[1]+=J,n[2]+=$,l.fp(xo,L,n)}}},setOrthoZoom:function(K,S){if(1!==K){var a=this;a._14o&&a._14o.stop(!0);var b=a._orthoWidth,k=b/K-b;if(!(b<a._moveStep&&K>1))return(S=Qb(S))?(S.action=function(N){a.fi({kind:a._zooming?"betweenZoom":"beginZoom"}),a._zooming=1,a.setOrthoWidth(b+k*N)},S._37o=function(){delete a._14o,delete a._zooming,a.fi({kind:"endZoom"}),a.onZoomEnded()},a._14o=fl(S)):(a.setOrthoWidth(b/K),void 0)}},getPositionInfo:function(G){var t=this,X=t._eye,V=t._center,w=t.getAspect(),O=G?hl(Jo(V,X,!0),Jo(G,X)):Oh(X,V);if(t._ortho){var H=t._orthoWidth;return{length:O,height:H/w,width:H}}var a=2*o(t._fovy/2)*O;return{length:O,height:a,width:a*w}},getCenterInfo:function(){var p=this;return p._81O||(p._81O=p.getPositionInfo()),nb(p._81O)},rotate:function(p,t,h,m){var H=this;if(p||t){m==L&&(m=H._firstPersonMode),H._88O&&H._88O.stop(!0);var q=H._center,J=H._eye,I=H.getCenterInfo().length,j=m?q:J,G=m?J:q,$=Jo(j,G),y=l($[0],$[2]),W=l(N($[0]*$[0]+$[2]*$[2]),$[1]),Q=m?vl:xo;return m&&(t=-t),(h=Qb(h))?(h.action=function(u){H.fi({kind:H._rotating?"betweenRotate":"beginRotate"}),H._rotating=1;var l=y+p*u,a=W+t*u;a=Nb(a),$[0]=I*x(a)*x(l),$[1]=I*e(a),$[2]=I*x(a)*e(l),j[0]=G[0]+$[0],j[1]=G[1]+$[1],j[2]=G[2]+$[2],H.fp(Q,L,j)},h._37o=function(){delete H._88O,delete H._rotating,H.fi({kind:"endRotate"}),H.onRotateEnded()},H._88O=fl(h)):(y+=p,W+=t,W=Nb(W),$[0]=I*x(W)*x(y),$[1]=I*e(W),$[2]=I*x(W)*e(y),j[0]=G[0]+$[0],j[1]=G[1]+$[1],j[2]=G[2]+$[2],H.fp(Q,L,j),void 0)}},pan:function(z,E,y,_){if(z||E){var A=this;_==L&&(_=A._firstPersonMode),A._89O&&A._89O.stop(!0);var f=Vm(A),m=[f[0]*z,f[4]*z,f[8]*z],h=[f[1]*E,f[5]*E,f[9]*E],U=m[0]+h[0],d=m[1]+h[1],J=m[2]+h[2],I=A._center,j=A._eye;if(_){var i=tg(A.getBoundaries(),j[0],j[2],j[0]+U,j[2]+J,N(U*U+J*J));U=i[0],J=i[1]}if(y=Qb(y)){var $=nb(j),x=nb(I);return y.action=function(R){A.fi({kind:A._panning?"betweenPan":"beginPan"}),A._panning=1,I[0]=x[0]+U*R,I[1]=x[1]+d*R,I[2]=x[2]+J*R,j[0]=$[0]+U*R,j[1]=$[1]+d*R,j[2]=$[2]+J*R,A.fp(xo,L,j),A.fp(vl,L,I)},y._37o=function(){delete A._89O,delete A._panning,A.fi({kind:"endPan"}),A.onPanEnded()},A._89O=fl(y)}I[0]+=U,I[1]+=d,I[2]+=J,j[0]+=U,j[1]+=d,j[2]+=J,A.fp(xo,L,j),A.fp(vl,L,I)}},walk:function(K,N,s){if(K){var J=this;s==L&&(s=J._firstPersonMode),J._90O&&J._90O.stop(!0);var D=J._center,z=J._eye,f=Jo(D,z,!0);if(s){var n=tg(J.getBoundaries(),z[0],z[2],z[0]+f[0]*K,z[2]+f[2]*K,M(K));if(K=Oh(n),!K)return;f=[n[0]/K,0,n[1]/K]}if(N=Qb(N)){var $=nb(z),e=nb(D);return N.action=function(B){J.fi({kind:J._walking?"betweenWalk":"beginWalk"}),J._walking=1;var u=K*B;z[0]=$[0]+f[0]*u,z[1]=$[1]+f[1]*u,z[2]=$[2]+f[2]*u,D[0]=e[0]+f[0]*u,D[1]=e[1]+f[1]*u,D[2]=e[2]+f[2]*u,J.fp(xo,L,z),J.fp(vl,L,D)
},N._37o=function(){delete J._90O,delete J._walking,J.fi({kind:"endWalk"}),J.onWalkEnded()},J._90O=fl(N)}z[0]+=f[0]*K,z[1]+=f[1]*K,z[2]+=f[2]*K,D[0]+=f[0]*K,D[1]+=f[1]*K,D[2]+=f[2]*K,J.fp(xo,L,z),J.fp(vl,L,D)}},handleScroll:function(X,Y){X.preventDefault();var B=this,C=B._moveStep;B.isFirstPersonMode()?B.isPannable()&&B.pan(0,Y>0?C:-C):B.isZoomable()&&B.setZoom(0>Y?1/pm:pm)},handlePinch:function(R,G){this.isZoomable()&&this.setZoom(G>R?1/qn:qn)},reset:function(){this.setCenter(h.graph3dViewCenter),this.setEye(h.graph3dViewEye),this.setUp(h.graph3dViewUp)},moveSelection:function(y,K,T){var s,r=this,g=r.dm();g&&(s=g.getHistoryManager()),s&&s.beginInteraction(),ps(this.sm().toSelection(this.isMovable,this),y,K,T),s&&s.endInteraction()},getMoveMode:function(I,W){var Z=W.s("3d.move.mode");if(Z)return Z;var q="88",s="89",S="90";return Cd(I)||wj[q]&&wj[s]&&wj[S]?"xyz":wj[q]&&wj[s]?"xy":wj[q]&&wj[S]?"xz":wj[s]&&wj[S]?"yz":wj[q]?"x":wj[s]?"y":wj[S]?"z":"xz"},handleTick:function(){var j=this,t=!1,_=j._moveStep,y=_,z=!1,k=!0,H=j._rotateStep*(k?-1:1);if(j.isWalkable()||(y=0),j.isPannable()||(_=0),j.isRotatable()||(H=0),j._32Q){var B=(um()-j._32Q)/50;y*=B,_*=B,H*=B}j._31Q&&(sp(j._31Q),delete j._31Q,delete j._32Q),fm()&&(t=!0,j.pan(-_,0,z,k)),Xr()&&(t=!0,j.pan(_,0,z,k)),rm()&&(t=!0,Cd()?j.pan(0,_,z,k):j.walk(y,z,k)),Iq()&&(t=!0,Cd()?j.pan(0,-_,z,k):j.walk(-y,z,k)),bc()&&(t=!0,j.rotate(-H,0,z,k)),Zf()&&(t=!0,j.rotate(H,0,z,k)),Xd()&&(t=!0,j.rotate(0,-H/2,z,k)),Cp()&&(t=!0,j.rotate(0,H/2,z,k)),t&&(j._32Q=um(),j._31Q=Vj(j.handleTick,j))},handleKeyDown:function(J){var e=this;!Yq(J)&&fq[J.keyCode]?e.handleTick():Ei(J)?e.selectAll():$g(J)?e.handleDelete(J):Dk(J)&&this.isResettable()&&e.reset()},checkDoubleClickOnNote:function(L,U,Q){var n=this;if(Q===nj){if(U.s("note.toggleable"))return U.s(Dl,!U.s(Dl)),n.fi({kind:"toggleNote",event:L,data:U,part:Q}),!0}else if(Q===ag&&U.s("note2.toggleable"))return U.s(Yn,!U.s(Yn)),n.fi({kind:"toggleNote2",event:L,data:U,part:Q}),!0;return!1},checkDoubleClickOnRotation:function(t,u,w){return w===Ur?(u.setRotationX(0),!0):w===Lo?(u.setRotationY(0),!0):w===mn?(u.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(r){var P=this,D=P.getWidth()/2,W=P.getHeight()/2,m=P._18Q;return m||(m=$d(P),P._18Q=Lc(m,m,Vm(P))),r=jl([r[0],r[1],r[2],1],m),{x:D+D*r[0]/r[3],y:W-W*r[1]/r[3]}},getHitPosition:function(S,J,L){var f=this,G=f.getWidth(),i=f.getHeight(),$=S.target?f.lp(S):S,j=$.x-G/2,b=$.y-i/2,N=f.getCenterInfo(),H=Vm(f);J=J?J:[0,0,0],L=L?L:[0,1,0],j=j/G*N.width,b=-1*b/i*N.height;var I=[H[0]*j,H[4]*j,H[8]*j],q=[H[1]*b,H[5]*b,H[9]*b],K=[I[0]+q[0],I[1]+q[1],I[2]+q[2]],k=f.getCenter(),d=_i(f,J,L,[K[0]+k[0],K[1]+k[1],K[2]+k[2]]);return d?d:[0,0,0]},getLineLength:function(s){this.validate();var u=this.getData3dUI(s);if(u&&u.getCache){var C=u.getCache();if(C)return C[C.length-1].length}return 0},getLineOffset:function(t,Q){this.validate();var S=this.getData3dUI(t);if(S&&S.getCache){var z=S.getCache();if(z)return hq(z,Q)}return L}});var im=gr.Interactor=function(z){this.gv=z};Rr("Interactor",b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var ug=gr.DefaultInteractor=function(_){Xc(ug,this,[_])};Rr("DefaultInteractor",im,{handle_contextmenu:function(E){ir(E)},handle_mousewheel:function(s){this.gv.handleScroll(s,s.wheelDelta/40)},handle_DOMMouseScroll:function(d){2===d.axis&&this.gv.handleScroll(d,-d.detail)},handle_keydown:function($){this.gv.handleKeyDown($)},handle_mousedown:function(H){this.handle_touchstart(H)},handle_touchstart:function(l){ir(l);var g=this,$=g.gv,I=Gg(l),y=$.getDataInfoAt(l),s=y?y.data:L,H=y?y.part:L,q=$.sm(),B=uk(l),u=mh(l);$.setFocus(l)&&(g._62O=L,g._57I=L,s?Yq(l)?q.co(s)?q.rs(s):q.as(s):q.co(s)||q.ss(s):I&&(Yq(l)?$.isRectSelectable()&&(g._62O=dq):g._57I=vo(l)),g._31Q&&(sp(g._31Q),delete g._31Q,delete g._32Q),g._62O||($.isFirstPersonMode()&&(Cd(l)||u>2?g._62O="pan":$.isMouseRoamable()||S?(g._62O="roaming",g.foward=B&&Gg(l),g._32Q=um(),g._31Q=Vj(g.tick,g)):I||(g._62O="roaming")),g._62O||(I&&B&&Wq[H]?(g._62O=H,g.p3=s.p3()):I&&B&&zk(s)&&$.isSelected(s)&&$.isMovable(s)?(g._62O="move",g.p3=s.p3(),g.movedata=s):S&&(u>2?g._62O="pan":2===u&&(g.dist=Qq(l),g._62O="pinch")))),g.point=$.lp(l),dc(g,l),_e(l)?$.handleDoubleClick(l,s,H):$.handleClick(l,s,H))},tick:function(){var a=this,y=a.gv,W=y._moveStep;a.point&&y.isWalkable()&&(a._32Q&&(W*=(um()-a._32Q)/50),y.walk(a.foward?W:-W),a._32Q=um(),a._31Q=Vj(a.tick,a))},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(g){var K=this._57I;K&&(Oh(K,vo(g))<=1&&this.gv.sm().cs(),this._57I=L)},handleWindowMouseMove:function(Y){this.handleWindowTouchMove(Y)},handleWindowTouchMove:function(x){var l,V,X=this,_=X.gv,A=X._62O,C=X.point,f=_.dm(),G=f.getHistoryManager(),r=_.lp(x),I=r.x-C.x,z=r.y-C.y,Z=-B*I/_.getWidth(),N=-B*z/_.getHeight();if("roaming"===A)X.rotate(x,Z/2,N/2);else if(A===Ur||A===Lo||A===mn)G&&!_._86O&&G.beginInteraction(),_.fi({kind:_._86O?"betweenEditRotation":"beginEditRotation",event:x}),_._86O=1,_.sm().each(function(P){if(zk(P)&&_.isRotationEditable(P)){var r=M(Z)>M(N)?Z:N;A===Ur?P.setRotationX(P.getRotationX()+r):A===Lo?P.setRotationY(P.getRotationY()+r):A===mn&&P.setRotationZ(P.getRotationZ()+r)}});else if("move"===A||Wq[A]){A===Hq||A===Ro||A===Lr?(G&&!_._87O&&G.beginInteraction(),_.fi({kind:_._87O?"betweenEditSize":"beginEditSize",event:x}),_._87O=1):(G&&!_._moving&&G.beginInteraction(),_.fi({kind:_._moving?"betweenMove":"beginMove",event:x}),_._moving=1);var H,e=X.p3,d=_.getPositionInfo(e),F=Vm(_);H=A===bm?"x":A===tp?"y":A===Tj?"z":A===Hq?"sx":A===Ro?"sy":A===Lr?"sz":_.getMoveMode(x,X.movedata),I=I/_.getWidth()*d.width,z=-1*z/_.getHeight()*d.height;var Q,y,q=[F[0]*I,F[4]*I,F[8]*I],w=[F[1]*z,F[5]*z,F[9]*z],U=q[0]+w[0],s=q[1]+w[1],S=q[2]+w[2],t=[e[0]+U,e[1]+s,e[2]+S],J=Jo(_.getEye(),t,!0);if("xyz"===H?(Q=t,_.moveSelection(U,s,S)):"xz"===H?(Q=_i(_,e,[0,1,0],t),Q&&_.moveSelection(Q[0]-e[0],0,Q[2]-e[2])):"xy"===H?(Q=_i(_,e,[0,0,1],t),Q&&_.moveSelection(Q[0]-e[0],Q[1]-e[1],0)):"yz"===H?(Q=_i(_,e,[1,0,0],t),Q&&_.moveSelection(0,Q[1]-e[1],Q[2]-e[2])):"x"===H||"sx"===H?(J[0]=0,Q=_i(_,e,J,t),Q&&(y=Q[0]-e[0],"x"===H?_.moveSelection(y,0,0):_.sm().each(function(J){zk(J)&&_.isSizeEditable(J)&&(l=K(Ni,J.getWidth()+y),V=l/J.getWidth(),J.setWidth(l),Cd(x)&&(J.setHeight(J.getHeight()*V),J.setTall(J.getTall()*V)))}))):"y"===H||"sy"===H?(J[1]=0,Q=_i(_,e,J,t),Q&&(y=Q[1]-e[1],"y"===H?_.moveSelection(0,y,0):_.sm().each(function(u){zk(u)&&_.isSizeEditable(u)&&(l=K(Ni,u.getTall()+y),V=l/u.getTall(),u.setTall(l),Cd(x)&&(u.setHeight(u.getHeight()*V),u.setWidth(u.getWidth()*V)))}))):("z"===H||"sz"===H)&&(J[2]=0,Q=_i(_,e,J,t),Q&&(y=Q[2]-e[2],"z"===H?_.moveSelection(0,0,y):_.sm().each(function(h){zk(h)&&_.isSizeEditable(h)&&(l=K(Ni,h.getHeight()+y),V=l/h.getHeight(),h.setHeight(l),Cd(x)&&(h.setTall(h.getTall()*V),h.setWidth(h.getWidth()*V)))}))),!Q)return;X.p3=Q}else if(A===dq){var E=X.div;E||(E=X.div=lo(),Dg(X.getView(),E),E.op=C,E.style.background=_.getRectSelectBackground()),_.fi({kind:_._rectSelecting?"betweenRectSelect":"beginRectSelect",event:x}),_._rectSelecting=1,E.rect=Aj(E.op,r),kl(E,E.rect)}else if("pinch"===A&&2===mh(x)){_.fi({kind:_._pinching?"betweenPinch":"beginPinch",event:x}),_._pinching=1;var y=Qq(x);_.handlePinch(y,X.dist),X.dist=y}else"pan"===A||Cd(x)?X.pan(x,I,z):_.isFirstPersonMode()||(Gg(x)?X.rotate(x,Z,N):(X.pan(x,I,0),_.isWalkable()&&(_.fi({kind:_._walking?"betweenWalk":"beginWalk",event:x}),_._walking=1,_.walk(z/_.getHeight()*_.getCenterInfo().height))));X.point=r},pan:function(M,g,T){var c=this.gv;if(c.isPannable()){var n=c.getCenterInfo(),F=g/c.getWidth()*n.width,N=-1*T/c.getHeight()*n.height;c.fi({kind:c._panning?"betweenPan":"beginPan",event:M}),c._panning=1,c.pan(-F,-N)}},rotate:function(k,O,x){var g=this.gv;g.isRotatable()&&(g.fi({kind:g._rotating?"betweenRotate":"beginRotate",event:k}),g._rotating=1,g.rotate(O,x))},handleWindowMouseUp:function(q){this.handleWindowTouchEnd(q)},handleWindowTouchEnd:function(l){var E=this,m=E.gv,v=m.dm(),x=v.getHistoryManager(),W=E.div;if(W){var D=m.getDatasInRect(W.rect);if(!D.isEmpty()){var H=m.sm(),Z=H.toSelection();D.each(function(n){H.co(n)?Z.remove(n):Z.add(n)}),H.ss(Z)}db(W)}m._moving&&(delete m._moving,m.fi({kind:"endMove",event:l}),m.onMoveEnded(),x&&x.endInteraction()),m._panning&&(delete m._panning,m.fi({kind:"endPan",event:l}),m.onPanEnded()),m._rotating&&(delete m._rotating,m.fi({kind:"endRotate",event:l}),m.onRotateEnded()),m._86O&&(delete m._86O,m.fi({kind:"endEditRotation",event:l}),x&&x.endInteraction()),m._87O&&(delete m._87O,m.fi({kind:"endEditSize",event:l}),x&&x.endInteraction()),m._pinching&&(delete m._pinching,m.fi({kind:"endPinch",event:l}),m.onPinchEnded()),m._rectSelecting&&(delete m._rectSelecting,m.fi({kind:"endRectSelect",event:l}),m.onRectSelectEnded()),m._walking&&(delete m._walking,m.fi({kind:"endWalk",event:l}),m.onWalkEnded()),E.dist=E.point=E._62O=E.p3=E.movedata=E.div=E._57I=E._32Q=E._31Q=E.foward=L}});var kk=function(E){this.gv=E};jf(kk,b,{_iv:!0,iv:function(){this._iv=!0},face:function(g,b){var C=this,i=C.gv.getGL();if(!i||!zk(g))return L;var q=b.x,G=b.width,e=b.height,O=C.height-b.y-e,x=F(G/2),s=new Uint8Array(4*G*e),K=0;for(C.iv(),C.validate(g),Kf(i,C.frame),i.readPixels(q,O,G,e,i.RGBA,i.UNSIGNED_BYTE,s),Kf(i,L),C.iv();x>=K;K++)for(var E=x-K,U=x+K,r=E;U>=r;r++)for(var I=E;U>=I;I++)if(r===E||r===U||I===E||I===U){var A=Tg.m[s[4*(r*G+I)]];if(A)return A}},get:function(s,d){this.validate();var n=this,p=n.gv.getGL();if(!p)return L;var f,V,l=s.x,E=s.width,r=s.height,P=n.height-s.y-r,z=F(E/2),y=new Uint8Array(4*E*r),H=0,j=y.length,I=d?L:new Ml,X=d?L:{};if(Kf(p,n.frame),p.readPixels(l,P,E,r,p.RGBA,p.UNSIGNED_BYTE,y),Kf(p,L),d){for(;z>=H;H++)for(var h=z-H,w=z+H,i=h;w>=i;i++)for(var b=h;w>=b;b++)if((i===h||i===w||b===h||b===w)&&(f=n.info(y,4*(i*E+b))))return f}else for(;j>H;H+=4)f=n.info(y,H),f&&(V=f.data,X[V._id]||(I.add(V),X[V._id]=V));return I},info:function(M,O){return this.colorMap[(M[O]<<24)+(M[O+1]<<16)+(M[O+2]<<8)+M[O+3]]},validate:function(Z){var u=this,s=u.gv,y=s.getGL();if(y){var K=s.getWidth(),O=s.getHeight(),i=y.RGBA,$=y.TEXTURE_2D,P=y.RENDERBUFFER,d=y.FRAMEBUFFER;u.texture||(u.texture=mb(y),u.render=y.createRenderbuffer(),u.frame=y.createFramebuffer()),(u.width!==K||u.height!==O)&&(Sp(y,u.texture),y.texImage2D($,0,i,K,O,0,i,y.UNSIGNED_BYTE,L),Nk(y,y.TEXTURE_MIN_FILTER,y.LINEAR),y.bindRenderbuffer(P,u.render),y.renderbufferStorage(P,y.DEPTH_COMPONENT16,K,O),Kf(y,u.frame),y.framebufferTexture2D(d,y.COLOR_ATTACHMENT0,$,u.texture,0),y.framebufferRenderbuffer(d,y.DEPTH_ATTACHMENT,P,u.render),Sp(y,L),y.bindRenderbuffer(P,L),Kf(y,L),u.width=K,u.height=O),u._iv&&(u._iv=!1,Kf(y,u.frame),s._42(Z||(u.colorMap={}),1),Kf(y,L))}}});var Jb=function(I){this.gv=I};jf(Jb,b,{gap:0,size:0,_42:function(l,u){var E=this,W=E.gv,U=W._gridGap,S=W._gridSize;if(W._gridVisible){if(E.gap!==U||E.size!==S){for(var I=[],G=W._gridSize/2,b=U*G,D=0;2*G+1>D;D++){var k=6*D,J=6*(2*G+1)+k;I[k]=-b,I[k+1]=0,I[k+2]=-b+D*U,I[k+3]=b,I[k+4]=0,I[k+5]=-b+D*U,I[J]=-b+D*U,I[J+1]=0,I[J+2]=-b,I[J+3]=-b+D*U,I[J+4]=0,I[J+5]=b}E.vs=new Kq(I),E.gap=U,E.size=S}hm(W),Wb(l,u),Oo(l,u,1,W._gridColor,W._buffer.vs,E.vs),Se(l,0,E.vs.length/3,l.LINES),Pc(l,u)}else E.vs=E.gap=E.size=L}});var xi=function(S){this.gv=S};jf(xi,b,{_42:function(G,a){var W=this.gv,o=W._buffer.vs,O=W._axisXColor,B=W._axisYColor,g=W._axisZColor,k=W._originAxisVisible,w=W._centerAxisVisible;if(k||w){var p=I?G.TRIANGLES:G.TRIANGLE_FAN,n=G.LINES;if(hm(W),Wb(G,a),k){var t=W.getCenterInfo(),z=C(t.width,t.height)/5,e=.8*z,K=.05*z;Oo(G,a,1.5,O,o,new Kq([0,0,0,z,0,0,e,K,0,e,0,K,e,-K,0,e,0,-K,e,K,0,0,0,0,0,z,0,K,e,0,0,e,K,-K,e,0,0,e,-K,K,e,0,0,0,0,0,0,z,K,0,e,0,K,e,-K,0,e,0,-K,e,K,0,e])),Se(G,0,2,n),Se(G,1,6,p),Oo(G,a,L,B),Se(G,7,2,n),Se(G,8,6,p),Oo(G,a,L,g),Se(G,14,2,n),Se(G,15,6,p)}if(w){var l=W._center,Q=l[0],_=l[1],Z=l[2],t=W.getPositionInfo(l);z=C(t.width,t.height)/20,Oo(G,a,1.5,O,o,new Kq([Q,_,Z,Q+z,_,Z,Q,_,Z,Q,_+z,Z,Q,_,Z,Q,_,Z+z])),Se(G,0,2,n),Oo(G,a,L,B),Se(G,2,2,n),Oo(G,a,L,g),Se(G,4,2,n)}Pc(G,a)}}});var ms=function(B){this.gv=B},bm="edit_tx",tp="edit_ty",Tj="edit_tz",Ur="edit_rx",Lo="edit_ry",mn="edit_rz",Hq="edit_sx",Ro="edit_sy",Lr="edit_sz",Wq={};Wq[bm]=1,Wq[tp]=1,Wq[Tj]=1,Wq[Ur]=1,Wq[Lo]=1,Wq[mn]=1,Wq[Hq]=1,Wq[Ro]=1,Wq[Lr]=1,jf(ms,b,{_42:function(u,d,m){var M=this,j=M.gv,t=j.sm().ld();if(j.isEditable(t)&&zk(t)&&(!j.isFirstPersonMode()||!j.isMouseRoamable()&&!S)){hm(j);var E,o,X=j.isMovable(t),p=j.isRotationEditable(t),K=j.isSizeEditable(t),g=j._axisXColor,I=j._axisYColor,B=j._axisZColor,n=j._editSizeColor,e=j.getCenterInfo(),h=C(e.width,e.height)/10,Y=h/(m?5:10),z=.7*h,c=.4*z,N=t.p3(),i=N[0],G=N[1],r=N[2];E=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],X&&M._17O(u,d,t,m,bm,g,E,[i,G-Y,r,i+z,G-Y,r,i+z,G,r,i+z,G,r,i,G,r,i,G-Y,r,i,G-Y,r+Y,i+z,G-Y,r+Y,i+z,G-Y,r,i+z,G-Y,r,i,G-Y,r,i,G-Y,r+Y]),o=i+z,K&&M._17O(u,d,t,m,Hq,n,E,[o,G-Y,r,o+c,G-Y,r,o+c,G,r,o+c,G,r,o,G,r,o,G-Y,r,o,G-Y,r+Y,o+c,G-Y,r+Y,o+c,G-Y,r,o+c,G-Y,r,o,G-Y,r,o,G-Y,r+Y]),o+=c,p&&M._17O(u,d,t,m,Ur,g,E,[o,G-Y,r,o+c,G-Y,r,o+c,G,r,o+c,G,r,o,G,r,o,G-Y,r,o,G-Y,r+Y,o+c,G-Y,r+Y,o+c,G-Y,r,o+c,G-Y,r,o,G-Y,r,o,G-Y,r+Y]),E=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],X&&M._17O(u,d,t,m,tp,I,E,[i,G,r,i,G+z,r,i-Y,G+z,r,i-Y,G+z,r,i-Y,G,r,i,G,r,i,G,r,i,G,r-Y,i,G+z,r-Y,i,G+z,r-Y,i,G+z,r,i,G,r]),o=G+z,K&&M._17O(u,d,t,m,Ro,n,E,[i,o,r,i,o+c,r,i-Y,o+c,r,i-Y,o+c,r,i-Y,o,r,i,o,r,i,o,r,i,o,r-Y,i,o+c,r-Y,i,o+c,r-Y,i,o+c,r,i,o,r]),o+=c,p&&M._17O(u,d,t,m,Lo,I,E,[i,o,r,i,o+c,r,i-Y,o+c,r,i-Y,o+c,r,i-Y,o,r,i,o,r,i,o,r,i,o,r-Y,i,o+c,r-Y,i,o+c,r-Y,i,o+c,r,i,o,r]),E=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],X&&M._17O(u,d,t,m,Tj,B,E,[i,G,r,i,G,r+z,i,G-Y,r+z,i,G-Y,r+z,i,G-Y,r,i,G,r,i,G-Y,r,i-Y,G-Y,r,i-Y,G-Y,r+z,i-Y,G-Y,r+z,i,G-Y,r+z,i,G-Y,r]),o=r+z,K&&M._17O(u,d,t,m,Lr,n,E,[i,G,o,i,G,o+c,i,G-Y,o+c,i,G-Y,o+c,i,G-Y,o,i,G,o,i,G-Y,o,i-Y,G-Y,o,i-Y,G-Y,o+c,i-Y,G-Y,o+c,i,G-Y,o+c,i,G-Y,o]),o+=c,p&&M._17O(u,d,t,m,mn,B,E,[i,G,o,i,G,o+c,i,G-Y,o+c,i,G-Y,o+c,i,G-Y,o,i,G,o,i,G-Y,o,i-Y,G-Y,o,i-Y,G-Y,o+c,i-Y,G-Y,o+c,i,G-Y,o+c,i,G-Y,o])}},_17O:function(E,$,f,U,z,d,V,l){var P=this.gv._buffer;aj(E,$,U,!0,f,z),An(E,$,L,!0,L,!0,L,!1),Wp(E,$.uDiffuse,d),Jj(E,P.vs,new Kq(l),$.aPosition),Jj(E,P.ns,new Kq(V),$.aNormal),Se(E,0,12),xp(E,$)}});var _m=function(G,B){this.gv=G,this.s=function(j,w,K){return w==L&&(w=K),w==L?B.getStyle(j):Ek(w,B,G)},this.data=B};jf(_m,b,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(G,z,x,R){var W,w,Q,e,O,r,D,T=this,E=T.gv,U=T.data,o=U._id,j=T.s("batch"),y=E._34O,C=E._33O,f=E.isSelectable(U),Y=E.getBrightness(U),B=Y!=L&&1!==Y;if(T._iv){if(Q=ip(y,C,U,j),T.validate(Q,j?hr[j]||ko:L),Q&&(e=y[o],O=e.size=Q.vs.length/3-e.begin,D=Q.rs))for(Y=B?Y:1,r=0;O>r;r++)D.push(Y);if(zk(U)){var a=E.getWireframe(U);a&&Ib(E,U,a)}T.labelInfo=T.label2Info=T.noteInfo=T.note2Info=T._38o=L,T._24O(jk,"getLabel"),T._24O(ab,"getLabel2"),T._26O(nj,"getNote"),T._26O(ag,"getNote2"),T._15O(),T._iv=!1}B&&Wp(G,z.uBrightness,Y),w=aj(G,z,x,f,U,Qh),w&&(Fb(w,y[o],C),Fb(w,E._polylineIndexMap[o],E._polylineModelMap),Fb(w,E._wireframeIndexMap[o],E._wireframeModelMap)),y[o]||T._80o(G,z,R),(W=T.labelInfo)&&(aj(G,z,x,f,U,jk),T._28O(W,jk,R)),(W=T.label2Info)&&(aj(G,z,x,f,U,ab),T._28O(W,ab,R)),(W=T.noteInfo)&&(aj(G,z,x,f,U,nj),T._29O(W,nj,R)),(W=T.note2Info)&&(aj(G,z,x,f,U,ag),T._29O(W,ag,R)),(W=T._38o)&&T._99O(G,z,W,x,f,R),B&&Wp(G,z.uBrightness,1)},validate:function(){},_16O:function(){return $h},_80o:function(){},dispose:function(){},getBodyColor:function(n){var Y=this.data,r=this.gv.getBodyColor(Y);return r?r:n?Y.getStyle(n):L},_24O:function(w,p){var s=this,A=s.data,d=s.gv,S=s.s,i=d[p](A);if(i!=L){var C=S(w+".scale"),f=S(w+".max"),c=s[w+"Info"]={label:i,textureScale:S(w+".texture.scale"),color:d[p+"Color"](A),font:S(w+".font"),align:S(w+".align"),background:d[p+"Background"](A)},P=c.rect=Wo(c,i);f>0&&f<P.width&&(c.labelWidth=P.width,P.width=f),P.x=P.y=0,P.width*=C,P.height*=C,c.mat=s._16O(S(w+".autorotate"),S(w+".position"),P,S(w+".face"),S(w+".t3"),S(w+".r3"),S(w+".rotationMode"));var Y=P.width/2,V=P.height/2;c.vs=new Kq([-Y,V,0,-Y,-V,0,Y,-V,0,Y,V,0]),P.width/=C,P.height/=C}},_26O:function(M,V){var f=this,q=f.data,H=f.gv,T=f.s,B=H[V](q);if(B!=L){var b=T(M+".scale"),n=this[M+"Info"]={note:B,textureScale:T(M+".texture.scale"),expanded:T(M+".expanded"),font:T(M+".font"),color:T(M+".color"),align:T(M+".align"),borderWidth:T(M+".border.width"),borderColor:T(M+".border.color"),background:H[V+"Background"](q)};if(n.expanded){var x=T(M+".max"),p=Wo(n,B);p.width+=6,p.height+=2,x>0&&x<p.width&&(n.labelWidth=p.width,p.width=x);var z={x:-p.width/2,y:-8-p.height,width:p.width,height:p.height+8}}else z={x:-6,y:-18,width:12,height:18};n.mat=f._16O(T(M+".autorotate"),T(M+".position"),L,T(M+".face"),T(M+".t3"),T(M+".r3"),T(M+".rotationMode")),n.rect=z,1!==b&&(z=nb(z),z.x*=b,z.height*=b,z.y=-z.height,z.width*=b);var v=z.x,K=z.y,E=z.width,Z=z.height;n.vs=new Kq([v,-K,0,v,-K-Z,0,v+E,-K-Z,0,v+E,-K,0])}},_28O:function(M,h,F){if(F(this.s(h+".transparent"))){var a=M.rect,$=M.textureScale,e=a.width*$,H=a.height*$;if(e>=1&&H>=1){var u=_k(e,H);1!==$&&(u.translate(u,a.x,a.y),u.scale($,$),u.translate(u,-a.x,-a.y)),_b(u,M),u.restore(),wl(this,h,M.mat,M.vs,!0)}}},_29O:function(T,n,u){if(u(this.s(n+".transparent"))){var U=T.rect,z=T.textureScale,L=U.x,H=U.y,O=U.width*z,i=U.height*z;if(O>=1&&i>=1){U.x=U.y=0;var e=_k(O,i);1!==z&&e.scale(z,z),rh(e,T),e.restore(),U.x=L,U.y=H,wl(this,n,T.mat,T.vs,!1)}}},_99O:function(u,w,t,N,q,I){if(t){var O=this,i=O.gv,H=O.data,B=i._buffer,K=i._1O,W=t.icons;for(var x in W){var f=W[x],c=t.rects[x];if(c&&I(Ek(f.transparent,H,i))){aj(u,w,N,q,H,x);var o=Ek(f.shape3d,H,i),Y=o?[o]:Ek(f.names,H,i),U=Y?Y.length:0,G=Ek(f.textureScale,H,i)||1,h=Ek(f.light,H,i);h==L&&(h=o?!0:!1),An(u,w,Ek(f.blend,H,i),h,Ek(f.opacity,H,i),Ek(f.reverseFlip,H,i),Ek(f.reverseColor,H,i),Ek(f.reverseCull,H,i));for(var S=0;U>S;S++){var n=Y[S],j=c[S];if(lq(O,j.mat),o)Je(i,H,Jn(O.s,o),O.s);else{var Q=tm(n);if(Q){var A=j.width*G,s=j.height*G;if(A>=1&&s>=1){var J=_k(A,s);rj(J,Q,Ek(f.stretch,H,i),0,0,A,s,H,i),J.restore(),mb(u,If,K),be(u,w,K,Ek(f.discardSelectable,H,i),B.uv,Qp),Jj(u,B.vs,j.vs,w.aPosition),Jj(u,B.ns,Hi,w.aNormal),$n(u,B.is,nk),Wj(u,0,nk.length),hb(u,w,K)}}}sj(i)}xp(u,w)}}}}});var Co=function(s,C){Xc(Co,this,[s,C])};jf(Co,_m,{_16O:function(n,O,l,T,j,N,f,x,s){var e=this.data,o=no(O,e.s3(),l,T,x,s);return Qm(il(),o,e.p3(),T,j,N,f,n,e.r3(),e.getRotationMode())},clear:function(){var l=this;l.faceMat=l.mat=l.shapeModel=l.left=l.right=l.front=l.back=l.top=l.bottom=l.csg=L},validate:function(q,n){var o=this,y=o.gv,x=o.data,i=Jn(o.s),W=hn(x,y.getMat(x),i?o.s("shape3d.scaleable"):!0);if(o.clear(),q){var P=[];i?qk(y,x,i,o.s,o.getBodyColor(),[W],q,P):(ig(y,x,q,n,W,X,P,Kh),ig(y,x,q,n,W,a,P,vq),ig(y,x,q,n,W,Oq,P,vd),ig(y,x,q,n,W,vm,P,Ar),ig(y,x,q,n,W,Z,P,yb),ig(y,x,q,n,W,V,P,qf)),P.length&&(Bk(q.vs,P),Bk(q.ns,ri(P)))}else o.mat=W,(o.shapeModel=i)||(o.vf(X),o.vf(a),o.vf(Z),o.vf(V),o.vf(Oq),o.vf(vm))},vf:function(V){var _=this;if(_.gv.getFaceVisible(_.data,V)){var r=cc(_,V);return r.mat&&(_.faceMat=!0),r}},_80o:function(G,p,r){var t=this,S=t.gv,Y=t.data,j=S._cube,A=t.shapeModel;hm(S,t.mat),A?Je(S,Y,A,t.s,t.getBodyColor(),r):(Jj(G,j.vs,L,p.aPosition),Jj(G,j.ns,L,p.aNormal),$n(G,j.is),t._18O(G,p,t.left,0,r),t._18O(G,p,t.front,6,r),t._18O(G,p,t.right,12,r),t._18O(G,p,t.back,18,r),t._18O(G,p,t.top,24,r),t._18O(G,p,t.bottom,30,r)),sj(S),t.faceMat&&(t._18O(G,p,t.left,0,r,!0),t._18O(G,p,t.front,6,r,!0),t._18O(G,p,t.right,12,r,!0),t._18O(G,p,t.back,18,r,!0),t._18O(G,p,t.top,24,r,!0),t._18O(G,p,t.bottom,30,r,!0))},_18O:function(x,V,h,M,A,q){if(h){if(!A(h.transparent))return;if(q&&!h.mat||!q&&h.mat)return;q&&hm(this.gv,h.mat);var l=this,t=l.data,y=l.gv,H=y.getTexture(h.texture,t),j=h.uv,W=h.uvScale,O=h.uvOffset,u=h.discardSelectable;if(H)if(j){for(var b=8*(M/6),k=0;8>k;k++)dm[b+k]=j[k];be(x,V,H,u,y._buffer.uv,dm,O,W)}else be(x,V,H,u,y._cube.uv,L,O,W);An(x,V,h.blend,h.light,h.opacity,h.reverseFlip,h.reverseColor,h.reverseCull),Wp(x,V.uDiffuse,h.color),Wj(x,M,6),xp(x,V),hb(x,V,H),q&&sj(y)}}});var pd=function(Q,u){Xc(pd,this,[Q,u])};jf(pd,_m,{_25Q:1,validate:function(M){var r=this,q=r.gv,j=r.data,$=r.s,k=$("edge.width"),t=j._40I,o=j._41I;if(r.shapeModel=r.info=L,t&&o){var i,Y,y,D,p,g,A,d,U,T,H=j.isLooped(),V=$(Xh),E=h.getEdgeType(V);if(E){var _=E(j,jc(r,q,j,H,V),q,r._19Q);if(!_.points||_.points.isEmpty())return;g=r.info={},A=_.segments,p=_.points,d=p.size();for(var s=t.getElevation(),X=o.getElevation(),n=0;d>n;n++){var Q=p.get(n);Q.e==L&&(Q.e=s+(X-s)*n/(d-1))}U=bs(p.get(0)),T=bs(p.get(d-1));var m=d%2;0===m?(g.c1=bs(p.get(d/2-1)),g.c2=bs(p.get(d/2))):g.p3=bs(p.get((d-m)/2)),g.s1=U,g.s2=bs(p.get(1)),g.t1=bs(p.get(d-2)),g.t2=T}else{p=new Ml,g=r.info={};var J=$("edge.offset"),v=$("edge.center"),B=$("edge.source.t3"),R=$("edge.target.t3"),z=t.p3(),F=o.p3();if(B&&(z[0]+=B[0],z[1]+=B[1],z[2]+=B[2]),R&&(F[0]+=R[0],F[1]+=R[1],F[2]+=R[2]),V===Yk){A=$("edge.segments");var l=g.points=$(ij)||rk;if(d=l.size()){U=bs(l.get(0)),T=bs(l.get(d-1)),!v&&J&&(y=Jo(U,z,!0),J=C(J,Oh(z,U)),z=[z[0]+y[0]*J,z[1]+y[1]*J,z[2]+y[2]*J],y=Jo(F,T,!0),J=C(J,Oh(T,F)),F=[F[0]-y[0]*J,F[1]-y[1]*J,F[2]-y[2]*J]);var m=d%2;0===m?(i=bs(l.get(d/2-1)),Y=bs(l.get(d/2))):g.p3=bs(l.get((d-m)/2)),g.s1=z,g.s2=U,g.t1=T,g.t2=F}else!v&&J&&(y=Jo(F,z,!0),D=Oh(z,F),J=Tk(J,D),z=[z[0]+y[0]*J,z[1]+y[1]*J,z[2]+y[2]*J],F=[F[0]-y[0]*J,F[1]-y[1]*J,F[2]-y[2]*J]),i=z,Y=F;p.add({x:z[0],y:z[2],e:z[1]}),p.addAll(l),p.add({x:F[0],y:F[2],e:F[1]})}else{var w=jc(r,q,j,H,V);if(r._19Q||(w=-w),H){var G=z[0],N=z[1],K=z[2],e=t.getTall()/2+w;i=[G-w,N+e,K],Y=[G+w,N+e,K],p.add({x:G-w,y:K,e:N}),p.add({x:G-w,y:K,e:N+e}),p.add({x:G+w,y:K,e:N+e}),p.add({x:G+w,y:K,e:N})}else{y=Jo(F,z,!0),D=Oh(z,F);var S={x:z[0],y:z[2]},b={x:F[0],y:F[2]},u=al(L,S,b,w),P=u.x-S.x,I=u.y-S.y;J=Tk(J,D),y[0]*=J,y[1]*=J,y[2]*=J,i=[z[0]+y[0]+P,z[1]+y[1],z[2]+y[2]+I],Y=[F[0]-y[0]+P,F[1]-y[1],F[2]-y[2]+I],v?(p.add({x:z[0],y:z[2],e:z[1]}),p.add({x:i[0],y:i[2],e:i[1]}),p.add({x:Y[0],y:Y[2],e:Y[1]}),p.add({x:F[0],y:F[2],e:F[1]})):(p.add({x:i[0],y:i[2],e:i[1]}),p.add({x:Y[0],y:Y[2],e:Y[1]}))}}g.c1=i,g.c2=Y}g.list=$(Ed)===vj?r.createTubeModel(p,A,k/2,M):r.createLineModel(p,A,k,"edge","edge.dash")}}});var gd=function(w,s){Xc(gd,this,[w,s])};jf(gd,Co,{_80o:function(j,M,h){var f=this,w=f.gv,d=f.shapeModel;hm(w,f.mat),d?Je(w,f.data,d,f.s,f.getBodyColor(),h):(df(f,j,M,f.left,h),df(f,j,M,f.front,h),df(f,j,M,f.right,h),df(f,j,M,f.back,h),df(f,j,M,f.top,h),df(f,j,M,f.bottom,h)),sj(w)},validate:function(m,J){var y,b,h=this,q=h.s,l=h.data,D=l.p3(),C=l._thickness/2,E=l.isClosePath(),R=l.getPoints(),T=l.getSegments(),P=q(pf),i=m&&m.uv;if(h.clear(),0>C)b=h.shapeModel=cn(R,T,q(Mf),q(uq),P,q(Vq),l.getTall(),l.getElevation(),E),q(Er)?q("shape3d.image")||delete b.uv:(delete b.vs,delete b.ns,delete b.uv),q("shape3d.top.image")||delete b.top_uv,q("shape3d.bottom.image")||delete b.bottom_uv;else if(q(Ed)===vj)y=ph(R,T,P,E),b=h.shapeModel={vs:[]},q("shape3d.image")&&(b.uv=[],b.sum=q(Vq)||cg(y)||1,b.len=0),q(Mf)&&!E&&(b.top_vs=[],q("shape3d.top.image")&&(b.top_uv=[])),q(uq)&&!E&&(b.bottom_vs=[],q("shape3d.bottom.image")&&(b.bottom_uv=[])),h._12O(y,C);else{var j,B,F,k,u,g,c,p,z,M;y=ph(R,T,P,E),u=h.vf(Z,i,!1,J),C&&(g=h.vf(V,i,!1,J),c=E?L:h.vf(X,i,!1,J),p=E?L:h.vf(a,i,!1,J),z=h.vf(Oq,i,!1,J),M=h.vf(vm,i,!1,J)),C?h._12O(y,C):u&&y.forEach(function(S){if(k=S.length,k>0)for(j=S[0],F=1;k>F;F++)B=S[F],h.addV(u.vs,j,B),j=B}),h._20Q(y),m||(u&&(u.ns=ri(u.vs),ss(u,"vs"),ss(u,km)),C&&(g&&(g.ns=ri(g.vs),ss(g,"vs"),ss(g,km)),c&&(c.ns=ri(c.vs),ss(c,"vs"),ss(c,km)),p&&(p.ns=ri(p.vs),ss(p,"vs"),ss(p,km)),z&&(z.ns=ri(z.vs),ss(z,"vs"),ss(z,km)),M&&(M.ns=ri(M.vs),ss(M,"vs"),ss(M,km))))}var f=h.mat=il();Fr(f,D),Or(f,l.r3(),l.getRotationMode()),Fr(f,ze(D)),m&&(ks(h,f,m,b),h.clear())},_20Q:function(c){var J,g,r,d,H,z,U,j=this,m=j.front,a=j.back,l=j.top,X=j.bottom,h=m?m.tuv:L,u=a?a.tuv:L,T=l?l.tuv:L,s=X?X.tuv:L,n=0;(h||u||T||s)&&(J=j.s(Vq)||cg(c)||1,c.forEach(function(b){if(g=b.length,g>0)for(z=b[0],r=1;g>r;r++)U=b[r],d=n/J,n+=Oh(z,U),H=n/J,j._14O(m,d,H),j._14O(a,1-H,1-d),j._14O(l,d,H),j._14O(X,d,H),z=U}))},_14O:function(V,t,g){if(V){var q=V.uv,d=V.tuv;if(d){if(q)var Z=q[0]+(q[6]-q[0])*t,m=q[1]+(q[7]-q[1])*t,C=q[2]+(q[4]-q[2])*t,I=q[3]+(q[5]-q[3])*t,x=q[2]+(q[4]-q[2])*g,F=q[3]+(q[5]-q[3])*g,B=q[0]+(q[6]-q[0])*g,S=q[1]+(q[7]-q[1])*g;else Z=t,m=0,C=t,I=1,x=g,F=1,B=g,S=0;d.push(C,I,x,F,B,S,B,S,Z,m,C,I)}}},_13O:function(v){var c=v.uv,N=v.tuv;N&&(c?N.push(c[2],c[3],c[4],c[5],c[6],c[7],c[6],c[7],c[0],c[1],c[2],c[3]):N.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(b,P){var S,r,I,x,F,y=this;b.forEach(function(E){if(F=E.length,F>0)for(S={p:E[0],n:!0},x=1;F>x;x++)r=E[x],I=F-1>x?E[x+1]:L,y.addPoint(S,r,I,P,E)})},addPoint:function(X,z,F,K,A){var v,n,e,Q,y,Y,a,p,G,N=this,H=X.p,P=X.f,r=X.b,O=N.s("shape3d.side")||_g,D=N.s("shape3d.start.angle"),V=N.shapeModel,j=N.data.isClosePath();if(X.n&&(X.n=!1,P=j&&A.length>2?al(A[A.length-2],H,z,K):al(L,H,z,K),r=fg(H,P),V?V.top_vs&&N._10O(r,P,O,D,V.top_vs,V.top_uv):(v=N.left)&&(N.addV(v.vs,r,P),N._13O(v))),n=F?al(H,z,F,K):j&&A.length>2?al(H,z,A[1],K):al(H,z,L,K),e=fg(z,n),V){var T,I,_=V.vs,m=V.uv,s=V.sum;for(m&&(T=V.len/s,V.len+=Oh(H,z),I=V.len/s),Y=N._9O(r,P,O,D),a=N._9O(e,n,O,D),p=0;O>p;p++)G=p+1,Bk(_,Y[G]),Bk(_,a[p]),Bk(_,Y[p]),Bk(_,a[p]),Bk(_,Y[G]),Bk(_,a[G]),m&&(Q=p/O,y=G/O,m.push(T,y,I,Q,T,Q,I,Q,T,y,I,y));!F&&V.bottom_vs&&N._10O(e,n,O,D,V.bottom_vs,V.bottom_uv,!0)}else!F&&(v=N.right)&&(N.addV(v.vs,n,e),N._13O(v)),(v=N.front)&&N.addV(v.vs,P,n),(v=N.back)&&N.addV(v.vs,e,r),(v=N.top)&&N.addH(v.vs,P,n,e,r,!0),(v=N.bottom)&&N.addH(v.vs,r,e,n,P);X.p=z,X.f=n,X.b=e},_10O:function(M,w,o,L,c,G,Q){var i,O,u=this,Z=u.data,t=u._9O(M,w,o,L),h=(M.x+w.x)/2,l=(M.y+w.y)/2,E=Z.getElevation(),g=0;for(g=0;o>g;g++)Q?(Bk(c,t[g]),Bk(c,t[g+1])):(Bk(c,t[g+1]),Bk(c,t[g])),Bk(c,[h,E,l]),G&&(Q?(i=B*(g+1)/o+L,O=B*g/o+L):(i=B*g/o+L,O=B*(g+1)/o+L),G.push(.5-.5*e(O),.5-.5*x(O),.5-.5*e(i),.5-.5*x(i),.5,.5))},_9O:function(M,N,a,$){for(var v,f,o=this,F=o.data,i=[],R=(M.x+N.x)/2,I=(M.y+N.y)/2,X=F.getTall()/2,m=F.getElevation(),P=0;a>=P;P++)v=B*P/a+$,f=e(v),i.push([R+(M.x-R)*f,m+X*x(v),I+(M.y-I)*f]);return i},addV:function($,e,z){var X=e.x,a=e.y,E=z.x,x=z.y,F=this.data,o=F.getElevation(),f=F.getTall()/2;$.push(X,o-f,a,E,o-f,x,E,o+f,x,E,o+f,x,X,o+f,a,X,o-f,a)},addH:function(P,S,k,C,W,A){var s=this.data,K=s.getTall()/2,d=s.getElevation()+(A?K:-K);P.push(S.x,d,S.y,k.x,d,k.y,C.x,d,C.y,C.x,d,C.y,W.x,d,W.y,S.x,d,S.y)},vf:function(V,v,W,Q){var l,K=this,e=K.gv.getFaceVisible(K.data,V);return(W||e)&&(l=cc(K,V,Q),l.vs=[],l.tuv=e&&(l.texture||v)?[]:L,l.visible=e),l}});var hk=function(W,C){Xc(hk,this,[W,C])};jf(hk,_m,{_25Q:1,validate:function(H){var p=this,D=p.data,Q=p.s,r=D.getPoints(),b=r.size();if(p.shapeModel=p.info=L,b>1){var E=p.info={},$=D.getSegments(),O=D.getThickness(),g=bs(r.get(0)),x=bs(r.get(b-1)),l=b%2;0===l?(E.c1=bs(r.get(b/2-1)),E.c2=bs(r.get(b/2))):E.p3=bs(r.get((b-l)/2)),E.s1=g,E.s2=bs(r.get(1)),E.t1=bs(r.get(b-2)),E.t2=x,E.list=Q(Ed)===vj?p.createTubeModel(r,$,O/2,H):p.createLineModel(r,$,O,"shape.border","shape.dash")}}}),tl(h,{accordionViewExpandIcon:Yo(Rp),accordionViewCollapseIcon:Yo(Rp,!0),accordionViewLabelColor:bi,accordionViewLabelFont:cd,accordionViewTitleBackground:xm,accordionViewSelectBackground:Oe,accordionViewSelectWidth:3,accordionViewSeparatorColor:Y,splitViewDividerSize:1,splitViewDividerBackground:xm,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:yg,rect:[2,2,12,12],background:Rp}]},propertyViewLabelColor:Vh,propertyViewLabelSelectColor:bi,propertyViewLabelFont:cd,propertyViewExpandIcon:Yo(Cb),propertyViewCollapseIcon:Yo(Cb,!0),propertyViewBackground:Un,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Wd,propertyViewColumnLineColor:Wd,propertyViewSelectBackground:Oe,listViewLabelColor:Vh,listViewLabelSelectColor:bi,listViewLabelFont:cd,listViewRowLineVisible:!1,listViewRowLineColor:Wd,listViewSelectBackground:Oe,treeViewLabelColor:Vh,treeViewLabelSelectColor:bi,treeViewLabelFont:cd,treeViewExpandIcon:Yo(hf),treeViewCollapseIcon:Yo(hf,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Wd,treeViewSelectBackground:Oe,tableViewLabelColor:Vh,tableViewLabelSelectColor:bi,tableViewLabelFont:cd,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Wd,tableViewColumnLineColor:Wd,tableViewSelectBackground:Oe,treeTableViewLabelColor:Vh,treeTableViewLabelSelectColor:bi,treeTableViewLabelFont:cd,treeTableViewExpandIcon:Yo(hf),treeTableViewCollapseIcon:Yo(hf,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Wd,treeTableViewColumnLineColor:Wd,treeTableViewSelectBackground:Oe,tableHeaderLabelColor:Vh,tableHeaderLabelFont:cd,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:co,tableHeaderBackground:Un,tableHeaderMoveBackground:tn,tableHeaderInsertColor:Oe,tableHeaderSortDescIcon:Il(Cb,!0),tableHeaderSortAscIcon:Il(Cb),tabViewTabGap:1,tabViewLabelColor:bi,tabViewLabelFont:cd,tabViewTabBackground:xm,tabViewSelectWidth:3,tabViewSelectBackground:Oe,tabViewMoveBackground:tn,tabViewInsertColor:Oe,toolbarLabelColor:Vh,toolbarLabelSelectColor:bi,toolbarLabelFont:cd,toolbarBackground:Un,toolbarSelectBackground:Oe,toolbarItemGap:8,toolbarSeparatorColor:_l},!0);var Pq={translateX:1,sortColumn:1},ok={sortable:1,sortOrder:1,sortFunc:1},dp={focusData:1},Yc={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},bj={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Ic=function(m,$){$.add(m),m.hasChildren()&&m.eachChild(function(F){Ic(F,$)})},js=function(k,E,n,C,_,Q,X,o,d,K,P){var $,w=n.getValueType(),V=n.getAlign();if(n.getEnumValues()){var v=n.toEnumLabel(E),f=Gl||0,y=0,T=Q,l=h.getTextSize(C,v).width;return $=tm(n.toEnumIcon(E)),$&&(y=Q+Gl/2,"center"===V?y+=(o-(f+l))/2:"right"===V&&(y=y+o-(f+l)),Sk(k,$,y,X+d/2),T=y+Gl/2),v!=L&&($?Xj(k,v,C,_,T,X,o-(T-Q),d):Xj(k,v,C,_,Q,X,o,d,V)),void 0}return E=n.formatValue(E),E!=L?w===Lj?(kh(k,Q,X,o,d,E),void 0):w===Pe||!w&&io(E)?($=tm(E?Vb:em),Sk(k,$,Q+o/2,X+d/2,K,P),void 0):(Xj(k,E,C,_,Q,X,o,d,V),void 0):void 0},_r=function(t,k){var f=k.view,m=f.getDataModel().getHistoryManager(),N=_c(t),O=k.column||k.property;m&&m.beginInteraction(),k.editor=t,t.info=k,f.setCurrentEditor(t),f.getView().insertBefore(N,f._79O),kl(t,k.editorRect),t.setFocus?t.setFocus():Zi(t),t.commitValue=function(){t._17Q&&(t=t._17Q),f.setValue(k.data,O,t.getValue?t.getValue():t.value),t.close&&t.close(),db(N)},O.onEditorCreated&&O.onEditorCreated(k)},Hj=function(R,K,O,Q,z){var I=ac(R,O),b=K.value,A=K.view,F=z.getValueType();return I.onblur=I.onchange=function(){A.endEditing()},"input"===R?(b=z.formatValue(b),b!=L&&(I.value=b),I.onkeydown=function(r){Lp(r)&&A.endEditing()},(F===Zc||F===Ti)&&I.addEventListener(tf,h.numberListener,!1)):R===dq&&Q.forEach(function(q){var W=i.createElement("option");W.innerHTML=z.toEnumLabel(q),W.value=q,z.isEnumEqual(b,q)&&(W.selected=!0),Dg(I,W)}),_r(I,K),I},dd=U.widget={},mq=function(i,F,H){jf(T+".widget."+i,F,H)};tl(Ep,{ms_value:function(J){J.getValue=function(w){var b=this.getItemById(w),H=b.element;return H?H.getValue?H.getValue():H.value:b.selected},J.setValue=function(x,W){var G=this.getItemById(x),L=G.element;L?L.setValue?L.setValue(W):L.value=W:(G.selected=W,this.iv())},J.v=function(B,N){var F=this;if(2===arguments.length)F.setValue(B,N);else{if(!mi(B))return F.getValue(B);for(var U in B)F.setValue(U,B[U])}return F}},_46o:function(z){z._icon=L,z._accessType=L,z._valueType=L,z._editable=!1,z._batchEditable=!0,z._align=X,z._nullable=!0,z._emptiable=!1,z.setParent=yk,z.formatValue=function(A){var n=this,Q=n._valueType;if(n.getEnumValues())return n.toEnumLabel(A);if(Q===Pe)return!!A;if(A!=L){if(Q===Zc)return c(A);if(_h(A))return Xk(A)}return A},z.setEnum=function(Z,Y,N,h,u,T){var t=this;Z&&Z.values&&(h=Z.editable,N=Z.icons,Y=Z.labels,u=Z.strict,T=Z.maxHeight,Z=Z.values),th(Z)&&(Z=Z._as),th(Y)&&(Y=Y._as),th(N)&&(N=N._as),t._enumValues=Z,t._enumLabels=Y,t._enumIcons=N,t._enumEditable=h,t._enumStrict=u==L?!0:u,t._enumMaxHeight=T,Z&&Z.length&&_h(Z[0])&&(t._valueType=Ti),t.fp("enum",!1,!0)
},z.getEnumMaxHeight=function(){return this._enumMaxHeight},z.isEnumEditable=function(){return this._enumEditable},z.getEnumValues=function(){return this._enumValues},z.getEnumLabels=function(){return this._enumLabels},z.getEnumIcons=function(){return this._enumIcons},z.isEnumStrict=function(){return this._enumStrict},z.isEnumEqual=function($,i){return this._enumStrict?$===i:$==i},z.toEnumLabel=function(T){var F=this,v=F._enumValues,Y=F._enumLabels;if(v&&Y)for(var y=0;y<v.length;y++)if(F.isEnumEqual(T,v[y]))return Y[y];return T},z.toEnumIcon=function(j){var C=this,G=C._enumValues,H=C._enumIcons;if(G&&H)for(var a=0;a<G.length;a++)if(C.isEnumEqual(j,G[a]))return H[a];return Y}},_45o:function(F){F._87o=function(K,X,v,C,m,M){if(K){var g=this,u=g._90I,D=lo(1);g._columnLineVisible&&(m-=1),g._rowLineVisible&&(M-=1),0>=m||0>=M||(g._90I||(u=g._90I={}),u[X]||(u[X]=new Ml),kl(D,g.tx()+v,g.ty()+C,m,M),Dg(D,K),g._view.insertBefore(D,g._79O),K.onParentAdded&&K.onParentAdded(D),u[X].add(D))}},F._76o=function(){var u=this,G=u._90I;if(G){for(var H in G)G[H].each(function(A){db(A)});delete u._90I}},F._77o=function(S){var O=this;if(O._90I){var l=O._90I[S];l&&(l.each(function(g){db(g)}),delete O._90I[S])}}},_47o:function(S){S.getValue=function(G,D){return D.getValue?D.getValue(G,D,this):Eh(G,D.getAccessType(),D.getName())},S.setValue=function(O,$,P){if($.isEmptiable()||""!==P||(P=Y),$.isNullable()||P!=L){var p=this,g=$.getName(),c=$.getAccessType(),w=$.getValueType();w===Zc&&dn(P)?P=n(P):w===Ti&&dn(P)?P=parseFloat(P):w===Pe&&dn(P)&&(P="true"===P),p._batchEditable&&$._batchEditable&&p.isSelected(O)?p.sm().each(function(Q){$.setValue?$.setValue(Q,$,P,p):Wl(Q,c,g,P)}):$.setValue?$.setValue(O,$,P,p):Wl(O,c,g,P)}},S.setCurrentEditor=function(p){this.endEditing(),this._currentEditor=p,this.redraw()},S.isEditing=function(z,c){var t=this,j=t._currentEditor;if(!j)return!1;if(c){var A=j.info;return A?(A.column||A.property)===c&&A.data===z:!1}return!0},S.endEditing=function(){var h=this,W=h._currentEditor,j=h.getDataModel().getHistoryManager();W&&(delete h._currentEditor,W.commitValue&&W.commitValue(W.info),h.redraw(),j&&j.endInteraction())},S.beginEditing=function(A){this.endEditing();var z=this,I=A.column||A.property;if(I.beginEditing)I.beginEditing(A);else{var l=A.data,B=A.value,d=z.getSelectBackground(l),W=I.getEnumValues(),r=I.getSlider(),K=I.getColorPicker();if(r){var H=gb(dd.Slider,r);return H.setValue(B),H.getView().onblur=function(){z.endEditing()},H.isInstant()&&(H.onValueChanged=function(){z.setValue(l,I,H.getValue())}),_r(H,A),void 0}if(K||I.getValueType()===Lj){var Z=gb(dd.ColorPicker,K);return Z.setValue(B),Z.onClosed=function(){z.endEditing()},Z.isInstant()&&(Z.onValueChanged=function(O,p){z.setValue(l,I,p)}),_r(Z,A),Z.open(),void 0}if(W){if(dd.ComboBox){var Y=new dd.ComboBox;Y.setValue(B),Y.setValues(W),Y.setLabels(I.getEnumLabels()),Y.setIcons(I.getEnumIcons()),Y.setEditable(I.isEnumEditable()),Y.setStrict(I.isEnumStrict()),Y.setMaxHeight(I.getEnumMaxHeight()),Y.onClosed=function(){z.endEditing()},_r(Y,A),Y.open()}else Hj(dq,A,d,W,I);return}var h=I.getValueType();if(h===Pe||io(B))return z.setValue(l,I,!B),void 0;if(I.getItemEditor()){var t=Ke(I.getItemEditor()),D=new t(l,I,z,A),k=D.getView();return k._17Q=D,D.setValue(B),Bc(k),_r(k,A),D.editBeginning&&D.editBeginning(),void 0}Hj("input",A,d,L,I)}}},_44o:function(O){O.init=function(x){var h=this,k=h.th=new ts(x),F=h._view=lo(1);h.tv=h._tableView=x,Dg(F,k.getView()),Dg(F,x.getView()),k.mp(function(f){f.property===Pp&&h.iv()}),h.iv()},O.getTableView=function(){return this.tv},O.getTableHeader=function(){return this.th},O.getDataModel=function(){return this.tv.dm()},O.getColumnModel=function(){return this.tv.getColumnModel()},O.setColumns=function(_){this.tv.setColumns(_)},O.addColumns=function(h){this.tv.addColumns(h)},O.endEditing=function(){this.tv.endEditing()},O.validateImpl=function(){var q=this,e=q.th,V=ll(e),d={x:0,y:0,width:q.getWidth(),height:V};kl(e,d),d.y=V,d.height=K(0,q.getHeight()-V),kl(q.tv,d)}},ms_vs:function(O){O._41o=function(){return this._29I.height<this._59I},O._43o=function(){var k=this;k._41o()&&(k._58I||(P(function(){k._94O()},Ok),k.iv()),k._58I=new Date)},O._94O=function(){var K=this;if(K._58I){var s=new Date;s.getTime()-K._58I.getTime()>=Ok?(delete K._58I,K.iv()):P(function(){K._94O()},Ok)}},O._93I=function(){var c=this,u=c._27I;if(c._58I||!c._autoHideScrollBar){u||Dg(c._79O,u=c._27I=lo());var e=c._29I,i=e.height,G=c._59I,V=c.getScrollBarSize(),t=e.width-V-2,H=i*(-c.ty()/G),U=i*(i/G),k=u.style;G>i?(Cf>U&&(H=H+U/2-Cf/2,0>H&&(H=0),H+Cf>i&&(H=i-Cf),U=Cf),k.visibility=Gp,k.background=c.getScrollBarColor(),k.borderRadius=V/2+Wk,kl(u,t,H,V,U)):k.visibility=Tl}else u&&(u.style.visibility=Tl)}},ms_hs:function(s){s._40o=function(){return this._29I.width<this._91I},s._42o=function(){var d=this;d._40o()&&(d._95O||(P(function(){d._94I()},Ok),d.iv()),d._95O=new Date)},s._94I=function(){var Y=this;if(Y._95O){var m=new Date;m.getTime()-Y._95O.getTime()>=Ok?(delete Y._95O,Y.iv()):P(function(){Y._94I()},Ok)}},s._92I=function(){var L=this,P=L._28I;if(L._95O||!L._autoHideScrollBar){P||Dg(L._79O,P=L._28I=lo());var N=L._29I,i=N.width,p=L._91I,z=L.getScrollBarSize(),B=N.height-z-2,d=i*(-L.tx()/p),I=i*(i/p),w=P.style;p>i?(Cf>I&&(d=d+I/2-Cf/2,0>d&&(d=0),d+Cf>i&&(d=i-Cf),I=Cf),w.visibility=Gp,w.background=L.getScrollBarColor(),w.borderRadius=z/2+Wk,kl(P,d,B,I,z)):w.visibility=Tl}else P&&(P.style.visibility=Tl)}}}),qg(Vb,Ze(16,16,[{type:Fo,rect:[1,1,14,14],background:Oe},{type:Sq,rect:[1,1,14,14],width:1,color:Am},{type:sq,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),qg(em,Ze(16,16,{type:Sq,rect:[1,1,14,14],width:1,color:Am})),qg(to,Ze(16,16,[{type:Kl,rect:[2,2,12,12],borderWidth:1,borderColor:Am,background:"#FFF"},{type:Kl,rect:[4,4,8,8],background:Oe}])),qg(bb,Ze(16,16,{type:Kl,rect:[2,2,12,12],borderWidth:1,borderColor:Am})),Ep._15Q=function(z){z._29I=Hp,z._59I=0,z._91I=0,z._5o=function(q){var V=this;V._30I=new Ml,V._rows=new Ml,V._rowMap={},V._31I=0,V._14I=0,V._view=lo(1),V._canvas=Dj(V._view),Dg(V._view,V._79O=lo()),V.dm(q?q:new Ko)},z.getCheckIcon=function(V){var s=this.sm(),N=s.co(V);return s.sg()?tm(N?to:bb):tm(N?Vb:em)},z.checkData=function(p){var k=this.sm(),S=k.co(p);k.sg()&&S||(this._32o=1,S?k.rs(p):k.as(p),delete this._32o)},z.getDataAt=function(e){e.target&&(e=this.lp(e));var $=F(e.y/this._rowHeight),G=this._rows;return 0>$||$>=G.size()?L:G.get($)},z.onDataDoubleClicked=function(){},z.onDataClicked=function(){},z.adjustTranslateX=function(){return 0},z.adjustTranslateY=function(N){var p=this.getHeight()-this._59I;return p>N&&(N=p),N>0?0:c(N)},z.onPropertyChanged=function(m){var F=this,f=m.property;Yc[f]?F.ivm():dp[f]||F.redraw(),f===yf?F._42o():f===qc&&F._43o()},z.getLabel=function(b){return b.toLabel()},z.getLabelFont=function(){return this._labelFont},z.getLabelColor=function(R){var t=this;if(t.isCheckMode()){if(t._focusData===R)return t._labelSelectColor}else if(t.isSelected(R))return t._labelSelectColor;return t._labelColor},z.getStartRowIndex=function(){return this._31I},z.getEndRowIndex=function(){return this._14I},z.getRowDatas=function(){return this._rows},z.getRowIndex=function(Z){return this._rowMap[Z._id]},z.getRowSize=function(){return this._rows.size()},z.getViewRect=function(){return nb(this._29I)},z.isVisible=function(n){return this._visibleFunc?this._visibleFunc(n):!0},z.getCurrentSortFunc=function(){return this._sortFunc},z.setDataModel=function(K){var o=this,W=o._dataModel,b=o._3o;W!==K&&(W&&(W.umm(o.handleDataModelChange,o),W.umd(o.handleDataPropertyChange,o),W.umh(o._15o,o),b||W.sm().ums(o._16o,o)),o._dataModel=K,K.mm(o.handleDataModelChange,o),K.md(o.handleDataPropertyChange,o),K.mh(o._15o,o),b?b._21I(K):K.sm().ms(o._16o,o),o.fp("dataModel",W,K))},z.validateModel=function(){var v=this;v._rows.clear(),v._rowMap={},v.buildChildren(v._dataModel._roots);var z=v._rows=v._rows.toList(v.isVisible,v),o=0,g=v.getCurrentSortFunc(),i=z.size();for(g&&z.sort(g);i>o;o++)v._rowMap[z.get(o)._id]=o},z.buildChildren=function(j){var X=this;j.each(function(R){X._rows.add(R),X.buildChildren(R._children)})},z.handleDataModelChange=function(){this.ivm()},z.handleDataPropertyChange=function(k){"parent"===k.property?this.ivm():this.invalidateData(k.data)},z._15o=function(){this.ivm()},z._16o=function(q){q.datas.each(this.invalidateData,this),this.onSelectionChanged(q)},z.onSelectionChanged=function(d){var j=this,T=j.sm();!j.isAutoMakeVisible()||1!==T.size()||"set"!==d.kind&&"append"!==d.kind||j._32o||j.makeVisible(T.ld())},z.makeVisible=function(b){b&&(this._23I=b,this.iv())},z.scrollToIndex=function(L){var e=this,i=e._29I,d=i.height,P=e._rowHeight,b=P*L;L>=0&&L<e._rows.size()&&d>0&&(b+P>i.y+d?e.ty(-b+d-P):b<i.y&&e.ty(-b))},z.ivm=function(){this.invalidateModel()},z.invalidateModel=function(){var Y=this;Y._96I||(Y._96I=1,Y._32I=1,delete Y._24I,Y.iv())},z.redraw=function(){var M=this;M._32I||(M._32I=1,delete M._24I,M.iv())},z.invalidateData=function($){var Z=this;J?Z.redraw():Z._32I||(Z._24I||(Z._24I={}),Z._24I[$._id]=$,Z.iv())},z.getFocusData=function(){return this._focusData},z.setFocusDataById=function(y){this.setFocusData(this.dm().getDataById(y))},z.setFocusData=function(c){var O=this,G=O._focusData;G!==c&&(O._focusData=c,O.fp("focusData",G,c),G&&O.invalidateData(G),c&&(O.invalidateData(c),O.isAutoMakeVisible()&&O.makeVisible(c)))},z.drawRowBackground=function(f,c,W,i,U,K,R){var a=this,t=a.isCheckMode();(c===a._focusData&&t||W&&!t)&&kh(f,i,U,K,R,a.getSelectBackground(c))},z.drawData=function(Y,_,a){var v=this,M=v._rowHeight,z=M*a,E=v._29I,K=E.x,j=E.width;Y.save(),Y.beginPath(),Y.rect(K,z,j,M),Y.clip(),v._87o(v.drawRow(Y,_,v.isSelected(_),K,z,j,M),a,K,z,j,M),Y.restore(),v._rowLineVisible&&kh(Y,K,z+M-1,j,1,v._rowLineColor)},z._12I=function(B){var d=this,Y=d._31I,z=d._29I,h=z.x,a=z.y,X=z.width,P=z.height;for(B.beginPath(),B.rect(h,a,X,P),B.clip(),B.clearRect(h,a,X,P),d._76o(),d._93db(B);Y<d._14I;Y++)d.drawData(B,d._rows.get(Y),Y);d._92db(B)},z._13I=function(a){for(var w,j=this,$=j._rowHeight,l=j._29I,Q=l.x,G=l.width,s=j._31I,D=j._30I;s<j._14I;s++)w=j._rows.get(s),j._24I[w._id]&&D.add({data:w,index:s});D.isEmpty()||(a.beginPath(),D.each(function(p){a.rect(Q,p.index*$,G,$)}),a.clip(),D.each(function(t){a.clearRect(Q,t.index*$,G,$)}),D.each(function(h){j._77o(h.index)}),j._93db(a),D.each(function(T){j.drawData(a,T.data,T.index)}),j._92db(a),D.clear())},z.validateImpl=function(){var u=this,c=u._canvas,r=u.getWidth(),M=u.getHeight(),R=u._rowHeight,P=u._32I;(r!==c.clientWidth||M!==c.clientHeight)&&(Vc(c,r,M),P=1),u._96I&&u.validateModel();var j=u._29I,T={x:-u.tx(),y:-u.ty(),width:r,height:M},$=u._rows.size(),d=on(c),S=u._23I;P||ic(T,j)||(P=1),u._29I=T,u._59I=$*R,u._31I=F(T.y/R),u._14I=k((T.y+T.height)/R),u._31I<0&&(u._31I=0),u._14I>$&&(u._14I=$),u._99I&&P&&u._99I(),fd(d,u.tx(),u.ty(),1),P?u._12I(d):u._24I&&u._13I(d),u._93I(),u._92I(),d.restore(),u._32I=u._24I=u._96I=L,S&&(u.scrollToIndex(u.getRowIndex(S)),delete u._23I),u.tx(u.tx()),u.ty(u.ty())}},Ep._48o=function(w){w._rootVisible=!0,w._rootData=L,w._35o=function(){this._expandMap={},this._levelMap={}},w.validateModel=function(){var P=this,u=P._rootData;P._rows.clear(),P._levelMap={},P._rowMap={},P._currentLevel=0,u?P._rootVisible?P.isVisible(u)&&P.buildData(u):P.buildChildren(u):P.buildChildren(),delete P._currentLevel},w.buildData=function(k){var z=this,m=k._id,C=z._rows;z._rowMap[m]=C.size(),C.add(k),z._levelMap[m]=z._currentLevel,z.isExpanded(k)&&(z._currentLevel++,z.buildChildren(k),z._currentLevel--)},w.buildChildren=function(V){var w=this,r=V?V._children:w._dataModel._roots,T=w.getCurrentSortFunc();T&&w.isChildrenSortable(V)?r.toList(w.isVisible,w).sort(T).each(w.buildData,w):r.each(function(t){w.isVisible(t)&&w.buildData(t)})},w.getLevel=function(b){return this._levelMap[b._id]},w.getToggleIcon=function(V){var U=this,G=U._loader,I=U._collapseIcon;return G&&!G.isLoaded(V)?I:V.hasChildren()?U.isExpanded(V)?U._expandIcon:I:L},w.isCheckMode=function(){return this._checkMode!=L},w.isChildrenSortable=function(){return!0},w.handleDataModelChange=function(D){var k=this;D.kind===lp?delete k._expandMap[D.data._id]:D.kind===Ne&&(k._expandMap={}),k.ivm()},w.toggle=function(l){var y=this;y.isExpanded(l)?y.collapse(l):y.expand(l)},w.isExpanded=function(f){return 1===this._expandMap[f._id]},w.expand=function(o){var x=this,R=x._loader;x.isExpanded(o)||(R&&!R.isLoaded(o)&&R.load(o),x._expandMap[o._id]=1,x.ivm(),x.onExpanded(o))},w.onExpanded=function(){},w.collapse=function(M){var i=this;i.isExpanded(M)&&(delete i._expandMap[M._id],i.ivm(),i.onCollapsed(M))},w.onCollapsed=function(){},w.expandAll=function(){var d=this;d._dataModel.each(function(h){h.hasChildren()&&(d._expandMap[h._id]=1)}),d.ivm()},w.collapseAll=function(){this._expandMap={},this.ivm()},w.makeVisible=function($){if($){var n=this;if(!n._rootData||$.isDescendantOf(n._rootData)){for(var Y=$._parent;Y;)n.expand(Y),Y=Y._parent;n._23I=$,n.iv()}}},w.checkData=function(p){var X,n=this,Q=n._checkMode,g=n.sm(),K=g.co(p);if(!g.sg()||!K){if(n._32o=1,Q===z)K?g.rs(p):g.as(p);else if(Q===Ao)X=new Ml(p),X.addAll(p._children);else if("descendant"===Q)X=new Ml,Ic(p,X);else if("all"===Q&&(X=new Ml,Ic(p,X),!K))for(var b=p._parent;b;)X.add(b),b=b._parent;X&&(K?g.rs(X):g.as(X)),delete n._32o}},w._97I=function(n,o,c,q,Y,X,b){var W=this,d=W._indent,U=W._levelMap[o._id],r=W.getIconWidth(o),f=tm(W.getToggleIcon(o));f?(q+=d*U,Sk(n,f,q+d/2,Y+b/2,o,W),q+=d):q+=d*(U+1),W._checkMode&&(Sk(n,W.getCheckIcon(o),q+d/2,Y+b/2,o,W),q+=d),W.drawIcon(n,o,q,Y,r,b),W.drawLabel(n,o,q+r,Y,b)}},Ep._14Q=function(c){c.getIcon=function(X){return X.getIcon()},c.getIconWidth=function(q){return this.getIcon(q)?this._indent:0},c.drawIcon=function(Z,X,G,D,w,E){if(w){var F=this,O=F.getBodyColor(X),e=tm(F.getIcon(X),O);e&&(E-=F.isRowLineVisible()?1:0,rj(Z,e,am,G,D,w,E,X,F,O),ai(Z,F.getBorderColor(X),G,D,w,E))}},c.drawLabel=function(s,S,t,V,X){var a=this;Xj(s,a.getLabel(S),a.getLabelFont(S),a.getLabelColor(S),t,V,0,X)}},Ep._50o=function(I){I._98I=function(){var c=this,l=c._39o=new Ko;c._60I=new Ml,l.mm(c._17o,c),l.md(c._18o,c),l.mh(c._19o,c)},I.setColumns=function(P){this._39o.clear(),this.addColumns(P)},I.addColumns=function(G){var X=this._39o;G.forEach(function(j){if(!(j instanceof Ji)){var U=Ke(j.className);j=gb(U?U:Ji,j)}X.add(j)})},I.onColumnClicked=function(){},I.onCheckColumnClicked=function(){},I._3Q=function(F){for(var H,i=0,B=this._60I,j=B.size();j>i;i++)if(H=B.get(i),H.column===F)return H;return L},I.getColumnAt=function(W){var d=this._4Q(W);return d?d.column:L},I._4Q=function(x){for(var t=this,G=x.target?t.lp(x).x:x.x,w=t._60I,o=0;o<w.size();o++){var V=w.get(o),I=V.startX;if(G>=I&&G<I+V.column.getWidth())return V}return L},I.getToolTip=function(m){var Q=this,d=Q.getDataAt(m),B=Q.getColumnAt(m);return d&&B?B.getToolTip(d,Q):L},I.adjustTranslateX=function(X){var I=this.getWidth()-this._91I;return I>X&&(X=I),X>0?0:c(X)},I._99I=function(){var e=this,H=e._29I,_=e._60I;_.clear(),e._91I=0,e._39o._roots.each(function(p){if(p.isVisible()){var B=e._91I+p.getWidth();e._91I<=H.x+H.width&&B>=H.x&&_.add({column:p,startX:e._91I}),e._91I=B}})},I.drawData=function(w,K,o){var x=this,g=x._rowHeight,c=g*o,Y=x.isSelected(K),j=x._29I,W=j.x,T=j.width;x.drawRowBackground(w,K,Y,W,c,T,g),x._60I.each(function(n){var Z=n.column,E=n.startX,U=Z.getWidth();U>0&&!x.isEditing(K,Z)&&(w.save(),w.beginPath(),w.rect(E,c,U,g),w.clip(),x._87o(x.drawCell(w,K,Y,Z,E,c,U,g),o,E,c,U,g),x._columnLineVisible&&kh(w,E+U-1,c,1,g,x._columnLineColor),w.restore())}),x._rowLineVisible&&kh(w,W,c+g-1,T,1,x._rowLineColor)},I.drawCell=function(J,C,R,q,U,v,M,b){var O=this;if(q.drawCell)return q.drawCell(J,C,R,q,U,v,M,b,O);var f=O.getValue(C,q);js(J,f,q,O.getLabelFont(C,q,f),O.getLabelColor(C,q,f),U,v,M,b,C,O)},I.getColumnModel=function(){return this._39o},I._17o=function(){this.redraw()},I._18o=function(i){var d=this;i.data===d._sortColumn&&ok[i.property]?d.ivm():(d._42o(),d.redraw())},I._19o=function(){this.redraw()},I.getCurrentSortFunc=function(){var Q=this,J=Q._sortColumn;if(J&&J.isSortable()){var k=J.getSortFunc(),X=np===J.getSortOrder()?1:-1;return k||(k=_n),function(z,U){return k.call(Q,Q.getValue(z,J),Q.getValue(U,J),z,U)*X}}return Q._sortFunc},I.isCellEditable=function(J,k){return k.isEditable()&&this.isEditable()},I._37O=function(x,R){if(Gg(R))for(var b=this,H=b.lp(R),w=b._60I,_=b._rowHeight,S=b._29I,J=S.x,z=S.y,v=S.width,E=S.height,D=0;D<w.size();D++){var W=w.get(D),N=W.startX,M=W.column,h=M.getWidth();if(M!==b._31o&&M!==b._4o&&b.isCellEditable(x,M)&&H.x>=N&&H.x<N+h){var K={x:N,y:b.getRowIndex(x)*_,width:h,height:_},p={x:K.x+b.tx(),y:K.y+b.ty(),width:K.width,height:K.height},I=0,s=0;return K.x<J?I=K.x-J:K.x+K.width>J+v&&(I=K.x+K.width-J-v),I&&(b.tx(b.tx()-I),p.x-=I),K.y<z?s=K.y-z:K.y+_>z+E&&(s=K.y+_-z-E),s&&(b.ty(b.ty()-s),p.y-=s),b.beginEditing({data:x,column:M,value:b.getValue(x,M),event:R,rect:K,editorRect:p,view:b}),void 0}}}},dd.BaseItemEditor=function(Z,N,L,S){this._data=Z,this._column=N,this._master=L,this._editInfo=S},mq("BaseItemEditor",b,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Fl=U.Tab=function(){Xc(Fl,this)};Pj("Tab",Ql,{ms_ac:["view","closable","disabled"],_icon:L,_closable:!1,_disabled:!1,setParent:yk});var Ji=U.Column=function(){Xc(Ji,this)};Pj("Column",Ql,{_46o:1,ms_ac:["accessType","valueType",Gp,Qr,gq,hj,"align",Lj,"sortOrder",dk,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:np,_sortFunc:L,_sortable:!0,setWidth:function(r){16>r&&(r=16);var O=this._width;this._width=r,this.fp(hj,O,r)},getToolTip:function(W,Q){return this.formatValue(Q.getValue(W,this))}});var fr=U.Property=function(){Xc(fr,this)};Pj("Property",Ql,{_46o:1,ms_ac:["accessType","valueType",Qr,gq,"categoryName",Lj,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:L,getToolTip:function(V,M,H){var b=this;return M?b.formatValue(H.getValue(V,b)):H.getPropertyName(b)}}),dd.AccordionView=function(){var b=this;b._20o={},b._21o=new Ml,b._10o=L,b._9o=L,b._11o=L,b._view=lo(),b.iv()},mq("AccordionView",b,{ms_v:1,ms_fire:1,ms_ac:[Mm,Bn,"titleHeight",fb,Uh,"titleBackground","selectWidth",Aq,"orientation","separatorColor"],_expandIcon:h.accordionViewExpandIcon,_collapseIcon:h.accordionViewCollapseIcon,_titleHeight:eh,_labelColor:h.accordionViewLabelColor,_labelFont:h.accordionViewLabelFont,_titleBackground:h.accordionViewTitleBackground,_selectBackground:h.accordionViewSelectBackground,_selectWidth:h.accordionViewSelectWidth,_orientation:"v",_separatorColor:h.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(s,p,Z,y){var j=this,O=lo();if(j._20o[s])throw s+" already exists";O.onmousedown=ir,O.style.cursor=Nj,O.addEventListener(S?Oc:Lm,function(Q){ir(Q)},!1),O.addEventListener(S?We:Zd,function(m){ir(m),Gg(m)&&(j._10o===s?j.collapse():j.expand(s))},!1),Dg(j._view,O),j._20o[s]={content:p,div:O,canvas:Dj(O),icon:y},j._21o.add(s),Z&&j.expand(s),j.iv()},remove:function(I){var U=this,v=U._20o[I];v&&(db(v.div),delete U._20o[I],U._21o.remove(I),U.iv())},clear:function(){var s=this;s._20o={},s._21o.clear(),s.iv()},isExpanded:function(K){return this._10o===K},expand:function(D){var a=this;a._20o[D]&&a._10o!==D&&(a._10o=D,a.onExpanded(D),a.iv())},onExpanded:function(){},collapse:function(){var R=this;R._10o&&(R.onCollapsed(R._10o),delete R._10o,R.iv())},onCollapsed:function(){},initCanvas:function(K,V,n){Vc(K,V,n);var D=on(K);return fd(D,0,0,1),D.clearRect(0,0,V,n),D},drawTitle:function(T,d,g,t,Q){var Y=this,r=tm(Q.icon),A=Y.isExpanded(d),K=Y._titleHeight,N=Y._titleBackground,U=Y._selectWidth,L=Y._separatorColor,Z=tm(A?Y._expandIcon:Y._collapseIcon),G=U+4;kh(T,0,0,g,t,N),A&&U&&kh(T,0,0,U,t,Y._selectBackground),(A||Y._21o.get(Y._21o.size()-1)!==d)&&kh(T,0,t-1,g,1,L?L:rg(N)),r&&(Sk(T,r,G+Ge(r)/2,K/2),G+=Ge(r)+2),Xj(T,d,Y.getLabelFont(d),Y.getLabelColor(d),G,0,0,K),Z&&Sk(T,Z,g-Ge(Z)/2-4,K/2)},validateImpl:function(){var z=this,I=z._view,P=0,u=0,H=z.getWidth(),V=z.getHeight(),g=z._titleHeight,L=z._21o.size()*g,m=z._11o,O=z._9o;delete z._11o,delete z._9o,z._21o.each(function(F){var s,$,o=z._20o[F],_=o.content,C=z._10o===F;Dd(z)?(kl(o.div,P,0,g,V),s=z.initCanvas(o.canvas,g,V),mk(s,0,V),en(s,-d),z.drawTitle(s,F,V,g,o),s.restore(),C?($=K(0,H-L),_&&(z._11o=_,z._9o=_c(_),kl(_,P+g,0,$,V)),P+=g+$):P+=g):(kl(o.div,0,u,H,g),s=z.initCanvas(o.canvas,H,g),z.drawTitle(s,F,H,g,o),s.restore(),C?($=K(0,V-L),_&&(z._11o=_,z._9o=_c(_),kl(_,0,u+g,H,$)),u+=g+$):u+=g)});var Z=z._9o;m&&m!==z._11o&&m.endEditing&&m.endEditing(),Z&&Z!==O&&Dg(I,Z),O&&O!==Z&&db(O)}}),dd.SplitView=function(t,j,i,O){var d=this,B=d._dividerDiv=lo(),z=d._60O=Dj(),r=d._61O=Dj(),E=z.style,c=r.style;d._view=lo(1),Dg(d._view,B),E.msTouchAction=xb,E.pointerEvents=xb,E.cursor=Nj,c.msTouchAction=xb,c.pointerEvents=xb,c.cursor=Nj,t&&d.setLeftView(t),j&&d.setRightView(j),i&&d.setOrientation(i),O!=L&&d.setPosition(O),d.setStatus(gn),new Si(d)},mq("SplitView",b,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:h.splitViewDividerSize,_dividerBackground:h.splitViewDividerBackground,_dragOpacity:h.splitViewDragOpacity,_toggleIcon:h.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(I,Z){var R=this,A=R._position;isNaN(I)||(Z||(R._82O=0>I?-1:I>1?1:0),R._position=I,R.fp(ue,A,I))},getLeftView:function(){return this._leftView},setLeftView:function(S){var M=this,m=M._leftView,J=M._view;if(M._leftView!==S){if(m&&m!==M._rightView){var V=_c(m);V.parentNode===J&&db(V)}if(M._leftView=S,S){var I=_c(S);I.parentNode!==J&&J.insertBefore(I,M._dividerDiv)}M.fp("leftView",m,S)}},getRightView:function(){return this._rightView},setRightView:function(P){var m=this,T=m._rightView,t=m._view;if(m._rightView!==P){if(T&&T!==m._leftView){var f=_c(T);f.parentNode===t&&db(f)}if(m._rightView=P,P){var Q=_c(P);Q.parentNode!==t&&t.insertBefore(Q,m._dividerDiv)}m.fp("rightView",T,P)}},validateImpl:function(){var j=this,L=j._draggable,D=j._position,Z=j.getWidth(),P=j.getHeight(),z=j._dividerSize,h=j._dividerBackground,U=S?18:8,r=j._dividerDiv,l=j._82O,f=j._60O,Q=j._61O,y=j._toggleIcon,F=j._status,n=r.style,t=null,G=S?20:4,m=y.comps[0];z>=U||0===z?j._coverDiv&&(db(j._coverDiv),delete j._coverDiv):j._coverDiv||(j._coverDiv=lo(),I&&(j._coverDiv.style.background=On),Dg(r,j._coverDiv)),j._togglable?f.parentNode||(Dg(r,f),Dg(r,Q)):(db(f),db(Q));var R=j._coverDiv,x=j._leftView,w=j._rightView;if(Dd(j)){if(z>Z&&(z=Z),F===gn)if(1===l)var u=D,e=K(0,Z-z-u);else-1===l?(e=-D,u=K(0,Z-z-e)):(u=c((Z-z)*D),e=K(0,Z-z-u));else"cl"===F?(u=0,e=K(0,Z-z)):"cr"===F&&(e=0,u=K(0,Z-z));x&&kl(x,0,0,u,P),w&&kl(w,u+z,0,e,P),kl(r,u,0,z,P),j._22o=u,R&&(kl(R,z/2-U/2,0,U,P),R.style.cursor=L?xc:""),r.style.cursor=L?xc:"";var k=r.clientHeight/2,C=r.clientWidth;Vc(f,C,C),kl(f,0,k-C-G,C,C),t=on(f),fd(t,0,0,1),m.rotation=-d,md(t,y,0,0,C,C),t.restore(),Vc(Q,C,C),kl(Q,0,k+G,C,C),t=on(Q),fd(t,0,0,1),m.rotation=d,md(t,y,0,0,C,C),t.restore()}else{if(z>P&&(z=P),F===gn)if(1===l)var q=D,V=K(0,P-z-q);else-1===l?(V=-D,q=K(0,P-z-V)):(q=c((P-z)*D),V=K(0,P-z-q));else"cl"===F?(q=0,V=K(0,P-z)):"cr"===F&&(V=0,q=K(0,P-z));x&&kl(x,0,0,Z,q),w&&kl(w,0,q+z,Z,V),kl(r,0,q,Z,z),j._22o=q,R&&(kl(R,0,z/2-U/2,Z,U),R.style.cursor=L?Ec:""),n.cursor=L?Ec:"";var M=r.clientWidth/2,C=r.clientHeight;Vc(f,C,C),kl(f,M-C-G,0,C,C),t=on(f),fd(t,0,0,1),m.rotation=0,md(t,y,0,0,C,C),t.restore(),Vc(Q,C,C),kl(Q,M+G,0,C,C),t=on(Q),fd(t,0,0,1),m.rotation=E,md(t,y,0,0,C,C),t.restore()}n.background=h}});var Si=function(t){this.sv=t,this.addListeners()};jf(Si,b,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(S){var P=this,p=P.sv,e=p._dividerDiv,A=p._60O,w=p._61O,T=p._status,g=S.target;if(g===A)T===gn?p.setStatus("cl"):"cr"===T&&p.setStatus(gn);else if(g===w)T===gn?p.setStatus("cr"):"cl"===T&&p.setStatus(gn);else if(uk(S)&&(g===e||g===p._coverDiv)&&(ir(S),p.isDraggable())){P.resizeDiv=lo();var M=P.resizeDiv.style,L=e.style,Z=p.getLeftView(),J=p.getRightView();P._maskViews=[],[Z,J].forEach(function(d){d=d.getView?d.getView():d;var e=lo(),y=e.style;y.left=d.style.left,y.top=d.style.top,y.width=d.offsetWidth+"px",y.height=d.offsetHeight+"px",p.getView().appendChild(e),P._maskViews.push(e)}),M.left=L.left,M.top=L.top,M.width=L.width,M.height=L.height,M.opacity=p.getDragOpacity(),M.background=p.getDividerBackground(),P._85o=P._86o=Dd(p)?vo(S).x:vo(S).y,Dg(P.getView(),P.resizeDiv),P._clientPoint=vo(S),dc(P,S)}},handleWindowTouchMove:function(o){if(uk(o)){var y=this,q=y.sv,D=q._dividerSize,l=y.resizeDiv.style,X=q.getWidth(),E=q.getHeight(),Z=q._22o-y._86o;Dd(q)?(y._85o=vo(o).x,Z+=y._85o,Z>X-D&&(Z=X-D),0>Z&&(Z=0),l.left=Z+Wk):(y._85o=vo(o).y,Z+=y._85o,Z>E-D&&(Z=E-D),0>Z&&(Z=0),l.top=Z+Wk)}},handleWindowTouchEnd:function(P){var Z=this,K=Z.sv,c=K._22o-Z._86o+Z._85o,o=K._dividerSize,h=Dd(K)?K.getWidth():K.getHeight(),O=K._82O,V=Oh(Z._clientPoint,vo(P));V>1&&(K.setStatus(gn),0>c&&(c=0),c>h-o&&(c=h-o),h!==o&&(1===O?K.setPosition(c,1):-1===O?K.setPosition(c-h+o,1):K.setPosition(c/(h-o),1))),Z._maskViews&&Z._maskViews.forEach(function(y){db(y)}),db(Z.resizeDiv),Z.resizeDiv=Z._85o=Z._clientPoint=L},handle_mousedown:function(t){Gg(t)&&this.handle_touchstart(t)},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handleWindowMouseUp:function(n){this.handleWindowTouchEnd(n)}}),dd.TabView=function(){var D=this,u=D._view=lo(1),b=D._91O=lo(1),$=D._tabModel=new Ko,h=$.sm(),j=D.invalidate;D._7o=new Ml,D._canvas=Dj(b),Dg(u,b),Dg(u,D._92O=lo(1)),h.setSelectionMode(R),h.ms(j,D),$.mm(j,D),$.md(j,D),$.mh(j,D),new uf(D),D.iv()},mq("TabView",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",fb,Uh,"tabBackground","selectWidth",Aq,"moveBackground","insertColor"],_tabPosition:Oq,_tabHeight:eh,_tabGap:h.tabViewTabGap,_labelColor:h.tabViewLabelColor,_labelFont:h.tabViewLabelFont,_tabBackground:h.tabViewTabBackground,_selectWidth:h.tabViewSelectWidth,_selectBackground:h.tabViewSelectBackground,_moveBackground:h.tabViewMoveBackground,_insertColor:h.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(s,A,d){var S=new Fl,Y=this._tabModel;return S.setName(s),S.setView(A),Y.add(S),d&&Y.sm().ss(S),S},getLabel:function(f){return f.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(N){this._23o=N,this.iv()},get:function(e){var O=this,w=O._tabModel;if(_h(e))return w._roots.get(e);if(dn(e)){var h;return w.each(function(L){e===O.getLabel(L)&&(h=L)}),h}return e instanceof Fl?e:L},select:function(U){this._tabModel.sm().ss(this.get(U))},remove:function(H){var b=this;if(H=b.get(H)){var s=b._tabModel,j=s._roots.indexOf(H);b._tabModel.remove(H),b._12Q(--j)}},getCurrentTab:function(){return this._8o},hideTabView:function(c,w){w.parentNode===this._92O&&(Qn(w)?(w.style.display=Zp,w._tab_=c):db(w),Nf())},showTabView:function(z,A){Qn(A)&&(A.style.display="block",A._tab_=z),A.parentNode!==this._92O&&(Dg(this._92O,A),Nf())},_24o:function(){var O,x=this,S=x._8o,u=x._9o,P=x._tabModel.sm().ld();P&&(O=_c(P.getView())),O!==u&&(u&&(S.getView().endEditing&&S.getView().endEditing(),x.hideTabView(S,u)),O&&x.showTabView(P,O)),x._8o=P,x._9o=O,S!==P&&x.onTabChanged(S,P)},onTabChanged:function(){},onTabClosed:function(O,i){this._12Q(--i)},_12Q:function(Q){var v=this,Z=v._tabModel,t=Z.size();if(t&&!Z.sm().ld()){Q==L&&(Q=0),Q>=t&&(Q=t-1),0>Q&&(Q=0);for(var k=Q;k>=0;k--){var H=v.get(k);if(!H.isDisabled())return v.select(H),H}for(k=Q+1;t>k;k++)if(H=v.get(k),!H.isDisabled())return v.select(H),H}},_9Q:function(I){var W=4,U=tm(I.getIcon());U&&(W+=Ge(U,I)+4);var G=this.getLabel(I);return G&&(W+=bd(this.getLabelFont(I),G).width+4),I.isClosable()&&(W+=10),W},_10Q:function(A,x,R,u,f,B,k){var e,G=this,W=G._tabPosition,P=R+4,y=G._selectWidth,o=tm(x.getIcon()),H=x.isDisabled(),Z=G.getLabelColor(x),c=G.getLabelFont(x),v=G.getLabel(x),K=G._selectBackground,D=W===X+"-vertical",l=W===a+"-vertical";(D||l)&&(P=u+4),H&&(A.globalAlpha=hp),kh(A,R,u,f,B,k),x===G._8o&&y&&(W===Oq?kh(A,R,u+B-y,f,y,K):W===X?kh(A,R+f-y,u,y,B,K):W===a?kh(A,R,u,y,B,K):D?kh(A,R+f-y,u,y,B,K):l?kh(A,R,u,y,B,K):kh(A,R,u,f,y,K));var q=f/2;if(D&&(mk(A,q,u+B/2),en(A,E),mk(A,-q,-u-B/2)),o){var I=Wc(o,x),m=Ge(o,x);if(D||l){var g=R+f/2,S=P+I/2;mk(A,g,S),en(A,d),mk(A,-g,-S),Sk(A,o,R+f/2,P+I/2,x,G),mk(A,g,S),en(A,-d),mk(A,-g,-S),P+=I+4}else Sk(A,o,P+m/2,u+B/2,x,G),P+=m+4}return D||l?(mk(A,f/2,P+f/2),en(A,d),mk(A,-f/2,-P-f/2),Xj(A,v,c,Z,R,P,B,f),mk(A,f/2,P+f/2),en(A,-d),mk(A,-f/2,-P-f/2)):Xj(A,v,c,Z,P,u,f,B),D&&(mk(A,q,u+B/2),en(A,-E),mk(A,-q,-u-B/2)),x.isClosable()&&(A.strokeStyle=Z,A.lineWidth=1,A.beginPath(),l?(A.moveTo(R+f-10,u+B-4),A.lineTo(R+f-4,u+B-10),A.moveTo(R+f-4,u+B-4),A.lineTo(R+f-10,u+B-10),A.stroke(),e={x:R+f-12,y:u+B-12,width:12,height:12}):(A.moveTo(R+f-10,u+4),A.lineTo(R+f-4,u+10),A.moveTo(R+f-4,u+4),A.lineTo(R+f-10,u+10),A.stroke(),e={x:R+f-12,y:u,width:12,height:12})),H&&(A.globalAlpha=1),e},validateImpl:function(){var S=this;S._24o();var W,A=S._canvas,f=S._tabPosition,H=S._91O,y=S._92O,j=S._tabModel,u=S.getWidth(),$=S.getHeight(),w=S._tabHeight,i=S._7o,k=S._tabGap,M=f===Oq,h=f===X,g=f===vm,p=f===a,c=f===X+"-vertical",q=f===a+"-vertical",P=S._23o,d=0;if((h||p)&&j._roots.each(function(P){d=K(S._9Q(P),d)}),M?(kl(H,0,0,u,w),W={x:0,y:w,width:u,height:K(0,$-w)}):h?(kl(H,0,0,d,$),W={x:d,y:0,width:K(0,u-d),height:$}):p?(kl(H,u-d,0,d,$),W={x:0,y:0,width:K(0,u-d),height:$}):c?(kl(H,0,0,w,$),W={x:w,y:0,width:K(0,u-w),height:$}):q?(kl(H,u-w,0,w,$),W={x:0,y:0,width:K(0,u-w),height:$}):(kl(H,0,$-w,u,w),W={x:0,y:0,width:u,height:K(0,$-w)}),kl(y,W),c||q){S._9o&&(W.x=0,kl(S._8o.getView(),W)),Vc(A,w,$);var t=on(A),s=0;if(fd(t,0,S.ty(),1),t.clearRect(0,0,w,$),i.clear(),j._roots.each(function(z){var X,h=S._9Q(z);P&&P.tab===z||(X=S._10Q(t,z,0,s,w,h,S._tabBackground),X&&q&&(X.x=u-12)),i.add({_75o:X,tab:z,startY:s,endY:s+h,height:h}),s+=h+k}),S._23Q=K(0,s-k),P){var U=P.position;S._10Q(t,P.tab,0,P.startY,w,P.height,S._moveBackground),kh(t,0,U,w,1,S._insertColor)}t.restore(),S.ty(S.ty())}else if(h||p){S._9o&&(W.x=0,kl(S._8o.getView(),W)),Vc(A,d,$);var t=on(A),s=0;if(fd(t,0,S.ty(),1),t.clearRect(0,0,d,$),i.clear(),j._roots.each(function(M){var q;P&&P.tab===M||(q=S._10Q(t,M,0,s,d,w,S._tabBackground),q&&p&&(q.x=u-12)),i.add({_75o:q,tab:M,startY:s,endY:s+w,height:w}),s+=w+k}),S._23Q=K(0,s-k),P){var U=P.position;S._10Q(t,P.tab,0,P.startY,d,P.height,S._moveBackground),kh(t,0,U,d,1,S._insertColor)}t.restore(),S.ty(S.ty())}else{S._9o&&(W.y=0,kl(S._8o.getView(),W)),Vc(A,u,w);var t=on(A),L=0;if(fd(t,S.tx(),0,1),t.clearRect(0,0,u,w),i.clear(),j._roots.each(function(x){var l,Z=S._9Q(x);P&&P.tab===x||(l=S._10Q(t,x,L,0,Z,w,S._tabBackground),l&&g&&(l.y=$-w)),i.add({_75o:l,tab:x,startX:L,endX:L+Z,width:Z}),L+=Z+k}),S._64I=K(0,L-k),P){var U=P.position;S._10Q(t,P.tab,P.startX,0,P.width,w,S._moveBackground),vc(t,S._insertColor,U,0,w)}t.restore(),S.tx(S.tx())}for(var N=[],Y=y.children,D=0;D<Y.length;D++){var Z=Y[D],G=Z._tab_;G&&!j.contains(G)&&N.push(Z)}N.forEach(function(Z){y.removeChild(Z)})}});var uf=function(n){this.tv=n,this.addListeners()};jf(uf,b,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(v){this.handleScroll(v,10*(v.wheelDelta/40))},handle_DOMMouseScroll:function(b){this.handleScroll(b,10*-b.detail)},handleScroll:function(P,v){ir(P);var T=this.tv,k=T._tabPosition;!T._40o()||k!==Oq&&k!==vm||T.tx(this.tv.tx()+v),!T._41o()||k!==X&&k!==a&&k!==X+"-vertical"&&k!==a+"-vertical"||T.ty(this.tv.ty()+v)},_8Q:function(v){var R,x,B=this.tv,E=B._tabPosition,m=B._7o;
if(E===Oq||E===vm){var q=B.lp(v).x;for(R=0;R<m.size();R++)if(x=m.get(R),x.startX<=q&&q<=x.endX)return x}else if(E===X||E===a||E===X+"-vertical"||E===a+"-vertical"){var d=B.lp(v).y;for(R=0;R<m.size();R++)if(x=m.get(R),x.startY<=d&&d<=x.endY)return x}return L},isClickable:function(s){var E=this.tv,r=E._tabPosition,t=this._73o=this._8Q(s);return!E._40o()||r!==Oq&&r!==vm?!E._41o()||r!==X&&r!==a&&r!==X+"-vertical"&&r!==a+"-vertical"?t&&(!t.tab.isDisabled()||E.isMovable()):!0:!0},handle_mousemove:function(s){var L=this;rp?L._74o=L._8Q(s):L.getView().style.cursor=L.isClickable(s)?Nj:""},handle_mousedown:function(m){this.handle_mousemove(m),this.handle_touchstart(m)},handle_touchstart:function(J){var R=this,d=R.tv,y=d._tabPosition;ir(J),R.isClickable(J)&&(y===Oq||y===vm?(R.x=vo(J).x,R.lp=d.lp(J),R.tx=d.tx()):(R.y=vo(J).y,R.lp=d.lp(J),R.ty=d.ty()),dc(R,J))},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},handleWindowTouchMove:function(q){var h,j=this,m=j.tv,k=m._tabPosition,G=j._73o;if(k===Oq||k===vm){if(h=vo(q).x-j.x,!j._25o&&!j.moving&&M(h)>2&&(m._40o()&&!Yq(q)?j._25o=1:G&&m.isMovable()&&(j.moving=1)),j._25o)m.tx(j.tx+h);else if(j.moving){var w=j.lp.x+h,F=m._tabGap/2;m._7o.each(function(R){var f=R.endX,E=w-R.startX<f-w;w>=R.startX&&f>=w&&m._7Q({tab:G.tab,startX:G.startX+h,width:G.width,front:E,insertTab:R.tab,position:E?K(0,R.startX-F):C(m._64I,f+F)})})}}else if(h=vo(q).y-j.y,!j._25o&&!j.moving&&M(h)>2&&(m._41o()&&!Yq(q)?j._25o=1:G&&m.isMovable()&&(j.moving=1)),j._25o)m.ty(j.ty+h);else if(j.moving){var l=j.lp.y+h,F=m._tabGap/2;m._7o.each(function(Y){var R=Y.endY,c=l-Y.startY<R-l;l>=Y.startY&&R>=l&&m._7Q({tab:G.tab,startY:G.startY+h,height:G.height,front:c,insertTab:Y.tab,position:c?K(0,Y.startY-F):C(m._23Q,R+F)})})}},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handleWindowTouchEnd:function(){var S=this,n=S.tv,l=n._tabPosition,c=n.getTabModel(),B=c._roots,h=S._73o;if(S.moving){var f=n._23o;if(f&&f.insertTab!==f.tab){var t=f.tab,W=B.remove(t),s=B.indexOf(f.insertTab);s>=0&&(f.front||s++,s<=B.size()&&(B.add(t,s),c._38I(t,W,s)))}n._7Q(L),delete S.moving}else if(!S._25o&&h){t=h.tab;var E=S._74o;if(!E||E.tab===t)if(!t.isDisabled()&&lc(h._75o,S.lp)){var K=B.indexOf(t);c.remove(t),n.onTabClosed(t,K)}else t.isDisabled()||n._8o===t||c.sm().ss(t)}S._25o=S._73o=S._74o=l===Oq||l===vm?S.x=S.lp=S.tx=L:S.y=S.lp=S.ty=L}}),dd.PropertyView=function(f){var Q=this;Q._view=lo(1),Q._canvas=Dj(Q._view),Dg(Q._view,Q._79O=lo()),Q._rows=new Ml,Q._28o=new Ml,Q._26o={},Q._26Q={};var T=Q._propertyModel=new Ko,m=Q.ivm;T.mm(m,Q),T.md(m,Q),T.mh(m,Q),Q.dm(f?f:new Ko),new ih(Q)},mq("PropertyView",b,{ms_ac:[fb,Yi,Uh,Qr,gq,"categorizable",Zn,dk,Ab,Mm,Bn,dh,li,Vg,"selectRowIndex",Aq,"background",op,zq,Dm,yo,fs],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Hp,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Gl,_background:h.propertyViewBackground,_expandIcon:h.propertyViewExpandIcon,_collapseIcon:h.propertyViewCollapseIcon,_scrollBarColor:ln,_scrollBarSize:dr,_autoHideScrollBar:nm,_selectBackground:h.propertyViewSelectBackground,_rowHeight:Pn,_rowLineVisible:h.propertyViewRowLineVisible,_rowLineColor:h.propertyViewRowLineColor,_10I:.5,_columnLineVisible:h.propertyViewColumnLineVisible,_columnLineColor:h.propertyViewColumnLineColor,_labelColor:h.propertyViewLabelColor,_labelSelectColor:h.propertyViewLabelSelectColor,_labelFont:h.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(_){0>_&&(_=0),_>1&&(_=1);var q=this,d=q._10I;q._10I=_,q.fp("columnPosition",d,_)},getPropertyName:function(M){return M.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(k,x,v){return v===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(M,r){return r===this._selectRowIndex?this._labelSelectColor:M.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(B){var l=this.getHeight()-this._59I;return l>B&&(B=l),B>0?0:c(B)},isExpanded:function(K){if(!K)return!0;var w=this._26o[K];return w?w.isExpanded:!(this._26Q[K]===!1)},toggle:function(X){var Q=this;Q.isExpanded(X)?Q.collapse(X):Q.expand(X)},expandAll:function(){this.validate();for(var Y in this._26o)this.expand(Y)},expand:function(Y){if(Y&&Y!==Zp){var g=this,G=g._26o[Y];G&&!G.isExpanded&&(G.isExpanded=!0,g.onExpanded(Y),g.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var J in this._26o)this.collapse(J)},collapse:function(u){if(u&&u!==Zp){var V=this,e=V._26o[u];e&&e.isExpanded&&(e.isExpanded=!1,V.onCollapsed(u),V.ivm())}},onCollapsed:function(){},getCategoryName:function(V){if(!this.isCategorizable())return Zp;var H=V.getCategoryName();return H?H:Zp},getPropertyModel:function(){return this._propertyModel},setDataModel:function(b){var X=this,s=X._dataModel;s!==b&&(s&&(s.umd(X.handlePropertyChange,X),X._3o||s.sm().ums(X.ivm,X)),X._dataModel=b,b.md(X.handlePropertyChange,X),X._3o?X._3o._21I(b):b.sm().ms(X.ivm,X),X.fp(Ki,s,b))},isVisible:function(s){return this._visibleFunc?this._visibleFunc(s):!0},onPropertyChanged:function(U){var $=this,M=U.property;bj[M]?$.ivm():$.iv(),M===qc&&$._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:rk},handlePropertyChange:function(E){this._27o===E.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var c=this;c._96I||(c.setSelectRowIndex(-1),c._96I=1,c.iv())},redraw:function(){this.iv()},validateModel:function(){var S=this,C=S._rows,j=S._28o,U={},H=new Ml,J=S._27o;S.updateCurrentData(),J!==S._27o&&S.endEditing(),C.clear(),j.clear(),S.getRawProperties().each(function(G){if(S.isVisible(G)){H.add(G);var J=S.getCategoryName(G);U[J]||(j.add(J,J===Zp?0:Y),U[J]={isExpanded:S.isExpanded(J),properties:new Ml})}}),S._sortFunc&&H.sort(S._sortFunc);for(var e in S._26o)S._26Q[e]=S.isExpanded(e);S._26o=U,j.each(function(G){G!==Zp&&C.add(G);var s=U[G];s.isExpanded&&H.each(function(I){S.getCategoryName(I)===G&&(s.properties.add(I),C.add({property:I,data:S._27o}))},S)})},validateImpl:function(){var q=this;q._76o(),q._96I&&(q.validateModel(),delete q._96I);var s=q._canvas,E=q.getWidth(),T=q.getHeight(),h=-q.ty(),R=q._rowHeight,c=q._indent,m=E-c,G=q._rows,a=G.size(),N=q._9I=c+m*q._10I,n=q._59I=a*R;Vc(s,E,T),q._29I={x:0,y:h,width:E,height:T},q._31I=F(h/R),q._14I=k((h+T)/R),q._31I<0&&(q._31I=0),q._14I>a&&(q._14I=a);var i,p=on(s),C=q._background;fd(p,0,-h,1),p.beginPath(),p.rect(0,h,E,T),p.clip(),p.clearRect(0,h,E,T),q._93db(p),C&&kh(p,0,0,c,n,C);for(var U=q._31I;U<q._14I;U++){var r=G.get(U),h=R*U;if(dn(r))C&&kh(p,c,h,m,R,C),i=tm(q.isExpanded(r)?q._expandIcon:q._collapseIcon),i&&rj(p,i,am,0,h,c,R),p.save(),p.beginPath(),p.rect(c,h,m,R),p.clip(),q.drawCategoryName(p,r,U,c,h,m,R),p.restore();else{var t=r.property,f=r.data,i=tm(t.getIcon()),I=q._selectRowIndex===U?q.getSelectBackground():L;if(i&&rj(p,i,am,0,h,c,R),I&&kh(p,c,h,m,R,I),p.save(),p.beginPath(),p.rect(c,h,N-c,R),p.clip(),q.drawPropertyName(p,t,U,c,h,N-c,R),p.restore(),!q.isEditing(f,t)){var x=N+1,A=E-N-1;p.save(),p.beginPath(),p.rect(x,h,A,R),p.clip(),q._87o(q.drawPropertyValue(p,t,q.getValue(f,t),U,x,h,A,R,f),U,x,h,A,R),p.restore()}}q._rowLineVisible&&kh(p,c,h+R-1,m,1,q._rowLineColor)}q._columnLineVisible&&(kh(p,N,0,1,n,q._columnLineColor),kh(p,E-1,0,1,n)),q._92db(p),q._93I(),p.restore(),q.ty(q.ty())},drawCategoryName:function(M,x,C,X,G,r,h){Xj(M,x,this.getCategoryFont(x),this.getCategoryColor(x),X,G,r,h)},drawPropertyName:function(h,P,T,X,_,Y,v){return P.drawPropertyName?(P.drawPropertyName(h,P,T,X,_,Y,v,this),void 0):(Xj(h,this.getPropertyName(P),this.getPropertyFont(P,T),this.getPropertyColor(P,T),X,_,Y,v),void 0)},drawPropertyValue:function(P,s,Q,Z,E,N,n,Y,h){return s.drawPropertyValue?s.drawPropertyValue(P,s,Q,Z,E,N,n,Y,h,this):(js(P,Q,s,this.getLabelFont(s,Q,Z),this.getLabelColor(s,Q,Z),E,N,n,Y,h,this),void 0)},isPropertyEditable:function(E){return E.isEditable()&&this.isEditable()},setProperties:function(E){this._propertyModel.clear(),this.addProperties(E)},addProperties:function(B){if(B){var v=this._propertyModel;B.forEach(function(n){if(!(n instanceof fr)){var H=Ke(n.className);n=gb(H?H:fr,n)}v.add(n)})}},getRowIndexAt:function(f){var Y=this,d=F(Y.lp(f).y/Y._rowHeight);return d>=0&&d<Y._rows.size()?d:-1},getPropertyAt:function(S){var f=this,o=f.getRowIndexAt(S);return o>=0?f._rows.get(o).property:L},getToolTip:function(I){var P=this,p=P.getPropertyAt(I),O=P._27o;return p&&O?p.getToolTip(O,P._9I<P.lp(I).x,P):L}});var ih=function(W){this.pv=W,this.addListeners()};jf(ih,b,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(R){this.getView().style.cursor=R},clear:function(){var l=this;l._62O=l.cp=l.ty=l.p=L,l.setCursor(z)},handle_mousedown:function(f){this.handle_touchstart(f)},handle_touchstart:function(P){var x=this,e=x.pv;ir(P),e.setFocus(P)&&(Gg(P)?(x.cp=vo(P),x.ty=e.ty(),x.p=e.getColumnPosition(),x.handle_touchmove(P)):e.setSelectRowIndex(e.getRowIndexAt(P)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(P){this.handle_touchend(P)},handle_touchend:function(d){var S=this;if(S.cp&&!S._62O){var t=S.pv,P=t.lp(d),p=P.x,A=P.y,M=t._indent,K=t.getRowIndexAt(d),Z=t._9I;if(K>=0){var s=t._rowHeight,r=s*K,c=t._rows.get(K),x=c.property;if(dn(c))tm(t.isExpanded(c)?t._expandIcon:t._collapseIcon)&&p>=0&&M>=p&&A>=r&&r+s>=A?t.toggle(c):_e(d)&&t.toggle(c);else if(p>Z&&t.isPropertyEditable(x)){var I={x:Z+1,y:r,width:t.getWidth()-Z-1,height:s},f={x:I.x+t.tx(),y:I.y+t.ty(),width:I.width,height:I.height},C=0,a=t._29I;I.y<a.y?C=I.y-a.y:I.y+s>a.y+a.height&&(C=I.y+s-a.y-a.height),C&&(t.ty(t.ty()-C),f.y-=C),t.beginEditing({data:c.data,property:x,value:t.getValue(c.data,x),event:d,rect:I,editorRect:f,view:t})}}t.setSelectRowIndex(K)}S.clear()},handleWindowMouseMove:function(Z){this.handleWindowTouchMove(Z)},handleWindowTouchMove:function(d){var S=this,L=S.pv,U=S.ty,x=S.cp,Z=vo(d),M=S._62O;if("p"===M)L.setTranslateY(U+Z.y-x.y);else if("c"===M){var Y=L.getWidth()-L._indent;if(Y>16){var $=S.p-(x.x-Z.x)/Y,v=16/Y;v>$&&($=v),$>1-v&&($=1-v),L.setColumnPosition($)}}else"s"===M&&L.setTranslateY(U+(x.y-Z.y)*L._59I/L._29I.height)},handle_mousemove:function(X){this.handle_touchmove(X)},handle_touchmove:function(R){if(!rp&&Gg(R)){var j=this,s=j.pv,k=M(s.lp(R).x-s._9I)<=(S?8:3);j.cp?j._62O||(k?(j._62O="c",dc(j)):M(vo(R).y-j.cp.y)>=2&&(j._62O=j.isV(R)?"s":"p",dc(j))):(k?j.setCursor(xc):j.setCursor(z),j.isV(R)&&s._43o())}},isV:function(u){var F=this.pv,b=F._29I;return F._41o()&&b.x+b.width-F.lp(u).x<vi},handle_mousewheel:function(s){this.handleScroll(s,s.wheelDelta/40)},handle_DOMMouseScroll:function(v){2===v.axis&&this.handleScroll(v,-v.detail)},handleScroll:function(m,z){var C=this.pv;ir(m),C.endEditing(),C.translate(0,z*C.getRowHeight())},handle_keydown:function(Z){var u=this.pv,d=u._rows.size(),g=u._selectRowIndex+(Xd(Z)?-1:1);(Xd(Z)||Cp(Z))&&(0>g&&(g=0),g>=d&&(g=d-1),u.setSelectRowIndex(g))}}),dd.ListView=function(E){this._5o(E),new Ac(this)},mq("ListView",b,{ms_ac:[fb,Yi,Uh,op,Zn,zq,Dm,dk,Ab,dh,li,Vg,Re,Aq],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Gl,_rowHeight:Pn,_rowLineVisible:h.listViewRowLineVisible,_rowLineColor:h.listViewRowLineColor,_scrollBarColor:ln,_scrollBarSize:dr,_autoMakeVisible:Rc,_autoHideScrollBar:nm,_selectBackground:h.listViewSelectBackground,_labelColor:h.listViewLabelColor,_labelSelectColor:h.listViewLabelSelectColor,_labelFont:h.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(F){var E=this,N=E._checkMode;E._checkMode=F,E.fp(Te,N,F)},drawRow:function(e,U,V,c,W,L,B){var k=this,R=0,m=k._indent,Z=k.getIconWidth(U);k.drawRowBackground(e,U,V,c,W,L,B),k._checkMode&&(Sk(e,k.getCheckIcon(U),R+m/2,W+B/2,U,k),R+=m),k.drawIcon(e,U,R,W,Z,B),k.drawLabel(e,U,R+Z,W,B)}});var Ac=function(L){this.list=L,this.addListeners()};jf(Ac,b,{ms_listener:1,getView:function(){return this.list._view},clear:function(v){var B=this;v&&"d"===B._62O&&B.list.handleDragAndDrop(v,"end"),B._62O=B.cp=B.tx=B.ty=L},handle_mousedown:function(Y){this.handle_touchstart(Y)},handle_touchstart:function(C){var k=this,v=k.list;if(ir(C),v.setFocus(C))if(k.cp=vo(C),k.tx=v.tx(),k.ty=v.ty(),Gg(C))k.isV(C)||k.isH(C)||!v.handleDragAndDrop||v.handleDragAndDrop(C,"prepare");else{var z=v.getDataAt(C);z&&k._33o(C,z),k.clear(C)}},handleWindowMouseUp:function(m){this.clear(m)},handleWindowTouchEnd:function(g){this.clear(g)},handle_mouseup:function(H){this.handle_touchend(H)},handle_touchend:function($){var t=this,u=t.list;if(t.cp&&!t._62O){var S=u.getDataAt($);S&&(u.isCheckMode()?t._34o($,S):t._33o($,S),_e($)?u.onDataDoubleClicked(S,$):u.onDataClicked(S,$))}t.clear($)},handleWindowMouseMove:function(C){this.handleWindowTouchMove(C)},handleWindowTouchMove:function(e){var d=this,u=d.list,Q=d._62O,C=d.tx,J=d.ty,X=d.cp,k=vo(e),x=u._29I;"p"===Q?u.setTranslate(C+k.x-X.x,J+k.y-X.y):"v"===Q?u.ty(J+(X.y-k.y)*u._59I/x.height):"h"===Q?u.tx(C+(X.x-k.x)*u._91I/x.width):"d"===Q&&u.handleDragAndDrop(e,"between")},handle_mousemove:function(f){this.handle_touchmove(f)},handle_touchmove:function(q){if(!rp&&Gg(q)){var B=this,T=B.list,U=B.isV(q),A=B.isH(q);if(B.cp){if(!B._62O){if(Oh(vo(q),B.cp)<2)return;U?B._62O="v":A?B._62O="h":T.handleDragAndDrop?(B._62O="d",T.handleDragAndDrop(q,"begin")):B._62O="p",dc(B)}}else U&&T._43o(),A&&T._42o()}},isV:function(S){var e=this.list,w=e._29I;return e._41o()&&w.x+w.width-e.lp(S).x<vi},isH:function(Z){var P=this.list,n=P._29I;return P._40o()&&n.y+n.height-P.lp(Z).y<vi},handle_mousewheel:function(f){this.handleScroll(f,f.wheelDelta/40,f.wheelDelta!==f.wheelDeltaX)},handle_DOMMouseScroll:function(u){this.handleScroll(u,-u.detail,1)},handleScroll:function(E,J,w){var y=this.list;ir(E),y.endEditing&&y.endEditing(),w&&y._41o()?y.translate(0,J*y.getRowHeight()):y._40o()&&y.translate(10*J,0)},handle_keydown:function(F){var y,L=this.list,A=L.sm(),l=L._rows,s=l.size();if(Ei(F))L.selectAll();else if($g(F))L.handleDelete&&L.handleDelete(F);else if(Dk(F))L.isCheckMode()&&(y=L.getFocusData(),y&&L.checkData(y));else if(Xd(F)||Cp(F)){var m=L.isCheckMode();if(y=m?L.getFocusData():A.ld()){var j=L.getRowIndex(y);j>=0&&(Xd(F)?0!==j&&(y=l.get(j-1),m?L.setFocusData(y):A.ss(y)):j!==s-1&&(y=l.get(j+1),m?L.setFocusData(y):A.ss(y)))}else s>0&&(y=l.get(0),m?L.setFocusData(y):A.ss(y))}},_34o:function(A,J){var m=this.list,z=m.lp(A).x;return z>=0&&z<=m._indent?(m.checkData(J),void 0):(m.setFocusData(J),void 0)},_33o:function(K,c){var k=this.list,D=k.sm(),T=D.ld();if(Yq(K))k.isSelected(c)?D.rs(c):D.as(c);else if(Cd(K))if(T)for(var p=k.getRowIndex(T),B=k.getRowIndex(c);p!==B;)p+=B>p?1:-1,D.as(k._rows.get(p));else D.ss(c);else(Gg(K)||!D.contains(c))&&D.ss(c)}}),dd.TreeView=function(i){var q=this;q._35o(),q._5o(i),new xh(q)},mq("TreeView",b,{ms_ac:[fb,Yi,Uh,"rootVisible",Te,"rootData",dk,Ab,dh,li,Vg,Zn,op,zq,Dm,Mm,Bn,Re,Aq,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:L,_indent:Gl,_rowHeight:Pn,_rowLineVisible:h.treeViewRowLineVisible,_rowLineColor:h.treeViewRowLineColor,_scrollBarColor:ln,_scrollBarSize:dr,_autoHideScrollBar:nm,_expandIcon:h.treeViewExpandIcon,_collapseIcon:h.treeViewCollapseIcon,_autoMakeVisible:Rc,_selectBackground:h.treeViewSelectBackground,_labelColor:h.treeViewLabelColor,_labelSelectColor:h.treeViewLabelSelectColor,_labelFont:h.treeViewLabelFont,drawRow:function(M,h,U,T,y,o,C){var l=this;l.drawRowBackground(M,h,U,T,y,o,C),l._97I(M,h,U,0,y,o,C)}});var xh=function($){Xc(xh,this,[$])};jf(xh,Ac,{toggle:function(l,Z,U,T){var h=this.list,B=h.lp(l).x;if(tm(h.getToggleIcon(Z))){var C=U*T;if(B>=C&&C+U>=B)return h.toggle(Z),!0}return _e(l)?(h.toggle(Z),!0):!1},_34o:function(h,e){var i=this.list,X=i.lp(h).x,B=i._levelMap[e._id],Q=i._indent,D=Q*(B+1);return X>=D&&D+Q>=X?(i.checkData(e),void 0):(this.toggle(h,e,Q,B)||i.setFocusData(e),void 0)},_33o:function(H,P){var K=this,V=K.list;K.toggle(H,P,V._indent,V.getLevel(P))||xh.superClass._33o.call(K,H,P)},handle_keydown:function(a){if(bc(a)||Zf(a)){var H=this.list,W=H._rows,D=H.isCheckMode(),r=H.sm(),G=D?H.getFocusData():r.ld();G?G.hasChildren()&&(bc(a)?H.collapse(G):H.expand(G)):W.size()>0&&(G=W.get(0),D?H.setFocusData(G):r.ss(G))}else xh.superClass.handle_keydown.call(this,a)}});var ap=dd.TableView=function(C){this._98I(),this._5o(C),new Md(this)};mq("TableView",b,{ms_ac:[fb,Yi,Uh,"sortMode",Qr,gq,op,zq,Dm,yo,fs,"sortColumn",dk,Ab,dh,li,Vg,Re,Aq],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Mk,_editable:!0,_batchEditable:!1,_rowHeight:Pn,_rowLineVisible:h.tableViewRowLineVisible,_rowLineColor:h.tableViewRowLineColor,_columnLineVisible:h.tableViewColumnLineVisible,_columnLineColor:h.tableViewColumnLineColor,_scrollBarColor:ln,_scrollBarSize:dr,_autoHideScrollBar:nm,_autoMakeVisible:Rc,_selectBackground:h.tableViewSelectBackground,_labelColor:h.tableViewLabelColor,_labelSelectColor:h.tableViewLabelSelectColor,_labelFont:h.tableViewLabelFont,getCheckColumn:function(){var J=this;if(!J._31o){var b=J._31o=new Ji;b.setEditable(!0),b.setWidth(40),b.getValue=J.getCheckColumValue,b.drawCell=J.drawCheckColumnCell}return J._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(d){var K=this,U=K._39o,E=K.getCheckColumn();d!==K.isCheckMode()&&(d?U.add(E,0):U.remove(E),K.fp(Te,!d,d))},getCheckColumValue:function(b,I,j){return j.isSelected(b)},drawCheckColumnCell:function(e,D,M,o,H,T,Z,C,y){Sk(e,y.getCheckIcon(D),H+Z/2,T+C/2,D,y)}});var Md=function(x){Xc(Md,this,[x])};jf(Md,Ac,{_34o:function(z,r){var M=this.list,h=M._31o;if(M.isCellEditable(r,h)){var I=M._3Q(h),v=M.lp(z).x;if(I&&v>=I.startX&&v<I.startX+h.getWidth())return M.checkData(r),void 0}M.setFocusData(r),M._37O(r,z)},_33o:function(W,q){Md.superClass._33o.apply(this,arguments),this.list._37O(q,W)}});var Qc=dd.TreeTableView=function(J){var R=this,N=R._4o=new Ji;R._35o(),R._98I(),R._5o(J),N.setDisplayName("Name"),N.setEditable(!0),N.setWidth(180),N.drawCell=Sh,N.getValue=le,R._39o.add(N),new bg(R)},Sh=function(T,x,F,l,t,G,e,D,H){H._97I(T,x,F,t,G,e,D)},le=function(x,l,R){return R.getLabel(x)};mq("TreeTableView",b,{ms_ac:[fb,Yi,Uh,"sortMode",Qr,gq,Zn,Te,"rootData","rootVisible",dk,Ab,"sortColumn",Mm,Bn,dh,li,Vg,Re,Dm,op,zq,yo,fs,Aq,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Mk,_checkMode:L,_editable:!0,_batchEditable:!1,_indent:Gl,_rowHeight:Pn,_rowLineVisible:h.treeTableViewRowLineVisible,_rowLineColor:h.treeTableViewRowLineColor,_columnLineVisible:h.treeTableViewColumnLineVisible,_columnLineColor:h.treeTableViewColumnLineColor,_expandIcon:h.treeTableViewExpandIcon,_collapseIcon:h.treeTableViewCollapseIcon,_scrollBarColor:ln,_scrollBarSize:dr,_autoHideScrollBar:nm,_autoMakeVisible:Rc,_selectBackground:h.treeTableViewSelectBackground,_labelColor:h.treeTableViewLabelColor,_labelSelectColor:h.treeTableViewLabelSelectColor,_labelFont:h.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var bg=function(p){Xc(bg,this,[p])};jf(bg,Ac,{_34o:function(B,q){var m=this.list,s=m._4o,Q=m._3Q(s),H=m.lp(B).x;if(Q){var h=m._indent,l=Q.startX+h*m.getLevel(q);if(tm(m.getToggleIcon(q))&&H>=l&&l+h>=H)return m.toggle(q),void 0;if(m.isCellEditable(q,s)&&(l+=h,H>=l&&l+h>=H))return m.checkData(q),void 0}m.setFocusData(q),m._37O(q,B)},_33o:function(L,E){var Z=this.list,i=Z.lp(L).x;if(tm(Z.getToggleIcon(E))){var r=Z._3Q(Z._4o);if(r){var n=Z._indent,X=r.startX+n*Z.getLevel(E);if(i>=X&&X+n>=i)return Z.toggle(E),void 0}}bg.superClass._33o.apply(this,arguments),Z._37O(E,L)}});var ts=dd.TableHeader=function(Z){var j=this,B=j._view=lo(1),v=j._39o=Z.getColumnModel(),O=j.iv;j.tv=j._tableView=Z,j._60I=new Ml,j._canvas=Dj(B),B.style.background=h.tableHeaderBackground||"",B.style.height=Uq+Wk,v.mm(O,j),v.md(O,j),v.mh(O,j),Z.mp(function(h){Pq[h.property]&&j.iv()},j),new Ri(j),j.iv()};mq("TableHeader",b,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",fb,Uh,Zn,"moveBackground","insertColor",yo,fs,"resizable","movable"],_checkIcon:em,_movable:!0,_resizable:!0,_labelColor:h.tableHeaderLabelColor,_labelFont:h.tableHeaderLabelFont,_columnLineColor:h.tableHeaderColumnLineColor,_columnLineVisible:h.tableHeaderColumnLineVisible,_sortDescIcon:h.tableHeaderSortDescIcon,_sortAscIcon:h.tableHeaderSortAscIcon,_moveBackground:h.tableHeaderMoveBackground,_insertColor:h.tableHeaderInsertColor,_indent:Gl,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(C){return C.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(A){return A.getColor()||this._labelColor},getLabelAlign:function(T){return T._align},onPropertyChanged:function(){this.iv()},_5Q:function(i){this._61I=i,this.iv()},getLogicalPoint:function(Q){return lm(Q,this._canvas,this.tv.tx())},validateImpl:function(){var M=this,D=M._canvas,k=M.getWidth(),p=M.getHeight(),A=M.tv,I=M._60I,Y=M._61I,E=-A.tx(),o=0;(k!==D.clientWidth||p!==D.clientHeight)&&Vc(D,k,p),I.clear(),M._39o._roots.each(function(e){if(e.isVisible()){var C=o+e.getWidth();E+k>=o&&C>=E&&I.add({column:e,startX:o}),o=C}});var $=on(D);if(fd($,-E,0,1),$.beginPath(),$.rect(E,0,k,p),$.clip(),$.clearRect(E,0,k,p),I.each(function(O){var g=O.column,K=O.startX,u=g.getWidth();u>0&&($.save(),$.beginPath(),$.rect(K,0,u,p),$.clip(),Y&&Y.column===g||M.drawColumn($,g,K,0,u,p),M._columnLineVisible&&kh($,K+u-1,0,1,p,M._columnLineColor),$.restore())}),Y){var O=Y.column,o=Y.startX,r=Y.position,e=O.getWidth();$.save(),$.beginPath(),$.rect(o,0,e,p),$.clip(),$.fillStyle=M._moveBackground,$.fill(),M.drawColumn($,O,o,0,e,p),$.restore(),vc($,M._insertColor,r,0,p)}$.restore()},_6Q:function(i){var t=this.tv;return t._31o===i&&t.sm().getSelectionMode()===D},drawColumn:function(k,Q,R,x,O,w){var f=this,C=f.tv,n=tm(Q.getIcon()),l=f.getLabelAlign(Q);if(f._6Q(Q)){var q=tm(f._checkIcon);Sk(k,q,R+O/2,x+w/2,Q,f)}else{var E=f.getLabel(Q),B=f.getLabelFont(Q),A=f.getLabelColor(Q),z=bd(B,E).width,I=n?f._indent:0;l===X?(n&&rj(k,n,am,R,x,I,w),Xj(k,E,B,A,R+I,x,O,w,X)):l===a?(n&&rj(k,n,am,R+O-z-I,x,I,w),Xj(k,E,B,A,R,x,O,w,a)):(n&&rj(k,n,am,R+(O-z-I)/2,x,I,w),Xj(k,E,B,A,R+(O-z+I)/2,x,0,w,X))}if(Q.isSortable()&&C.getSortColumn()===Q&&(n=tm(Q.getSortOrder()===np?f._sortAscIcon:f._sortDescIcon))){var b=Ge(n,Q)/2+2;Sk(k,n,l===a?R+b:R+O-b,x+w/2,Q,C)}}});var Ri=function(n){var p=this;p.th=n,p.tv=n._tableView,p.addListeners()};jf(Ri,b,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(s){this.getView().style.cursor=s},handle_mousemove:function(x){if(!rp){var N=this;delete N._29o,N.setCursor(z);for(var r=N.th,A=r._60I,$=r.lp(x).x,W=A.size()-1;W>=0;W--){var f=A.get(W),F=f.column,D=f.startX+F.getWidth();if(r.isResizable()&&M(D-$)<=(S?10:3))return N._29o=f,N.setCursor(xc),void 0;(F.isSortable()||r.isMovable()||F===N.tv.getCheckColumn())&&$>=f.startX&&D>=$&&F.getWidth()>0&&(N._29o=f,N.setCursor(Nj))}}},handle_mousedown:function(k){this.handle_touchstart(k)},handle_touchstart:function(N){var _=this;ir(N),_.tv.endEditing(),_.handle_mousemove(N),_._29o&&(_.x=vo(N).x,_.lx=_.th.lp(N).x,_.w=_._29o.column.getWidth(),dc(_,N))},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},handleWindowTouchMove:function(x){var r=this,R=r.th,H=r.getView().style.cursor,d=r._29o,g=vo(x).x-r.x;if(r.resizing||r.moving||(H===xc?r.resizing=1:R.isMovable()&&H===Nj&&M(g)>2&&(r.moving=1)),r.resizing)d.column.setWidth(r.w+g);else if(r.moving){var k=r.lx+g;R._60I.each(function(J){var D=J.startX,u=D+J.column.getWidth();if(k>=D&&u>=k){var $={column:d.column,startX:d.startX+g,front:u-k>k-D,insertColumn:J.column};$.position=$.front?D:u,R._5Q($)}})}},_16Q:function(U,v){var C=this,s=C.tv,o=C.th,z=o._checkIcon;if(o._6Q(U)){var i=tm(z),A=C.lx,R=U.getWidth(),L=Ge(i,U);if(A>=v+R/2-L&&v+R/2+L>=A){o.setCheckIcon(z===Vb?em:Vb);var W=s.sm(),$=s._rows;return z===Vb?W.rs($):W.ss($),s.onCheckColumnClicked(U),!0}}return!1},handleWindowMouseUp:function(p){this.handleWindowTouchEnd(p)},handleWindowTouchEnd:function(G){var O=this,p=O.tv,s=O.th,M=O._29o;if(O.moving){var h=s._61I;if(h&&h.insertColumn!==h.column){var u=h.column,A=p.getColumnModel()._roots,$=A.remove(u),_=A.indexOf(h.insertColumn);_>=0&&(h.front||_++,_<=A.size()&&(A.add(u,_),p.getColumnModel()._38I(u,$,_)))}s._5Q(L),delete O.moving}else if(!O.resizing&&M){u=M.column;var l=s.lp(G).x,W=M.startX,n=!0;if(s.onColumnClicked){var R=s.onColumnClicked(u,G);R===!1&&(n=!1)}if(n&&l>=W&&l<=W+u.getWidth()&&!O._16Q(u,W)){if(u.isSortable()){var f=p.getSortMode(),c=u.getSortOrder();f===Mk?p.getSortColumn()===u?(c===Fi&&p.setSortColumn(L),u.setSortOrder(c===np?Fi:np)):p.setSortColumn(u):"bistate"===f&&(p.getSortColumn()===u?u.setSortOrder(c===np?Fi:np):p.setSortColumn(u))}p.onColumnClicked(u,G)}}O._29o=O.resizing=O.x=O.lx=O.w=L}}),dd.TablePane=function(i){this.init(new ap(i))},mq("TablePane",b,{ms_v:1,_44o:1}),dd.TreeTablePane=function(Z){this.init(new Qc(Z))},mq("TreeTablePane",b,{ms_v:1,_44o:1}),dd.Toolbar=function(D){var N=this,F=N._view=lo(1),u=F.style;u.background=h.toolbarBackground||"",u.height=eh+Wk,N._canvas=Dj(F),N._30o=new Ml,N._90I=new Ml,N.setItems(D||[]),F.handleGroupSelectedChanged=function(x){if(x.isSelected()){var J=x.getGroupId();null!=J&&N._items.forEach(function(q){var a=q.element;a&&a!==x&&a.setSelected&&a.getGroupId&&a.getGroupId()===J&&a.setSelected(!1)})}},new mp(N)},mq("Toolbar",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Wg,fb,Uh,Yi,Aq,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:h.toolbarLabelColor,_labelSelectColor:h.toolbarLabelSelectColor,_labelFont:h.toolbarLabelFont,_selectBackground:h.toolbarSelectBackground,_itemGap:h.toolbarItemGap,_separatorColor:h.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(i){var S=this.getItemInfoAt(i);return S?S.item.toolTip:L},getLabelColor:function(C){return C.selected&&C.type!==Vb&&C.type!==nd?this._labelSelectColor:this._labelColor},onPropertyChanged:function(b){this.iv(),b.property===Wg&&this._items.forEach(function(N){Go(N)})},redraw:function(){this.iv()},addItem:function(u,v){var z=this._items;v==L?z.push(u):z.splice(v,0,u),this.fp(Wg,L,z)},removeItem:function(d){if(d)for(var I=this._items,i=0;i<I.length;i++)d===I[i]&&(I.splice(i,1),this.fp(Wg,L,I))},removeItemById:function(n){if(n!=L)for(var o=this._items,D=0;D<o.length;D++)n===o[D].id&&(o.splice(D,1),this.fp(Wg,L,o))},getItemById:function(N){if(N!=L)for(var G=this._items,t=0;t<G.length;t++){var U=G[t];if(N===U.id)return U}},getItemInfos:function(){return this._30o},getItemInfoAt:function(r){var p=this,Y=0,B=p._30o,l=p.lp(r),I=l.x,v=l.y;if(v>=0&&v<=p.getHeight())for(;Y<B.size();Y++){var G=B.get(Y);if(G.startX<=I&&I<=G.endX)return G}return L},drawItem:function(u,Y,p,m,R){if(Y.visible===!1)return 0;var P=this,$=Y.disabled;$&&(u.globalAlpha=hp);var i=P.drawItemImpl(u,Y,p,m,R),r=P._itemGap;return $&&(u.globalAlpha=1),this._currentItem!==Y||"separator"===Y||Y.unfocusable||ai(u,P._separatorColor,p-r/2,0,i+r,m),i},drawItemImpl:function(p,Z,q,G,L){var r,x=this,N=x._view,D=x._itemGap,K=G/2,w=Z.type,M=Z.label,m=x.getLabelFont(Z),A=x.getLabelColor(Z),Q=Z.selected,j=tm(Z.icon),R=Ge(j,Z),u=0,P=Z.element,B=R+(M?bd(m,M).width:0);if("separator"===Z)return vc(p,x._separatorColor,q,G/4,K),1;if(P){j&&Sk(p,j,q+R/2,K),Xj(p,M,m,A,q+R,0,0,G);var h=_c(P);L||x._90I.add(h),h.parentNode!==N&&Dg(N,h),P.iv&&P.iv(),P.validate&&P.validate();var X=h.getBoundingClientRect(),n=X.width,l=h.style;return Bc(h),l.left=x.tx()+q+B+Wk,l.top=(G-X.height)/2+Wk,B+n}return w===nd?r=tm(Q?to:bb):w===Vb&&(r=tm(Q?Vb:em)),r?(u=Ge(r,Z),Sk(p,r,q+u/2,K),q+=u,B+=u):Q&&kh(p,q-D/2,0,B+D,G,x.getSelectBackground(Z)),j&&Sk(p,j,q+R/2,K),Xj(p,M,m,A,q+R,0,0,G),B},validateImpl:function(){var D=this,B=D._canvas,Q=D.getWidth(),C=D.getHeight(),q=D._30o,m=D._items;Vc(B,Q,C);var u=on(B),t=D._itemGap,J=t/2;fd(u,D.tx(),0,1),u.clearRect(0,0,Q,C);var h=D._90I;D._90I=new Ml,q.clear(),m.forEach(function(Q){var c=D.drawItem(u,Q,J,C);q.add({item:Q,startX:J,endX:J+c,width:c}),c&&(J+=c+t)}),h.each(function(M){D._90I.contains(M)||db(M)}),D._64I=K(0,J),u.restore(),D._stickToRight?(D._65O=0,u=on(B),J=Q-D._64I+t,fd(u,0,0,1),u.clearRect(0,0,Q,C),q.clear(),m.forEach(function(P){var Q=D.drawItem(u,P,J,C,!0);q.add({item:P,startX:J,endX:J+Q,width:Q}),Q&&(J+=Q+t)}),u.restore()):D.tx(D.tx())},handleClick:function(B){var Q=this,M=B.type,m=B.action,z=B.groupId,e=B.selected;B.disabled||(z!=L?e||(B.selected=!0,this._items.forEach(function(c){c.groupId===z&&B!==c&&(c.selected=!1)}),m&&B.action(B,Q)):M===Vb||"toggle"===M?(B.selected=!e,m&&B.action(B,Q)):m&&B.action(B,Q)),Nf(),Q.iv()}});var mp=function(L){this.tb=L,this.addListeners()};jf(mp,b,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(X){this.handleScroll(X,10*(X.wheelDelta/40))},handle_DOMMouseScroll:function(T){this.handleScroll(T,10*-T.detail)},handleScroll:function(U,S){ir(U);var b=this.tb;b.isScrollable()&&!b._stickToRight&&(b.tx(b.tx()+S),Hb())},handle_mousemove:function(r){var p=this;rp?p.info2=p.tb.getItemInfoAt(r):p.setItem(r)},handle_mouseout:function(q){var Q=this;q.target===Q.getView()?Q.tb.setCurrentItem(L):Q.handle_mousemove(q)},handle_mousedown:function(P){this.handle_mousemove(P),this.handle_touchstart(P)},handle_touchstart:function(V){var t=this,e=t.tb,c=V.target;(c===t.getView()||c===e._canvas)&&(ir(V),e.setFocus(V)&&(this.setItem(V),(e.isScrollable()||t.info&&!t.info.item.disabled)&&(t.x=vo(V).x,t.tx=e.tx(),dc(t,V))))},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(G){var g=this,b=g.tb;if(!b._stickToRight){var d=vo(G).x-g.x;!g._25o&&M(d)>2&&b.isScrollable()&&(g._25o=1),g._25o&&b.tx(g.tx+d)}},handleWindowMouseUp:function(g){this.handleWindowTouchEnd(g)},handleWindowTouchEnd:function(){var b=this,j=b.tb,$=b.info,M=b.info2;if(!b._25o&&$){var H=$.item;M&&M.item!==H||j.handleClick(H)}b._25o=b.x=b.tx=b.info2=L,b.setItem()},setItem:function(n){var P=this,H=P.tb,w=P.info=n?H.getItemInfoAt(n):L;H.setCurrentItem(w?w.item:L)}}),dd.BorderPane=function(){this._view=lo(1),this.iv()},mq("BorderPane",b,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(j,Z){this._12o("leftView",j),Z!=L&&this.setLeftWidth(Z)},getRightView:function(){return this._rightView},setRightView:function(Q,U){this._12o("rightView",Q),U!=L&&this.setRightWidth(U)},getTopView:function(){return this._topView},setTopView:function(s,P){this._12o("topView",s),P!=L&&this.setTopHeight(P)},getBottomView:function(){return this._bottomView},setBottomView:function(C,G){this._12o("bottomView",C),G!=L&&this.setBottomHeight(G)},getCenterView:function(){return this._centerView},setCenterView:function(h){this._12o("centerView",h)},_12o:function(e,S){var E=this,Q="_"+e,L=E._view,_=E[Q];_!==S&&(_&&(_.getView?db(_.getView()):db(_)),E[Q]=S,S&&(S.getView?Dg(L,S.getView(),1):Dg(L,S,1)),E.fp(e,_,S))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var l=this,s=l._topView,M=l._bottomView,V=l._leftView,d=l._rightView,q=l._centerView,b=l.getWidth(),N=l.getHeight(),g=0,m=0,W=b,e=N,F=0,h=0,w=0,U=0;s&&(F=l._topHeight==L?ll(s):l._topHeight,m=F),M&&(h=l._bottomHeight==L?ll(M):l._bottomHeight,e=N-h),V&&(w=l._leftWidth==L?He(V):l._leftWidth,g=w),d&&(U=l._rightWidth==L?He(d):l._rightWidth,W=b-U);
var X=K(0,W-g),r=K(0,e-m);s&&kl(s,0,0,b,F),M&&kl(M,0,e,b,h),V&&kl(V,0,m,w,r),d&&kl(d,W,m,U,r),q&&kl(q,g,m,X,r)}})}}(this,Object);