!function(O,Y){"use strict";var d="ht",j=O[d],X="innerHTML",e="className",R=null,P="px",p=j.Default,i=p.getInternal(),b="0",E=function(){return document},f=function(c){return E().createElement(c)},W=function(){return f("div")},F=function(){return f("canvas")},y=function(O,M,C){O.style.setProperty(M,C,R)},o=function(Y,l,F){p.def(j.widget[Y],l,F)},G=function(V,F){V.appendChild(F)},r=function(t,Q){t.removeChild(Q)},n=function(r,Z,z,M){r.addEventListener(Z,z,!!M)},q=function(f,X,c,d){f.removeEventListener(X,c,!!d)},l=p.isTouchable;i.addMethod(p,{menuLabelFont:(l?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),j.widget.Menu=function(O){var i=this,z=i._view=W(),S=i.$1g=new j.widget.ContextMenu,Y=f("ul");S._r=!0,S._view[e]+=" ht-widget-dropdownmenu",z[e]="ht-widget-menu",Y[e]="header",y(z,"margin",b),y(z,"padding",b),y(z,"background",p.menuBackground),y(z,"-webkit-user-select","none"),y(z,"-moz-user-select","none"),y(z,"user-select","none"),y(z,"text-align","left"),y(z,"border-bottom",p.menuSeparatorWidth+"px solid "+p.menuSeparatorColor),y(z,"cursor","default"),y(z,"overflow","auto"),y(z,"white-space","nowrap"),y(z,"font",p.menuLabelFont),y(z,"color",p.menuLabelColor),y(z,"box-sizing","border-box"),y(z,"-moz-box-sizing","border-box"),y(Y,"list-style","none"),y(Y,"margin",b),y(Y,"padding",b),y(Y,"display","inline-block"),G(z,Y),i.setItems(O),i.$2g=function(A){i.$3g(A)},i.$4g=function(L){i.$5g(L)},i.$6g=function(X){i.$7g(X)},i.$8g=function(m){i.$9g(m)},i.$9b=function(N){i.$10g(N)},i._autoShow=!0,i.setAutoShow(!1),S.afterHide=function(){i.$11g()},S.afterShow=function(){i.$12g()},q(E(),"keydown",S.$3b),i.$3b=function(u){i.$13g(u)},i.invalidate()},o("Menu",Y,{_items:R,$14g:p.menuHoverBackground,$15g:p.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(Z){var F=this;if(F.$21g=Z,F.setItems(F._items),"largeicons"===Z){for(var W=F._view.querySelectorAll(".header-item"),V=0,q=0;q<W.length;q++){var Q=W[q];V=Math.max(V,Q.clientWidth)}for(var q=0;q<W.length;q++){var Q=W[q];y(Q,"min-width",V+P)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(e){this.$22g=e;for(var r=this._view.querySelectorAll(".header-item"),l=0;l<r.length;l++){var k=r[l];y(k,"margin-left",e+P),y(k,"margin-right",e+P)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(r){this.$23g=r;for(var c=this._view.querySelectorAll(".header-item"),A=0;A<c.length;A++){var J=c[A];y(J,"margin-top",r+P),y(J,"margin-bottom",r+P)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(c){this.$24g=c,y(this._view,"text-align",c)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var v=this,e=v._enableGlobalKey;e===!1&&(n(E(),"keydown",v.$3b),v._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,q(E(),"keydown",this.$3b)},setHoverBackground:function(S){this.$14g=S},setHoverColor:function(c){this.$15g=c},setItems:function(l){var Y=this,h=Y._view,N=Y.$21g;if(Y._items=l,h.children[0][X]="",Y.$16g={},l&&l.length){for(var b=h.children[0],D=0,O=E().createDocumentFragment();D<l.length;D++){var w=l[D],r=f("li"),I=f("span");if(w.icon){var R=F();R[e]="menu-item-icon","smallicons"===N?(y(R,"height","1.2em"),y(R,"width","1.2em"),y(R,"vertical-align","middle")):(y(R,"height","32px"),y(R,"width","32px"),y(R,"display","block"),y(R,"margin","0 auto")),R.$20g=w.icon,G(r,R)}r[e]="header-item",y(r,"display","inline-block"),y(r,"vertical-align","top"),y(r,"padding","0 1.2em"),y(r,"line-height","1.8em"),"largeicons"===N&&y(r,"text-align","center"),y(r,"background-color","rgba(0,0,0,0)"),r.setAttribute("data-index",D),Y.$16g[D]=w.items,I[X]=w.label,"iconsonly"!==N&&G(r,I),G(O,r)}G(b,O)}},showDropdownMenu:function(Q){var B=this,_=B.$16g[Q],$=B.$1g,r=B._view.children[0].children[Q],Y=B.$17g;if(r&&r!==Y){Y&&B.hideDropdownMenu();var K=r.getBoundingClientRect(),H=p.getWindowInfo();B.$17g=r,$.setItems(_),$.show(K.left+H.left,K.top+K.height+H.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(p,X){var i=this,s=i._items;return s&&0!==s.length?i.$1g.getItemByProperty(p,X,s):R},$12g:function(){var q=this,r=q.$17g;r.style.background=q.$14g,r.style.color=q.$15g,q._autoShow||n(E(),l?"touchstart":"mousedown",q.$9b)},$11g:function(){var s=this,z=s.$17g;z&&(z.style.background="",z.style.color="",s.$17g=R),q(E(),l?"touchstart":"mousedown",s.$9b)},$10g:function(B){var U=this,p=U._view,H=U.$1g,V=p.children[0];!E().body.contains(p)||V.contains(B.target)||H._view.contains(B.target)||U.hideDropdownMenu()},$13g:function(c){var O=this,q=O.$1g;E().body.contains(O._view)&&q.$13b.$4b.call(q.$13b,c,O._items)},setAutoShow:function(Y){var U=this,K=U.$1g,V=U._view;U._autoShow!==Y&&(U._autoShow?(q(V,"mouseover",U.$2g),q(V,"mouseout",U.$4g),q(K._view,"mouseout",U.$4g),l||(n(V,"mouseover",U.$8g),n(V,"mouseout",U.$8g)),n(V,l?"touchstart":"mousedown",U.$6g)):(q(V,"mouseover",U.$8g),q(V,"mouseout",U.$8g),q(V,l?"touchstart":"mousedown",U.$6g),q(E(),l?"touchstart":"mousedown",U.$9b),l||(n(V,"mouseover",U.$2g),n(V,"mouseout",U.$4g),n(K._view,"mouseout",U.$4g))),U._autoShow=Y)},$3g:function(K){var d=this,b=d._view.children[0],j=K.target;if(b!==j&&b.contains(j)){for(;"header-item"!==j[e];)j=j.parentNode;d.showDropdownMenu(j.getAttribute("data-index"))}},$5g:function(u){var M=this,X=M._view.children[0],N=M.$1g,T=u.target,Q=u.relatedTarget;!X.contains(T)&&!N._view.contains(T)||X.contains(Q)||N._view.contains(Q)||M.hideDropdownMenu()},$7g:function(V){var S=this,h=S._view.children[0],E=S.$1g,D=V.target;if(p.isLeftButton(V)&&h!==D&&h.contains(D))if(l){for(;"header-item"!==D[e];)D=D.parentNode;var f=D.getAttribute("data-index"),E=S.$1g,K=S._view.children[0].children[f],X=S.$17g;E.isShowing()&&S.hideDropdownMenu(),K!==X&&S.showDropdownMenu(f)}else if(E.isShowing())S.hideDropdownMenu();else{for(;"header-item"!==D[e];)D=D.parentNode;S.showDropdownMenu(D.getAttribute("data-index"))}},$9g:function(f){var Q=this,O=Q._view,V=Q.$1g,E=f.target;if(O.contains(E)){for(var i=O.querySelectorAll(".header-item"),c=R,d=0;d<i.length;d++){var q=i[d];q.style.background="",q.style.color="","mouseover"===f.type?q.contains(E)&&(c=q):"mouseout"===f.type&&V.isShowing()&&Q.$17g===q&&(c=q)}V.isShowing()&&(c||(c=Q.$17g),Q.showDropdownMenu(c.getAttribute("data-index"))),c&&(c.style.background=Q.$14g,c.style.color=Q.$15g)}},getShowingMenuIndex:function(){var z=this.$17g;return z?z.getAttribute("data-index"):-1},addTo:function(L){var w=this,W=w._view;G(L,W),w.invalidate()},dispose:function(){var N=this,M=N._view,a=N.$1g;M&&(N._autoShow?(q(M,"mouseover",N.$2g),q(M,"mouseout",N.$4g),q(a._view,"mouseout",N.$4g)):(q(M,"mouseover",N.$8g),q(M,"mouseout",N.$8g),q(M,l?"touchstart":"mousedown",N.$6g),q(E(),l?"touchstart":"mousedown",N.$9b)),q(E(),"keydown",N.$3b),a.dispose(),M.parentNode&&r(M.parentNode,M),N._view=N.$1g=N.$16g=N._items=N.$17g=N.$2g=N.$4g=N.$6g=N.$8g=N.$9b=N.$3b=R)},$19g:function(g,q,D,R){var s=i.initContext(g);i.translateAndScale(s,0,0,1),s.clearRect(0,0,D,R),p.drawStretchImage(s,p.getImage(q),"fill",0,0,D,R),s.restore()},validateImpl:function(){var y,C,D,Z=this,A=Z._view,g=A.querySelectorAll(".menu-item-icon");for(D=0;D<g.length;D++){var x=g[D];y=x.clientWidth,C=x.clientHeight,y&&C&&(i.setCanvas(x,y,C),Z.$19g(x,p.getImage(x.$20g),y,C))}}})}(this,Object);