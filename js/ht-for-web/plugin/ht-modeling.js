!function(p,d,W){"use strict";var g="ht",N=p[g],o=null,L=Math,C=L.PI,A=L.cos,U=L.sin,e=L.abs,F=L.max,n=L.sqrt,k=1e-5,a=N.Default,s=a.def,P=a.startAnim,w=a.createMatrix,K=a.transformVec,m=a.getInternal(),c=m.addMethod,j=m.superCall,i=m.toPointsArray,V=m.createNormals,Q=m.toFloatArray,x=m.glMV,q=m.batchShape,r=m.createNodeMatrix,Y=m.getFaceInfo,b=m.transformAppend,T=m.drawFaceInfo,M=m.createAnim,R=m.cube(),B=R.is,J=R.vs,I=R.uv,D=m.ui(),v=N.Node,y=N.Shape,X="h",E="v",G="front",H="back",t="left",f="right",$="top",S="bottom",l="dw.expanded",O=".expanded",z="dw.angle",_=".angle",h=function(F,c,o){s(g+"."+F,c,o)},u=function(_,E,Q){Q?_.push(E.x,E.y):_.push(E.x,E.y,E.z)},Z=[1,0,0],Wd=function(w,H,z,R){var q,V,j,I,m=0,C=[];if(R)for(q=R.length;q>m;m+=3)V=R[m],j=R[m+1],I=R[m+2],C.push(new io([new Op([H[3*V],H[3*V+1],H[3*V+2]],Z,z?[z[2*V],z[2*V+1],0]:o),new Op([H[3*j],H[3*j+1],H[3*j+2]],Z,z?[z[2*j],z[2*j+1],0]:o),new Op([H[3*I],H[3*I+1],H[3*I+2]],Z,z?[z[2*I],z[2*I+1],0]:o)],w));else for(q=H.length;q>m;m+=3)V=m,j=m+1,I=m+2,C.push(new io([new Op([H[3*V],H[3*V+1],H[3*V+2]],Z,z?[z[2*V],z[2*V+1],0]:o),new Op([H[3*j],H[3*j+1],H[3*j+2]],Z,z?[z[2*j],z[2*j+1],0]:o),new Op([H[3*I],H[3*I+1],H[3*I+2]],Z,z?[z[2*I],z[2*I+1],0]:o)],w));return C},Dk=[t,G,f,H,$,S],Xp=Dk.concat("csg"),ic=[0,6,12,18,24,30],$m=function(x,W,g){for(var s=r(x),F=[],e=0;6>e;e++)for(var f=Dk[e],_=ic[e],b=g?W.getFaceUv(x,f):o,i=g?W.getFaceUvScale(x,f):o,R=g?W.getFaceUvOffset(x,f):o,L=0;2>L;L++){var P,h,C,y=B[_+3*L],V=B[_+3*L+1],T=B[_+3*L+2];if(g){if(b){var Y=8*e;P=[b[2*y-Y],b[2*y+1-Y],0],h=[b[2*V-Y],b[2*V+1-Y],0],C=[b[2*T-Y],b[2*T+1-Y],0]}else P=[I[2*y],I[2*y+1],0],h=[I[2*V],I[2*V+1],0],C=[I[2*T],I[2*T+1],0];i&&(P[0]*=i[0],P[1]*=i[1],h[0]*=i[0],h[1]*=i[1],C[0]*=i[0],C[1]*=i[1]),R&&(P[0]+=R[0],P[1]+=R[1],h[0]+=R[0],h[1]+=R[1],C[0]+=R[0],C[1]+=R[1])}F.push(new io([new Op(K([J[3*y],J[3*y+1],J[3*y+2]],s),Z,P),new Op(K([J[3*V],J[3*V+1],J[3*V+2]],s),Z,h),new Op(K([J[3*T],J[3*T+1],J[3*T+2]],s),Z,C)],x))}return Dg.$15n(F)},fi=function(w,H){var U,x=w.data.getAttaches();if(x&&x.each(function(S){S instanceof Zk&&S.s("attach.operation")&&(U||(U=[]),U.push(S))}),U){var v;Dk.forEach(function(K){var O=Wd(K,w[K].vs,w[K].tuv);v=v?v.concat(O):O}),v=Dg.$15n(v),U.forEach(function(x){var P=x.s("attach.operation");v[P]&&(v=v[P]($m(x,w.gv,w.csg.tuv)))}),Dk.forEach(function(E){E=w[E],E.vs=[],E.tuv&&(E.tuv=[])}),v.$19n().forEach(function(G){var C=G.$10n;if(C instanceof Zk){if(C.s("attach.cull"))return;C="csg"}for(var O=w[C],z=O.vs,E=O.tuv,i=G.$9n,e=2;e<i.length;e++)u(z,i[0].$24n),u(z,i[e-1].$24n),u(z,i[e].$24n),E&&(u(E,i[0].uv,!0),u(E,i[e-1].uv,!0),u(E,i[e].uv,!0))})}Xp.forEach(function($){var K=w[$];K.visible&&K.vs.length?(K.ns=V(K.vs),Q(K,"vs"),Q(K,"tuv")):delete w[$]}),H&&(q(w,o,H),w.clear())};c(a,{createFrameModel:function(U,E,K,n){U=U==o?.07:U,E=E==o?U:E,K=K==o?U:K,n=n?n:{};var N=n.top,z=n.bottom,q=n.left,w=n.right,S=n.front,f=n.back,m=[],P=[];return S===!0?(m.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),P.push(0,0,0,1,1,1,1,1,1,0,0,0)):S===!1||(m.push(-.5,.5,.5,-.5,-.5,.5,-.5+U,-.5,.5,-.5+U,-.5,.5,-.5+U,.5,.5,-.5,.5,.5,.5-U,.5,.5,.5-U,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-U,.5,.5,-.5+U,.5,.5,-.5+U,.5-E,.5,.5-U,.5-E,.5,.5-U,.5-E,.5,.5-U,.5,.5,-.5+U,.5,.5,-.5+U,-.5+E,.5,-.5+U,-.5,.5,.5-U,-.5,.5,.5-U,-.5,.5,.5-U,-.5+E,.5,-.5+U,-.5+E,.5),P.push(0,0,0,1,U,1,U,1,U,0,0,0,1-U,0,1-U,1,1,1,1,1,1,0,1-U,0,U,0,U,E,1-U,E,1-U,E,1-U,0,U,0,U,1-E,U,1,1-U,1,1-U,1,1-U,1-E,U,1-E)),f===!0?(m.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),P.push(1,0,0,1,1,1,0,1,1,0,0,0)):f===!1||(m.push(-.5,.5,-.5,-.5+U,-.5,-.5,-.5,-.5,-.5,-.5+U,-.5,-.5,-.5,.5,-.5,-.5+U,.5,-.5,.5-U,.5,-.5,.5,-.5,-.5,.5-U,-.5,-.5,.5,-.5,-.5,.5-U,.5,-.5,.5,.5,-.5,-.5+U,.5,-.5,.5-U,.5-E,-.5,-.5+U,.5-E,-.5,.5-U,.5-E,-.5,-.5+U,.5,-.5,.5-U,.5,-.5,-.5+U,-.5+E,-.5,.5-U,-.5,-.5,-.5+U,-.5,-.5,.5-U,-.5,-.5,-.5+U,-.5+E,-.5,.5-U,-.5+E,-.5),P.push(1,0,1-U,1,1,1,1-U,1,1,0,1-U,0,U,0,0,1,U,1,0,1,U,0,0,0,1-U,0,U,E,1-U,E,U,E,1-U,0,U,0,1-U,1-E,U,1,1-U,1,U,1,1-U,1-E,U,1-E)),q===!0?(m.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),P.push(0,0,0,1,1,1,1,1,1,0,0,0)):q===!1||(m.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+K,-.5,-.5,-.5+K,-.5,.5,-.5+K,-.5,.5,-.5,-.5,.5,.5-K,-.5,-.5,.5-K,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-K,-.5,.5,-.5+K,-.5,.5-E,-.5+K,-.5,.5-E,.5-K,-.5,.5-E,.5-K,-.5,.5,.5-K,-.5,.5,-.5+K,-.5,-.5+E,-.5+K,-.5,-.5,-.5+K,-.5,-.5,.5-K,-.5,-.5,.5-K,-.5,-.5+E,.5-K,-.5,-.5+E,-.5+K),P.push(0,0,0,1,K,1,K,1,K,0,0,0,1-K,0,1-K,1,1,1,1,1,1,0,1-K,0,K,0,K,E,1-K,E,1-K,E,1-K,0,K,0,K,1-E,K,1,1-K,1,1-K,1,1-K,1-E,K,1-E)),w===!0?(m.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),P.push(1,0,0,1,1,1,0,1,1,0,0,0)):w===!1||(m.push(.5,.5,-.5,.5,-.5,-.5+K,.5,-.5,-.5,.5,-.5,-.5+K,.5,.5,-.5,.5,.5,-.5+K,.5,.5,.5-K,.5,-.5,.5,.5,-.5,.5-K,.5,-.5,.5,.5,.5,.5-K,.5,.5,.5,.5,.5,-.5+K,.5,.5-E,.5-K,.5,.5-E,-.5+K,.5,.5-E,.5-K,.5,.5,-.5+K,.5,.5,.5-K,.5,-.5+E,-.5+K,.5,-.5,.5-K,.5,-.5,-.5+K,.5,-.5,.5-K,.5,-.5+E,-.5+K,.5,-.5+E,.5-K),P.push(1,0,1-K,1,1,1,1-K,1,1,0,1-K,0,K,0,0,1,K,1,0,1,K,0,0,0,1-K,0,K,E,1-K,E,K,E,1-K,0,K,0,1-K,1-E,K,1,1-K,1,K,1,1-K,1-E,K,1-E)),N===!0?(m.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),P.push(1,1,1,0,0,0,0,0,0,1,1,1)):N===!1||(m.push(.5,.5,.5,.5,.5,-.5,.5-U,.5,-.5,.5-U,.5,-.5,.5-U,.5,.5,.5,.5,.5,-.5+U,.5,.5,-.5+U,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+U,.5,.5,.5-U,.5,.5,.5-U,.5,.5-K,-.5+U,.5,.5-K,-.5+U,.5,.5-K,-.5+U,.5,.5,.5-U,.5,.5,.5-U,.5,-.5+K,.5-U,.5,-.5,-.5+U,.5,-.5,-.5+U,.5,-.5,-.5+U,.5,-.5+K,.5-U,.5,-.5+K),P.push(1,1,1,0,1-U,0,1-U,0,1-U,1,1,1,U,1,U,0,0,0,0,0,0,1,U,1,1-U,1,1-U,1-K,U,1-K,U,1-K,U,1,1-U,1,1-U,K,1-U,0,U,0,U,0,U,K,1-U,K)),z===!0?(m.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),P.push(1,0,0,1,1,1,0,1,1,0,0,0)):z===!1||(m.push(.5,-.5,.5,.5-U,-.5,-.5,.5,-.5,-.5,.5-U,-.5,-.5,.5,-.5,.5,.5-U,-.5,.5,-.5+U,-.5,.5,-.5,-.5,-.5,-.5+U,-.5,-.5,-.5,-.5,-.5,-.5+U,-.5,.5,-.5,-.5,.5,.5-U,-.5,.5,-.5+U,-.5,.5-K,.5-U,-.5,.5-K,-.5+U,-.5,.5-K,.5-U,-.5,.5,-.5+U,-.5,.5,.5-U,-.5,-.5+K,-.5+U,-.5,-.5,.5-U,-.5,-.5,-.5+U,-.5,-.5,.5-U,-.5,-.5+K,-.5+U,-.5,-.5+K),P.push(1,0,1-U,1,1,1,1-U,1,1,0,1-U,0,U,0,0,1,U,1,0,1,U,0,0,0,1-U,0,U,K,1-U,K,U,K,1-U,0,U,0,1-U,1-K,U,1,1-U,1,U,1,1-U,1-K,U,1-K)),{vs:m,uv:P}}}),c(N.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":W,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":C/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Dk.forEach(function(E){var u={};u[E+O]=!1,u[E+".toggleable"]=!1,u[E+".axis"]=t,u[E+".start"]=0,u[E+".end"]=C/2,u[E+_]=0,c(N.Style,u,!0)});var Dg=function(){this.$4n=[]};Dg.$15n=function(B){var _=new Dg;return _.$4n=B,_},Dg.prototype={clone:function(){var j=new Dg;return j.$4n=this.$4n.map(function(P){return P.clone()}),j},$19n:function(){return this.$4n},union:function(w){var N=new dp(this.clone().$4n),i=new dp(w.clone().$4n);return N.$3n(i),i.$3n(N),i.$6n(),i.$3n(N),i.$6n(),N.$7n(i.$2n()),Dg.$15n(N.$2n())},subtract:function(V){var G=new dp(this.clone().$4n),l=new dp(V.clone().$4n);return G.$6n(),G.$3n(l),l.$3n(G),l.$6n(),l.$3n(G),l.$6n(),G.$7n(l.$2n()),G.$6n(),Dg.$15n(G.$2n())},intersect:function(L){var _=new dp(this.clone().$4n),H=new dp(L.clone().$4n);return _.$6n(),H.$3n(_),H.$6n(),_.$3n(H),H.$3n(_),_.$7n(H.$2n()),_.$6n(),Dg.$15n(_.$2n())},inverse:function(){var w=this.clone();return w.$4n.map(function(Z){Z.flip()}),w}},Dg.cube=function(Z){Z=Z||{};var W=new Cc(Z.center||[0,0,0]),X=Z.radius?Z.radius.length?Z.radius:[Z.radius,Z.radius,Z.radius]:[1,1,1];return Dg.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(E){return new io(E[0].map(function(M){var $=new Cc(W.x+X[0]*(2*!!(1&M)-1),W.y+X[1]*(2*!!(2&M)-1),W.z+X[2]*(2*!!(4&M)-1));return new Op($,new Cc(E[1]))}))}))},Dg.sphere=function(t){function B(s,V){s*=2*C,V*=C;var d=new Cc(A(s)*U(V),A(V),U(s)*U(V));v.push(new Op(Y.$20n(d.$21n(u)),d))}t=t||{};for(var v,Y=new Cc(t.center||[0,0,0]),u=t.radius||1,J=t.slices||16,G=t.stacks||8,i=[],l=0;J>l;l++)for(var F=0;G>F;F++)v=[],B(l/J,F/G),F>0&&B((l+1)/J,F/G),G-1>F&&B((l+1)/J,(F+1)/G),B(l/J,(F+1)/G),i.push(new io(v));return Dg.$15n(i)},Dg.cylinder=function(F){function o(T,r,i){var y=2*r*C,I=V.$21n(A(y)).$20n(z.$21n(U(y))),$=g.$20n(G.$21n(T)).$20n(I.$21n(j)),q=I.$21n(1-e(i)).$20n(W.$21n(i));return new Op($,q)}F=F||{};for(var g=new Cc(F.start||[0,-1,0]),a=new Cc(F.end||[0,1,0]),G=a.$13n(g),j=F.radius||1,k=F.slices||16,W=G.$14n(),M=e(W.y)>.5,V=new Cc(M,!M,0).$12n(W).$14n(),z=V.$12n(W).$14n(),N=new Op(g,W.$11n()),Q=new Op(a,W.$14n()),x=[],s=0;k>s;s++){var c=s/k,h=(s+1)/k;x.push(new io([N,o(0,c,-1),o(0,h,-1)])),x.push(new io([o(0,h,0),o(0,c,0),o(1,c,0),o(1,h,0)])),x.push(new io([Q,o(1,h,1),o(1,c,1)]))}return Dg.$15n(x)};var Cc=function(V,i,Y){var H=this;3==arguments.length?(H.x=V,H.y=i,H.z=Y):"x"in V?(H.x=V.x,H.y=V.y,H.z=V.z):(H.x=V[0],H.y=V[1],H.z=V[2])};Cc.prototype={clone:function(){return new Cc(this.x,this.y,this.z)},$11n:function(){return new Cc(-this.x,-this.y,-this.z)},$20n:function(Q){return new Cc(this.x+Q.x,this.y+Q.y,this.z+Q.z)},$13n:function(U){return new Cc(this.x-U.x,this.y-U.y,this.z-U.z)},$21n:function(R){return new Cc(this.x*R,this.y*R,this.z*R)},$16n:function(Y){return new Cc(this.x/Y,this.y/Y,this.z/Y)},$23n:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lerp:function(N,p){return this.$20n(N.$13n(this).$21n(p))},length:function(){return n(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(i){var M=this;return new Cc(M.y*i.z-M.z*i.y,M.z*i.x-M.x*i.z,M.x*i.y-M.y*i.x)}};var Op=function(J,d,P){var F=this;F.$24n=new Cc(J),F.$22n=new Cc(d),F.uv=P?new Cc(P):null};Op.prototype={clone:function(){var B=this;return new Op(B.$24n.clone(),B.$22n.clone(),B.uv?B.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(j,N){var Y=this;return new Op(Y.$24n.lerp(j.$24n,N),Y.$22n.lerp(j.$22n,N),Y.uv?Y.uv.lerp(j.uv,N):null)}};var we=function(d,y){this.$22n=d,this.w=y};we.$17n=function(w,Q,N){var y=Q.$13n(w).$12n(N.$13n(w)).$14n();return new we(y,y.$23n(w))},we.prototype={clone:function(){return new we(this.$22n.clone(),this.w)},flip:function(){var F=this;F.$22n=F.$22n.$11n(),F.w=-F.w},$5n:function(L,B,q,x,R){for(var I=this,P=0,D=1,g=2,r=3,_=0,K=[],Z=0;Z<L.$9n.length;Z++){var F=I.$22n.$23n(L.$9n[Z].$24n)-I.w,u=-k>F?g:F>k?D:P;_|=u,K.push(u)}switch(_){case P:(I.$22n.$23n(L.$8n.$22n)>0?B:q).push(L);break;case D:x.push(L);break;case g:R.push(L);break;case r:for(var W=[],d=[],Z=0;Z<L.$9n.length;Z++){var b=(Z+1)%L.$9n.length,l=K[Z],v=K[b],y=L.$9n[Z],U=L.$9n[b];if(l!=g&&W.push(y),l!=D&&d.push(l!=g?y.clone():y),(l|v)==r){var F=(I.w-this.$22n.$23n(y.$24n))/I.$22n.$23n(U.$24n.$13n(y.$24n)),S=y.$18n(U,F);W.push(S),d.push(S.clone())}}W.length>=3&&x.push(new io(W,L.$10n)),d.length>=3&&R.push(new io(d,L.$10n))}}};var io=function(z,g){var f=this;f.$9n=z,f.$10n=g,f.$8n=we.$17n(z[0].$24n,z[1].$24n,z[2].$24n)};io.prototype={clone:function(){var n=this.$9n.map(function(b){return b.clone()});return new io(n,this.$10n)},flip:function(){this.$9n.reverse().map(function(a){a.flip()}),this.$8n.flip()}};var dp=function(V){var n=this;n.$8n=null,n.front=null,n.back=null,n.$4n=[],V&&n.$7n(V)};dp.prototype={clone:function(){var C=this,f=new dp;return f.$8n=C.$8n&&C.$8n.clone(),f.front=C.front&&C.front.clone(),f.back=C.back&&C.back.clone(),f.$4n=C.$4n.map(function(F){return F.clone()}),f},$6n:function(){for(var M=this,D=0;D<M.$4n.length;D++)M.$4n[D].flip();M.$8n.flip(),M.front&&M.front.$6n(),M.back&&M.back.$6n();var x=M.front;M.front=M.back,M.back=x},$1n:function(r){var N=this;if(!N.$8n)return r.slice();for(var O=[],a=[],Y=0;Y<r.length;Y++)N.$8n.$5n(r[Y],O,a,O,a);return N.front&&(O=N.front.$1n(O)),a=N.back?N.back.$1n(a):[],O.concat(a)},$3n:function(Y){var l=this;l.$4n=Y.$1n(l.$4n),l.front&&l.front.$3n(Y),l.back&&l.back.$3n(Y)},$2n:function(){var n=this,d=n.$4n.slice();return n.front&&(d=d.concat(n.front.$2n())),n.back&&(d=d.concat(n.back.$2n())),d},$7n:function(T){var G=this;if(T.length){G.$8n||(G.$8n=T[0].$8n.clone());for(var B=[],C=[],K=0;K<T.length;K++)this.$8n.$5n(T[K],G.$4n,G.$4n,B,C);B.length&&(G.front||(G.front=new dp),this.front.$7n(B)),C.length&&(G.back||(G.back=new dp),G.back.$7n(C))}}};var zb="symbol",Nq=N.Symbol=function(H,C,y){var r=this;j(Nq,r),r.s3(20,20,20),r.s({"all.visible":!1,shape:"rect"}),r.setIcon(H,C,y)};h("Symbol",v,{setIcon:function(z,F,B){var U,h=this;return Nq.superClass.setIcon.call(h,z),z?(U={for3d:!0,face:"center",position:44,names:[z]},B&&(U.transaprent=!0),F&&(U.autorotate=F),h.addStyleIcon(zb,U)):h.removeStyleIcon(zb),h.setWidth(m.getImageWidth(a.getImage(z),h)||20),U}});var Zk=N.CSGNode=function(){j(Zk,this),this.s({shape:"rect","attach.thickness":1.001})},Fq={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};h("CSGNode",v,{_22Q:function(){return Dp},onPropertyChanged:function(Z){var U=this,L=U.getHost();Zk.superClass.onPropertyChanged.call(U,Z),Fq[Z.property]&&(L instanceof _c||L instanceof Zk)&&L.fp("csgNodeChange",!0,!1)}});var Dp=function(K,m){j(Dp,this,[K,m])};s(Dp,D.Node3dUI,{_80o:function(h,G,o){var K=this;K._shape3d?Dp.superClass._80o.call(K,h,G,o):(x(K.gv),Xp.forEach(function(p){T(K,h,G,K[p],o)}))},validate:function(o,l){var s=this,h=s.gv,H=s.data;if(H.s("shape3d"))return Dp.superClass.validate.call(s,o,l),s._shape3d=!0,void 0;s._shape3d=!1;var A=r(H,h.getMat(H)),X=o&&o.uv;s.vf2("csg",X);for(var q=0;6>q;q++)for(var j=Dk[q],D=ic[q],G=s.vf2(j,X,l),Q=G.mat||A,$=G.vs,C=G.uv,_=G.tuv,U=0;2>U;U++){var E=B[D+3*U],W=B[D+3*U+1],Z=B[D+3*U+2];if(b($,Q,[J[3*E],J[3*E+1],J[3*E+2]]),b($,Q,[J[3*W],J[3*W+1],J[3*W+2]]),b($,Q,[J[3*Z],J[3*Z+1],J[3*Z+2]]),_)if(C){var i=8*q;_.push(C[2*E-i],C[2*E+1-i],C[2*W-i],C[2*W+1-i],C[2*Z-i],C[2*Z+1-i])}else _.push(I[2*E],I[2*E+1],I[2*W],I[2*W+1],I[2*Z],I[2*Z+1])}fi(s,o,l)},vf2:function(b,c,a){var K,e=this,k=e.gv.getFaceVisible(e.data,b);return K=Y(e,b,a),K.vs=[],K.tuv=k&&(K.texture||c)?[]:o,K.visible=k,K}});var _c=N.CSGShape=function(){var B=this;j(_c,B),B.s({"shape.background":o,"shape.border.width":8}),B.setTall(240),B.setElevation(120),B.setThickness(14)};h("CSGShape",y,{IRotatable:!1,_22Q:function(){return Pk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Pk=function(V,e){j(Pk,this,[V,e])};s(Pk,D.Shape3dUI,{_80o:function(k,c,G){var E=this;E.undrawable||(x(E.gv),Xp.forEach(function(j){T(E,k,c,E[j],G)}))},validate:function(v,Z){var h=this,$=h.data,Y=$.getPoints();if(h.undrawable=Y.size()<2)return h.clear(),void 0;var G=$.isClosePath(),D=F($._thickness/2,k),b=i(Y,o,o,G);Xp.forEach(function(A){h.vf(A,v&&v.uv,!0,Z)}),G&&(h.left.visible=!1,h.right.visible=!1),h._12O(b,D),h._20Q(b),fi(h,v,Z)}});var mn=N.DoorWindow=function(){var h=this;j(mn,h),h.setElevation(100),h.s3(100,200,14)};h("DoorWindow",Zk,{IDoorWindow:!0,toggle:function(P){this.setExpanded(!this.s(l),P)},isExpanded:function(){return this.s(l)},setExpanded:function(E,I){var T,Y=this,i=Y.$25n,g=Y.getDataModel(),A=Y.s(l);if(g&&(T=g.getHistoryManager()),i&&(i.stop(!0),delete Y.$25n),A!==E){T&&T.beginInteraction();var R=E?Y.s("dw.end"):Y.s("dw.start");Y.s(l,E),I=M(I),I?(A=Y.s(z),I.action=function(k){Y.s(z,A+(R-A)*k)},I.finishFunc=function(){T&&T.endInteraction()},Y.$25n=P(I)):(Y.s(z,R),T&&T.endInteraction())}},getMat:function(){var y=this,l=y.s("dw.s3"),L=y.s("dw.t3"),b=y.s("dw.flip"),H=y.s(z);if(l||H||L||b){var c=[];if(b&&c.push({r3:[0,C,0]}),l&&c.push({s3:l}),H){l=y.s3();var h=y.s("dw.axis"),D=l[0]/2,W=l[1]/2;l[2]/2,h===t?c.push({t3:[D,0,0]},{r3:[0,-H,0]},{t3:[-D,0,0]}):h===f?c.push({t3:[-D,0,0]},{r3:[0,H,0]},{t3:[D,0,0]}):h===$?c.push({t3:[0,-W,0]},{r3:[-H,0,0]},{t3:[0,W,0]}):h===S?c.push({t3:[0,W,0]},{r3:[H,0,0]},{t3:[0,-W,0]}):h===E?c.push({r3:[0,H,0]}):h===X&&c.push({r3:[H,0,0]})}return L&&c.push({t3:L}),w(c)}return o}});var jm=N.CSGBox=function(){var v=this;j(jm,v),v.setElevation(100),v.s3(100,200,100)};h("CSGBox",Zk,{ICSGBox:!0,toggleFace:function(E,x){this.setFaceExpanded(E,!this.s(E+O),x)},isFaceExpanded:function(W){return this.s(W+O)},setFaceExpanded:function(u,g,D){var z=this,f=z.$25n,T=z.s(u+O);if(f&&(f.stop(!0),delete z.$25n),T!==g){var A=g?z.s(u+".end"):z.s(u+".start");z.s(u+O,g),D=M(D),D?(T=z.s(u+_),D.action=function(l){z.s(u+_,T+(A-T)*l)},z.$25n=P(D)):z.s(u+_,A)}},getFaceMat:function(d){var O=this,J=O.s(d+_);if(!J)return o;var B=O.s(d+".axis"),b=O.s3(),v=b[0]/2,k=b[1]/2,p=b[2]/2,z=[];return d===G&&(B===t?z.push({t3:[v,0,-p]},{r3:[0,-J,0]},{t3:[-v,0,p]}):B===f?z.push({t3:[-v,0,-p]},{r3:[0,J,0]},{t3:[v,0,p]}):B===$?z.push({t3:[0,-k,-p]},{r3:[-J,0,0]},{t3:[0,k,p]}):B===S?z.push({t3:[0,k,-p]},{r3:[J,0,0]},{t3:[0,-k,p]}):B===E?z.push({t3:[0,0,-p]},{r3:[0,J,0]},{t3:[0,0,p]}):B===X&&z.push({t3:[0,0,-p]},{r3:[J,0,0]},{t3:[0,0,p]})),d===H&&(B===t?z.push({t3:[-v,0,p]},{r3:[0,-J,0]},{t3:[v,0,-p]}):B===f?z.push({t3:[v,0,p]},{r3:[0,J,0]},{t3:[-v,0,-p]}):B===$?z.push({t3:[0,-k,p]},{r3:[J,0,0]},{t3:[0,k,-p]}):B===S?z.push({t3:[0,k,p]},{r3:[-J,0,0]},{t3:[0,-k,-p]}):B===E?z.push({t3:[0,0,p]},{r3:[0,J,0]},{t3:[0,0,-p]}):B===X&&z.push({t3:[0,0,p]},{r3:[J,0,0]},{t3:[0,0,-p]})),d===t&&(B===t?z.push({t3:[v,0,p]},{r3:[0,-J,0]},{t3:[-v,0,-p]}):B===f?z.push({t3:[v,0,-p]},{r3:[0,J,0]},{t3:[-v,0,p]}):B===$?z.push({t3:[v,-k,0]},{r3:[0,0,-J]},{t3:[-v,k,0]}):B===S?z.push({t3:[v,k,0]},{r3:[0,0,J]},{t3:[-v,-k,0]}):B===E?z.push({t3:[v,0,0]},{r3:[0,J,0]},{t3:[-v,0,0]}):B===X&&z.push({t3:[v,0,0]},{r3:[0,0,J]},{t3:[-v,0,0]})),d===f&&(B===t?z.push({t3:[-v,0,-p]},{r3:[0,-J,0]},{t3:[v,0,p]}):B===f?z.push({t3:[-v,0,p]},{r3:[0,J,0]},{t3:[v,0,-p]}):B===$?z.push({t3:[-v,-k,0]},{r3:[0,0,J]},{t3:[v,k,0]}):B===S?z.push({t3:[-v,k,0]},{r3:[0,0,-J]},{t3:[v,-k,0]}):B===E?z.push({t3:[-v,0,0]},{r3:[0,J,0]},{t3:[v,0,0]}):B===X&&z.push({t3:[-v,0,0]},{r3:[0,0,J]},{t3:[v,0,0]})),d===$&&(B===t?z.push({t3:[v,-k,0]},{r3:[0,0,J]},{t3:[-v,k,0]}):B===f?z.push({t3:[-v,-k,0]},{r3:[0,0,-J]},{t3:[v,k,0]}):B===$?z.push({t3:[0,-k,p]},{r3:[-J,0,0]},{t3:[0,k,-p]}):B===S?z.push({t3:[0,-k,-p]},{r3:[J,0,0]},{t3:[0,k,p]}):B===E?z.push({t3:[0,-k,0]},{r3:[0,0,J]},{t3:[0,k,0]}):B===X&&z.push({t3:[0,-k,0]},{r3:[J,0,0]},{t3:[0,k,0]})),d===S&&(B===t?z.push({t3:[v,k,0]},{r3:[0,0,-J]},{t3:[-v,-k,0]}):B===f?z.push({t3:[-v,k,0]},{r3:[0,0,J]},{t3:[v,-k,0]}):B===$?z.push({t3:[0,k,-p]},{r3:[-J,0,0]},{t3:[0,-k,p]}):B===S?z.push({t3:[0,k,p]},{r3:[J,0,0]},{t3:[0,-k,-p]}):B===E?z.push({t3:[0,k,0]},{r3:[0,0,J]},{t3:[0,-k,0]}):B===X&&z.push({t3:[0,k,0]},{r3:[J,0,0]},{t3:[0,-k,0]})),w(z)}})}(this,Object);