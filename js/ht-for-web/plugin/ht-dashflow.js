!function(n){"use strict";var $="ht",Y=n[$],w=Y.Default,q=Math,G=(q.PI,q.sin,q.cos,q.atan2,q.sqrt,q.max),j=q.floor,o=(q.round,q.ceil),i=Y.Shape,V=(Y.Edge,Y.List),U=Y.Style,k=Y.graph,l=w.getInternal(),P=l.ui(),z=null,M="prototype",y=n.clearInterval,_=n.setInterval,p=function(C){var Z=C.data,J=this.dm();if(Z&&"add"===C.kind){var a=J.$1c,h=Z instanceof i?"shape.":"edge.";a&&Z.s(h+"dash.flow")&&a.indexOf(Z)<0&&a.push(Z)}"clear"===C.kind&&(J.$1c=[])},c=function(Q){var R=Q.property,H=Q.data,o=Q.newValue,k=this.dm().$1c,A=H instanceof i?"s:shape.dash.flow":"s:edge.dash.flow";if(k&&R===A)if(o)k.indexOf(H)<0&&k.push(H);else for(var J=k.length,F=0;J>F;F++)if(k[F]===H){k.splice(F,1);break}},D=k.GraphView[M],I=P.EdgeUI[M],B=P.ShapeUI[M],h=B._80o,g=I._80o,F=Y.DataModel[M],N=F.prepareRemove,v=D.setDataModel;U["edge.dash.flow.step"]==z&&(U["edge.dash.flow.step"]=3),U["shape.dash.flow.step"]==z&&(U["shape.dash.flow.step"]=3),F.prepareRemove=function(J){N.call(this,J);var T=J._dataModel,s=T.$1c;if(s)for(var Y=s.length,d=0;Y>d;d++)if(s[d]===J){s.splice(d,1);break}},D.setDataModel=function(M){var $=this,Q=$._dataModel;if(Q!==M){Q&&(Q.umm(p,$),Q.umd(c,$),Q.$1c=[]),M.mm(p,$),M.md(c,$);var O=M.$1c=[];M.each(function(K){var o=K instanceof i?"shape.":"edge.";K.s(o+"dash.flow")&&O.indexOf(K)<0&&O.push(K)}),v.call($,M)}},D.setDashFlowInterval=function(_){var b=this,g=b.$2c;b.$2c=_,b.fp("dashFlowInterval",g,_),b.$3c!=z&&(y(b.$3c),delete b.$3c,b.enableDashFlow(_))},D.getDashFlowInterval=function(){return this.$2c},D.$4c=function(){var t,u,T,Y=this,P=Y.tx(),g=Y.ty(),b=Y._zoom,i=Y.getWidth(),r=Y.getHeight(),H={x:-P/b,y:-g/b,width:i/b,height:r/b},q=Y.dm().$1c,M=Y._56I,W=new V;if(q.forEach(function(L){M[L.getId()]&&(t=Y.getDataUI(L),t&&(T=t._79o(),T&&W.add(T)))}),0!==W.size()&&(W.each(function(D){w.intersectsRect(H,D)&&(u=w.unionRect(u,D))}),u&&(u&&(w.grow(u,G(1,1/b)),u.x=j(u.x*b)/b,u.y=j(u.y*b)/b,u.width=o(u.width*b)/b,u.height=o(u.height*b)/b,u=w.intersection(H,u)),u))){var _=Y._canvas.getContext("2d");_.save(),_.lineCap=w.lineCap,_.lineJoin=w.lineJoin,l.translateAndScale(_,P,g,b),_.beginPath(),_.rect(u.x,u.y,u.width,u.height),_.clip(),_.clearRect(u.x,u.y,u.width,u.height),Y.$5c(_,u),_.restore()}},D.$5c=function(b,h){var u,B,s=this;s._93db(b),s.each(function(W){s._56I[W._id]&&(u=s.getDataUI(W),u&&(B=u._79o(),(!h||w.intersectsRect(h,B))&&(u.$7c=!0,u._42(b),delete u.$7c)))}),s._92db(b)},D.enableDashFlow=function(u){var s=this;s.$3c==z&&(s.$3c=_(function(){s.$4c()},u||s.$2c||50))},D.disableDashFlow=function(){var Z=this;y(Z.$3c),delete Z.$3c};var b=function(){var K=this,k=K._data,v=k instanceof i?"shape.":"edge.",I=k.s(v+"dash.pattern"),P=k.s(v+"dash.flow.reverse");if(I&&k.s(v+"dash")&&k.s(v+"dash.flow")&&K.$7c){var y=K.s(v+"dash.offset")||0,F=k.s(v+"dash.flow.step"),R=k.getStyleMap(),d=0;I.forEach(function(V){d+=V}),P&&(F=-F),y-=F,y%=d,R||(k._styleMap=R={}),R[v+"dash.offset"]=y}};I._80o=function(q){g.call(this,q),b.call(this)},B._80o=function(y){h.call(this,y),b.call(this)}}(this,Object);