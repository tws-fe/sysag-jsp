!function(e){"use strict";var Y="ht",p=e[Y],u=function(){return document},i=function(){return u().body},s=function(E,X,s){E.style.setProperty(X,s,null)},H=function(q){return u().createElement(q)},B=function(){return H("div")},v=function(){var G=H("canvas");return G},z=function(r,k){s(r,"-webkit-transform",k),s(r,"-ms-transform",k),s(r,"transform",k)},g=function(L,Q){s(L,"-webkit-transform-origin",Q),s(L,"-ms-transform-origin",Q),s(L,"transform-origin",Q)},V=function(w,a){w.appendChild(a)},J=function(A,G){A.removeChild(G)},U=e.parseInt,n=p.Default,j=n.getInternal(),l=Math.PI,w="white-space",f="visibility",m="left",A="top",r="width",b="height",N="position",O="display",K="z-index",q="px",P="0 0",S="absolute",c="visible",G="hidden",o="none",k="block",I="nowrap",E="rgba(0, 0, 0, 0.005)";n.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var W=p.graph.GraphView.prototype,y=W._42;W.adjustHtmlNodeIndex=!0,W._42=function(I,D){if(y.call(this,I,D),this.adjustHtmlNodeIndex)for(var M=this.getDataModel()._datas._as,i=M.length,r=1,m=0;i>m;m++){var J=M[m];if(J instanceof t){var O=this.getDataUI(J);s(O.$2f,K,r+""),s(O.$3f,K,r+1+""),r+=2}}};var T=p.HtmlNodeUI=function(L,l){var b=this;T.superClass.constructor.call(b,L,l);var K=b.$2f=B(),Y=b.$3f=v();s(K,N,S),s(K,f,G),s(K,w,I),Y.draggable=!1,s(Y,N,S),s(Y,O,o),g(Y,P),K.addEventListener("change",function(Q){var M=Q.target,B=M.bind||M.getAttribute("bind"),p=M.type&&"checkbox"===M.type?M.checked:M.value,J=l.getContext();B&&J&&(J[B]=p,b.$4f=JSON.stringify(J))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(F){K.addEventListener(F,this.$9f.bind(this))},b)};n.def(T,j.ui().NodeUI,{_visible:!0,$11f:function(){var f=this,T=f.$3f,a=f._data,F=a.getDraggerImageWidth(),e=a.getDraggerImageHeight(),E=a.getDraggerImage(),i=j.initContext(T);i.beginPath(),j.setCanvas(T,F,e),j.translateAndScale(i,0,0,1),i.clearRect(0,0,F,e),n.drawImage(i,n.getImage(E),0,0,F,e),i.restore()},_80o:function(Y){T.superClass._80o.call(this,Y);var Z=this,L=Z._data,t=L._padding,h=2*t,P=Z.$2f,D=Z.$3f,y=Z.gv,p=y.getZoom(),I=y.getTranslateX(),d=y.getTranslateY(),w=y.getView(),J=Z._83o,R=L._width,n=L._height,a=J.position,u=J.rotation,g=(R-h)/L.$5f*p,v=(n-h)/L.$6f*p,j=Z._html,C=L._html,F=L.getHtmlType();if("html"===F){var e=L.getContext()||{},H=Z.$4f,x=L.$10f,$=JSON.stringify(e);j&&H&&j===C&&H===$||(Z.$4f=$,Z._html=C,P.innerHTML=x?x(e):C)}else if(null!=F){var Q=L.getHtml();"ht"===F&&(Q=Q.getView()),j&&j===Q||(Z._html=Q,P.innerHTML="",V(P,Q))}if(!P.parentNode){var M=y.$1f;if(!M){var _=B();s(_,N,S),s(_,K,"0"),M=y.$1f=_;var W=y._canvas.nextSibling;W?w.insertBefore(_,W):V(w,_)}V(M,P),V(M,D)}if(L._scalable){var i=L.$5f,X=L.$6f;z(P,"rotate("+180*(u/l)+"deg) scale("+g+","+v+")"),s(P,m,(a.x-i/p/2)*p+I+q),s(P,A,(a.y-X/p/2)*p+d+q)}else{var ud=U(P.style.width),mm=U(P.style.height),Sq=U((R-h)*p),vh=U((n-h)*p),hg="100%",kd=P.children[0];s(kd,r,hg),s(kd,b,hg),(ud!==Sq||mm!==vh)&&(s(P,r,Sq+q),s(P,b,vh+q),"ht"===F&&C.invalidate()),z(P,"rotate("+180*(u/l)+"deg)"),s(P,m,(a.x-Sq/p/2)*p+I+q),s(P,A,(a.y-vh/p/2)*p+d+q)}var Ro=Z.dragRect;y.isMovable(L)&&y.isSelected(L)&&Ro?(Y.save(),Y.fillStyle=E,Y.fillRect(Ro.x,Ro.y,Ro.width,Ro.height),Y.restore(),s(D,m,Ro.x*p+I+q),s(D,A,Ro.y*p+d+q),z(D,"scale("+p+","+p+")"),s(D,O,k),Z.$11f()):s(D,O,o),s(P,f,this._visible?c:G)},dispose:function(){var X=this.gv.$1f;X.removeChild(this.$2f),X.removeChild(this.$3f)},_84o:function(E){this._visible=E,s(this.$2f,f,E?c:G),s(this.$3f,O,E?k:o)},_3O:function(){var u=this,l=u._data;T.superClass._3O.call(u);var X=l.getRect();u.dragRect={x:X.x+X.width+l._padding,y:X.y+10,width:l.getDraggerImageWidth(),height:l.getDraggerImageHeight()},u._68o(u.dragRect)},rectIntersects:function(n){var M=this._79o();return p.Default.intersection(M,n)?!0:void 0},$9f:function(x){var s=this.gv,h=this._data;s.sm().contains(h)&&x.stopPropagation()}});var t=p.HtmlNode=function(){t.superClass.constructor.call(this)};p.Default.def(t,p.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:p.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(R){var K=this,k=K._html;K._html=R,"html"===K.getHtmlType()&&"Handlebars"in e&&(K.$10f=Handlebars.compile(R)),K.$13f(),K.fp("html",k,R)},setContext:function(v){var J=this,s=J._context;J._context=v,J.fp("context",s,v),J.$13f()},setScalable:function(H){var D=this,C=D._scalable;D._scalable=H,D.fp("scalable",C,H),D.$13f()},getHtmlType:function(){var v=this._html;return v?"string"==typeof v?"html":v.getView?"ht":"dom":null},$13f:function(){var u=this,R=u._html,F=u.$10f;if(R){var Y=B(),P=!1,m=u.getHtmlType();if(s(Y,N,S),s(Y,w,I),s(Y,f,G),"html"===m?(Y.innerHTML=F?F(u.getContext()||{}):R,P=!0):"ht"===m?(V(Y,R.getView()),P=!0):"dom"===m&&(V(Y,R),P=!0),P){var t=2*u._padding;V(i(),Y),u.$5f=Y.scrollWidth,u.$6f=Y.scrollHeight,u._width=u.$5f+t,u._height=u.$6f+t,u._originWidth=u._width,u._originHeight=u._height,J(i(),Y)}}},getUIClass:function(){return p.HtmlNodeUI}})}(this,Object);