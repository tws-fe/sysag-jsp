!function(c,b){"use strict";var j="ht",k=c[j],O="position",K="absolute",m="px",S="left",i="top",o="innerHTML",P="className",w="width",E="height",r="0",q="▶",M="display",p="none",z="visibility",v="user-select",F="margin",d="padding",X=null,I=k.Color,A=k.Default,W=A.getInternal(),s=c.setTimeout,u=c.setInterval,_=c.clearTimeout,C=c.clearInterval,g=c.parseInt,l=A.isLeftButton,L=A.isDragging,T=A.startDragging,B=A.getDistance,Y=A.isTouchable,e=I.widgetIconHighlight,h=I.widgetIconBorder,D=I.widgetIconGradient,N=function(){return document},t=function(D,y){return D.querySelectorAll(y)},x=function(Z,w){var a=N().createElement(Z);return"ul"===Z&&(Q(a,O,"relative"),Q(a,F,r),Q(a,d,r),Q(a,"list-style",p),Q(a,"box-sizing","border-box"),Q(a,"-moz-box-sizing","border-box"),Q(a,M,"inline-block"),Q(a,"vertical-align","text-bottom"),Q(a,"border","1px solid "+A.contextMenuBorderColor),Q(a,"box-shadow","0 0 16px 1px "+A.contextMenuShadowColor),Q(a,"overflow","hidden"),w||Q(a,"border-radius",5+m)),a},V=function(Z){var g=Z.touches[0];return g?g:Z.changedTouches[0]},y=function(){return x("div")},H=function(){return x("canvas")},Q=function(F,u,t){F.style.setProperty(u,t,X)},f=function(Q,u,c){A.def(k.widget[Q],u,c)},n=function(U,T){U.appendChild(T)},Z=function(s,x){s.removeChild(x)},U=function(){return N().body},R=function(O,H,N,q){O.addEventListener(H,N,!!q)},J=function(w,$,z,M){w.removeEventListener($,z,!!M)};W.addMethod(A,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:h},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:e}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:h},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:e,gradient:A.imageGradient,gradientColor:D,background:e}]},contextMenuLabelFont:(Y?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var $=function(T){var f=this,S=T._view;if(f.$11b=T,f.addListeners(),R(S,"contextmenu",function(X){X.preventDefault()}),!Y){var n=f.$37b=f.$36b.bind(f);R(S,"mouseover",n),R(S,"mouseout",n)}};A.def($,b,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(z){if(A.preventDefault(z),l(z)){for(var o=this,f=o.$11b,G=o.getView(),E=G.children,I=0;I<E.length;I++){var N=E[I],j=N.$24b,B=N.$25b;if(j&&j.contains(z.target))return f.scrollUp(N),o.$28b=s(function(){o.$29b=u(function(){f.scrollUp(N)},100)},500),T(o,z),void 0;if(B&&B.contains(z.target))return f.scrollDown(N),o.$28b=s(function(){o.$29b=u(function(){f.scrollDown(N)},100)},500),T(o,z),void 0}Y&&(z=V(z)),o.$30b={x:z.pageX,y:z.pageY}}},handle_mousedown:function(e){this.handle_touchstart(e)},handle_touchend:function(w){if(l(w)){var t=this,a=t.$30b,o=Y?{x:V(w).pageX,y:V(w).pageY}:{x:w.pageX,y:w.pageY};if(!a||B(a,o)>1)return delete t.$30b,void 0;for(var v=t.getView(),K=t.$11b,n=w.target,p=X,d=X,x=K._items,s=v.$26b,U=0;U<s.length;U++)if(d=s[U],d.contains(n)){p=d.getAttribute("data-id");break}if(p&&x){var z=K.$17b(x,function(w){return w._id===p});if(z){var G=!1;z.disabled instanceof Function?G=z.disabled.call(K,z):z.disabled===!0&&(G=!0),G||(z.items?Y&&t.$36b(d,!0):K.$1b(z,w))}}delete t.$30b}},$36b:function(d,O){if(!L()){var x,t=this,q=t.$11b,C=t.getView(),Y=q.$20b||C.children[0],w=q.$19b,l=C.$26b,U=C.children,B=d.target,a=C.getBoundingClientRect(),F=A.getWindowInfo(),s=F.width,Z=F.height,N=function(N){for(var C=0;C<U.length;C++){var o=U[C],O=new RegExp(N+"$"),d=o[P];if(d&&(O.test(d)||d.indexOf(N+" ")>=0))return o}},e=function(u){for(var A=0;A<l.length;A++){var Y=l[A],N=new RegExp(u+"$"),I=Y[P];if(I&&(N.test(I)||I.indexOf(u+" ")>=0))return Y}},h=function(j){var g=e("menu-item"+j.$45b),n=g.getBoundingClientRect(),p=n.top-a.top,b=n.left-a.left;Q(j,i,p+m),Q(j,S,b+n.width+m);var y=j.getBoundingClientRect(),v=y.top,f=y.left,R=y.height,x=y.width,h=v+R+2,w=f+x+2;h>Z&&Q(j,i,p+Z-h+m),w>s&&Q(j,S,b-x+m)};if(O)x=d;else{if("mouseover"===d.type){for(var J=0;J<l.length;J++){var K=l[J];if(K.contains(B)){x=K;break}}if(!x&&w){var E=w.parentNode,j=N("submenu"+w.getAttribute("data-id"));(j&&j.contains(B)||E&&E.contains(B))&&(x=w)}}else if("mouseout"===d.type){for(var g=!1,$=d.relatedTarget,J=0;J<U.length;J++){var c=U[J];if("hidden"!==c.style.visibility&&c.contains($)){g=!0;break}}if(g)return}!x&&Y&&(x=e("menu-item"+(Y.$45b||"NaN")))}if(x!=w){if(w)for(var D=w;D;){D[P]=D[P].replace(" menu-item-hover",""),D[P].indexOf("disabled")<0&&(Q(D,"background-color",A.contextMenuBackground),Q(D,"color",A.contextMenuLabelColor));var I=N("submenu"+D.getAttribute("data-id"));I&&Q(I,z,"hidden");var f=D.parentNode;D=e("menu-item"+(f.$45b||"NaN"))}if(x){for(var H=x,T=[];H;){H[P]+=" menu-item-hover",H[P].indexOf("disabled")<0&&(Q(H,"background-color",A.contextMenuHoverBackground),Q(H,"color",A.contextMenuHoverLabelColor));var _=N("submenu"+H.getAttribute("data-id"));_&&(Q(_,z,"visible"),T.push(_));var f=H.parentNode;H=e("menu-item"+(f.$45b||"NaN"))}T.reverse(),T.forEach(function(K){h(K)})}}q.$19b=x,q.$20b=x?x.parentNode:C.children[0]}},handle_mouseup:function(x){this.handle_touchend(x)},handleWindowTouchEnd:function(){var I=this;I.$28b!=X&&(_(I.$28b),delete I.$28b),I.$29b!=X&&(C(I.$29b),delete I.$29b),delete I.$34b,delete I.$30b,delete I.$35b},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handle_mousemove:function(N){this.handle_touchmove(N)},handle_touchmove:function(k){if(!L()&&l(k)){for(var R=this,H=R.getView().children,w=X,v=0;v<H.length;v++){var d=H[v];if(d.contains(k.target)){w=d;break}}var r=R.$30b,x=Y?{x:V(k).pageX,y:V(k).pageY}:{x:k.pageX,y:k.pageY};w&&r&&B(r,x)>2&&(T(R,k),R.$34b=w,R.$35b=w.$18b)}},handleWindowTouchMove:function(W){var C=this,H=C.$11b,Z=C.$34b,d=C.$35b,t=C.$30b;if(t&&Z){var l=Y?{x:V(W).pageX,y:V(W).pageY}:{x:W.pageX,y:W.pageY},h=l.y-t.y;h>0?H.scrollUp(Z,Z.$18b-(d-h)):H.scrollDown(Z,d-h-Z.$18b)}},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},$10b:function(h,v){h.preventDefault();for(var p=this,T=p.getView().children,Y=X,D=0;D<T.length;D++){var w=T[D];if(w.contains(h.target)){Y=w;break}}if(Y){var q=this.$11b,B=q.getRowHeight();Math.abs(v)>.05&&(v>0?q.scrollUp(Y,v*B):0>v&&q.scrollDown(Y,-v*B))}},handle_mousewheel:function(K){this.$10b(K,K.wheelDelta/40)},handle_DOMMouseScroll:function(v){this.$10b(v,-v.detail)},$44b:function(m){this.getView().contains(m.target)||this.$11b.hide()},$41b:function(v){this.$11b.show(v)},$4b:function(y,x){var z=this.$11b;if(x=x||z._items,x&&x.length&&y.keyCode){var E=[y.keyCode];y.shiftKey&&E.push(16),y.ctrlKey&&E.push(17),y.altKey&&E.push(18),/mac/.test(c.navigator?c.navigator.userAgent.toLowerCase():"")?y.metaKey&&E.push(17):y.metaKey&&E.push(91),E.sort();var U=E.join(),p=z.$17b(x,function(q){if(q.key){var p=q.key.slice(0);return p.sort(),U===p.join()}});if(p){p.preventDefault!==!1&&y.preventDefault();var f=!1;p.disabled instanceof Function?f=p.disabled.call(z,p):p.disabled===!0&&(f=!0),f||z.$1b(p,y)}}},$39b:function(v){var k=this,x=V(v);k.$32b={x:x.pageX,y:x.pageY}},$38b:function(t){var A=this,U=V(t);A.$31b={x:U.pageX,y:U.pageY},A.$33b=s(function(){A.$31b&&(A.$32b?B(A.$31b,A.$32b)<10&&A.$11b.show(t):A.$11b.show(t)),delete A.$33b,delete A.$31b,delete A.$32b},600)},$40b:function(){var r=this;r.$33b!=X&&(_(r.$33b),delete r.$33b,delete r.$31b,delete r.$32b)}}),k.widget.ContextMenu=function(f){var n=this,w=n._view=y();w[P]="ht-widget-contextmenu",n.setItems(f),n.$13b=new $(n),Q(w,"font",A.contextMenuLabelFont),Q(w,O,K),Q(w,"cursor","default"),Q(w,"-webkit-"+v,p),Q(w,"-moz-"+v,p),Q(w,"-ms-"+v,p),Q(w,v,p),Q(w,"box-sizing","border-box"),Q(w,"-moz-box-sizing","border-box"),A.baseZIndex!=X&&Q(w,"z-index",g(A.baseZIndex)+2+""),n.$3b=function(u){n.$13b.$4b(u)}},f("ContextMenu",b,{$5b:0,_items:X,$21b:X,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var i=this,C=i._enableGlobalKey;C===!1&&(R(N(),"keydown",i.$3b),i._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,J(N(),"keydown",this.$3b)},setItems:function($){this._items=$},setVisibleFunc:function(L){this.$16b=L},setLabelMaxWidth:function(j){this.$43b=j},$1b:function(j,R){var C=this;if("check"===j.type)j.selected=!j.selected;else if("radio"===j.type){var K=j.groupId;C.$17b(C._items,function(b){b.groupId===K&&(b.selected=!1)}),j.selected=!0}if(C.hide(),j.action)j.action.apply(j.scope||C,[j,R]);else if(j.href){var $=j.linkTarget||"_self";c.open(j.href,$)}},getItemByProperty:function(b,z,D){var v=this;if(D=D||v._items,!D||0===D.length)return X;var V=v.$17b(D,function(F){return F[b]===z});return V||X},scrollUp:function(K,n){var $=this;if(n=n==X?20:n,n=g(n),0!==n){var z=0;K.$18b>n&&(z=K.$18b-n),$.$42b(K,z),K.scrollTop=z,K.$18b=z}},scrollDown:function(C,n){var r=this;if(n=n==X?20:n,n=g(n),0!==n){var i=C.$22b,s=C.$23b,o=i-s;s+C.$18b+n<i&&(o=C.$18b+n),r.$42b(C,o),C.scrollTop=o,C.$18b=o}},$42b:function(n,e){e=e==X?n.$18b:e;var x=n.$24b,r=n.$25b;x&&(Q(x,"top",e+m),0==e?Q(x,M,p):Q(x,M,"block")),r&&(Q(r,"bottom",-e+m),e==n.$22b-n.$23b?Q(r,M,p):Q(r,M,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(L,R){for(var e=0;e<L.length;e++){var J=L[e];if(R(J))return J;if(J.items){var n=this.$17b(J.items,R);if(n)return n}}},$2b:function(t,c){for(var J=this,W=0;W<t.length;W++){J.$5b++;var N=t[W];if(!J.$16b||J.$16b.call(J,N)){var l=x("li"),s=J.$5b+"";if(Q(l,"white-space","nowrap"),Q(l,M,"block"),"separator"===N){var v=y();v[P]="separator",Q(v,E,A.contextMenuSeparatorWidth+m),Q(v,"background",A.contextMenuSeparatorColor),n(l,v)}else{N._id=s,l.setAttribute("data-id",s);var T=x("span"),b=x("span"),Y=H(),j=y();if(Q(T,M,"inline-block"),Q(b,M,"inline-block"),Y[P]="prefix",Q(Y,M,"inline-block"),Q(Y,w,"1em"),Q(Y,E,"1em"),Q(Y,"vertical-align","middle"),Q(Y,F,"0 0.2em"),"check"===N.type&&N.selected?Y[P]+=" check-prefix":"radio"===N.type&&N.selected&&(Y[P]+=" radio-prefix"),n(l,Y),N.icon){var R=H();R[P]="contextmenu-item-icon",Q(R,M,"inline-block"),Q(R,"vertical-align","middle"),Q(R,E,"1.2em"),Q(R,w,"1.2em"),Q(R,"margin-right","0.2em"),R.$50b=N.icon,n(T,R)}if(b[o]=N.label,n(T,b),n(l,T),j[P]="suffix",Q(j,M,"inline-block"),Q(j,"margin-left","1em"),Q(j,"margin-right","0.4em"),Q(j,"text-align","right"),Q(j,"font-size","75%"),N.items&&(j[o]=q),N.suffix&&(j[o]=N.suffix),n(l,j),l[P]="menu-item menu-item"+s,Q(l,"background-color",A.contextMenuBackground),Q(l,"color",A.contextMenuLabelColor),Q(l,d,"3px 0"),N.disabled instanceof Function){var i=N.disabled.call(J,N);i&&(l[P]+=" disabled",Q(l,"color",A.contextMenuDisabledLabelColor))}else N.disabled&&(l[P]+=" disabled",Q(l,"color",A.contextMenuDisabledLabelColor));if(N.items){J.$21b||(J.$21b=new k.List);var f=x("ul",J._r);f[P]="submenu"+s,f.$45b=s,Q(f,z,"hidden"),Q(f,O,K),n(J._view,f),J.$21b.add(f),J.$2b(N.items,f)}}n(c,l)}}},rebuild:function(){var K=this,N=K._items,v=K._view;if(v&&(v[o]="",K.$21b=X,K.$5b=0,K.$19b=X,K.$20b=X,v.$26b=X,N&&0!==N.length)){var r=x("ul",K._r);n(v,r),K.$2b(N,r)}},addTo:function(C){if(C){var E=this,F=E.$13b;if(E.$12b=C,E.$9b=function(i){F.$44b(i)},E.$27b=function(V){F.$41b(V)},Y){var g=E.$6b=function(P){F.$38b(P)},d=E.$7b=function(E){F.$39b(E)},v=E.$8b=function(n){F.$40b(n)};R(C,"touchstart",g,!0),R(C,"touchmove",d),R(C,"touchend",v)}else R(C,"contextmenu",E.$27b)}},show:function(H,E,d){var v=this,d=d==X?!0:!1,J=v._view;if(J){if(v.invalidate(),1===arguments.length){var z=H;if(Y){var W=V(z);H=W.pageX,E=W.pageY}else H=z.pageX,E=z.pageY}var $=A.getWindowInfo(),x=$.width,B=$.height,Z=$.left,C=$.top,F={pageX:H,pageY:E,clientX:H-Z,clientY:E-C,target:1,originEvent:z},s=F.clientX,G=F.clientY,D=function(H){H.style.height=B-6+m;var L=y(),I=y(),x=function(H){Q(H,O,K),Q(H,"text-align","center"),Q(H,w,"100%"),Q(H,"font-size",10+m),Q(H,"padding","2px 0"),Q(H,"border","0px solid "+A.contextMenuScrollerBorderColor),Q(H,"background-color",A.contextMenuScrollerColor1),H.style.backgroundImage="-webkit-linear-gradient(top, "+A.contextMenuScrollerColor1+", "+A.contextMenuScrollerColor2+")",H.style.backgroundImage="linear-gradient(to bottom, "+A.contextMenuScrollerColor1+", "+A.contextMenuScrollerColor2+")"};L[P]="menu-arrow-item menu-arrow-item-top",I[P]="menu-arrow-item menu-arrow-item-bottom",x(L),Q(L,"top",r),Q(L,"left",r),Q(L,"border-bottom-width",1+m),L[o]="▲",x(I),Q(I,"bottom",r),Q(I,"left",r),Q(I,"border-top-width",1+m),I[o]="▼",H.$24b=L,H.$25b=I,H.$18b=H.scrollTop,H.$22b=H.scrollHeight,H.$23b=H.clientHeight,n(H,L),n(H,I),v.$42b(H)};v.beforeShow&&v.beforeShow(F);var e=v._items;if(e&&(z&&z.preventDefault(),e.length)){v.rebuild(),n(U(),J),J.$26b=t(J,".menu-item");var k=J.children[0];k.offsetHeight>B&&D(k);var l=G+(d?1:0),L=s+(d?1:0),j=function(B){for(var E=0,j=0,q=0,d=v.$43b;q<B.children.length;q++){var f=B.children[q];if(f.getAttribute("data-id")){var J=f.children[1],L=f.children[2],$=J.children;if(d){var V=$[0];$.length>1&&(V=$[1]),V.offsetWidth>d&&(V[o]="<marquee scrollamount='3'>"+V[o]+"</marquee>",V.children[0].style.verticalAlign="text-bottom",Q(V,w,d+m),Q(V,M,"inline-block"))}var P=J.offsetWidth,C=L.offsetWidth;P>E&&(E=P),C>j&&(j=C)}}for(q=0;q<B.children.length;q++){var f=B.children[q];if(f.getAttribute("data-id")){var J=f.children[1],L=f.children[2],c=J.children[0],S=J.children[1];!S&&c.style.width&&Q(c,w,E+m),Q(J,w,E+m),Q(L,w,j+m)}}};j(k);var b=G+3+J.offsetHeight,h=s+3+J.offsetWidth;b>B?Q(J,i,l-(b-B)+C+m):Q(J,i,l+C+m),h>x?Q(J,S,L-(h-x)+Z+m):Q(J,S,L+Z+m);var u=v.$21b;u&&u.each(function(L){j(L),L.offsetHeight>B&&D(L)}),v.$9b&&R(N(),Y?"touchstart":"mousedown",v.$9b,!0),v.afterShow&&v.afterShow(F),v.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=X:!1},getRelatedView:function(){return this.$12b},hide:function(){var j=this,Q=j._view;Q&&Q.parentNode&&(Z(Q.parentNode,Q),J(N(),Y?"touchstart":"mousedown",j.$9b,!0),j.afterHide&&j.afterHide())},dispose:function(){var h=this,P=h.$12b,M=h._view;M&&(M.parentNode&&Z(M.parentNode,M),h.disableGlobalKey(),P&&(Y?(J(P,"touchstart",h.$6b,!0),J(P,"touchmove",h.$7b),J(P,"touchend",h.$8b)):J(P,"contextmenu",h.$27b)),h._view=h._items=h.$21b=h.$19b=h.$12b=h.beforeShow=h.afterShow=h.afterHide=h.$9b=h.$3b=h.$6b=h.$7b=h.$8b=h.$27b=X)},$46b:function(m,y,Y,n){var T=W.initContext(m);W.translateAndScale(T,0,0,1),T.clearRect(0,0,Y,n),A.drawStretchImage(T,A.getImage(y),"fill",0,0,Y,n),T.restore()},$47b:function(){var m,N,d,i=this,D=i._view;if(i.isShowing()){var s=t(D,".check-prefix");for(d=0;d<s.length;d++){var j=s[d];m=j.clientWidth,N=j.clientHeight,j.$48b=m,j.$49b=N,W.setCanvas(j,m,N)}var E=t(D,".radio-prefix");for(d=0;d<E.length;d++){var l=E[d];m=l.clientWidth,N=l.clientHeight,l.$48b=m,l.$49b=N,W.setCanvas(l,m,N)}var V=t(D,".contextmenu-item-icon");for(d=0;d<V.length;d++){var g=V[d];m=g.clientWidth,N=g.clientHeight,g.$48b=m,g.$49b=N,W.setCanvas(g,m,N)}}},validateImpl:function(){var m,f,h,B=this,X=B._view;if(B.isShowing()){var l=t(X,".check-prefix");for(h=0;h<l.length;h++){var J=l[h];m=J.$48b,f=J.$49b,m&&f&&B.$46b(J,A.contextMenuCheckIcon,m,f)}var W=t(X,".radio-prefix");for(h=0;h<W.length;h++){var C=W[h];m=C.$48b,f=C.$49b,m&&f&&B.$46b(C,A.contextMenuRadioIcon,m,f)}var O=t(X,".contextmenu-item-icon");for(h=0;h<O.length;h++){var w=O[h];m=w.$48b,f=w.$49b,m&&f&&B.$46b(w,A.getImage(w.$50b),m,f)}}}})}(this,Object);